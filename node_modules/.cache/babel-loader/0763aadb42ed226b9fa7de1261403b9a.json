{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/coupons/Coupon.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport penIcon from \"../../assets/images/coupons/pen.svg\";\nimport expiry from \"../../assets/images/coupons/expiry.svg\";\nimport radioOff from \"../../assets/images/coupons/radioOff.svg\";\nimport radioOn from \"../../assets/images/coupons/radioOnYellow.svg\";\nimport shareIcon from \"../../assets/images/coupons/share.svg\";\nimport copyIcon from \"../../assets/images/coupons/copy.svg\";\nimport DeviceUtils from \"../../utils/deviceUtils\";\nimport { CouponLevel, CouponStatus, DiscountType } from \"../../constants/coupon\";\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from \"../../hooks\";\nimport { share } from \"../../utils\";\nimport SnackBar from \"../../services/snackbar\";\nimport Loader from \"../../services/loader\";\nimport { Snitch } from \"../../api\";\nimport { shareProduct, shareShop } from \"../../utils/share\";\nimport { useCustomDomain, useIsOnCustomDomain, useShop } from \"../../contexts/userContext\";\nimport moment from 'moment';\nimport { generateSlug } from \"../../utils/slug\"; // import { useDesktop } from 'contexts';\n// import { SideDrawer } from 'components/shared/SideDrawer';\n\nimport styles from \"./Coupon.module.css\";\nexport function Coupon({\n  coupon,\n  refresh\n}) {\n  _s();\n\n  const history = useHistory();\n  const shop = useShop();\n  const params = useQueryParams(); // const isDesktop = useDesktop();\n\n  console.log(coupon);\n  const isCustomDomain = useIsOnCustomDomain();\n  const domain = useCustomDomain();\n\n  const switchStatus = async e => {\n    e.stopPropagation();\n\n    try {\n      Loader.show();\n      const status = coupon.status === CouponStatus.ACTIVE ? CouponStatus.INACTIVE : CouponStatus.ACTIVE;\n      await Snitch.updateCouponStatus(coupon._id, status);\n      refresh();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const editCoupon = async () => {\n    params.set('coupon', coupon._id);\n    history.push({\n      search: params.toString()\n    });\n  };\n\n  const shareCoupon = type => e => {\n    e.stopPropagation();\n    const func = type === 'share' ? share : DeviceUtils.copy;\n    const discountText = coupon.type === DiscountType.FLAT ? `flat ${shop.currency}${coupon.value} off` : `${coupon.value}% off upto ${shop.currency}${coupon.maxValue}`;\n\n    if (coupon.level === CouponLevel.PRODUCT) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText}.\n\nYou can place the order for this product here ${shareProduct(generateSlug('product', coupon.products[0]), shop.slug, isCustomDomain, domain)}\n\nYou can chat with us on the same link if you need any help with this order\n\nP.S Please visit my Shop at\n${shareShop(shop.slug, isCustomDomain, domain)} to see the complete catalog and buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (coupon.level === CouponLevel.SHOP) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText} on all products of my shop.\n\nPlease visit my Shop at ${shareShop(shop.slug, isCustomDomain, domain)} to buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (type === 'copy') {\n      SnackBar.show('Copied to clipboard', 'success');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.main,\n    onClick: editCoupon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.leftTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, coupon.level === CouponLevel.PRODUCT ? 'Products' : 'Shop', /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ball1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.top,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.money,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, coupon.type === DiscountType.FLAT ? `${shop.currency} ${coupon.value}` : `${coupon.value}%`), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, coupon.code), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.radio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: coupon.status === CouponStatus.ACTIVE ? radioOn : radioOff,\n    alt: \"\",\n    onClick: switchStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dashedBorder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: expiry,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.expiry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"Validity\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.expiredText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, `${moment(coupon.createdAt).format('ll')} to \n                ${moment(coupon.expiresAt).format('LL')} | ${moment(coupon.expiresAt).format('LT')}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.shareContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.share,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: shareCoupon('share'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    className: styles.shareIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sharetext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \"Share Coupon\")), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: shareCoupon('copy'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: copyIcon,\n    className: styles.copyIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.copytext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"Copy\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.pen,\n    src: penIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  })))))));\n}\n\n_s(Coupon, \"EO9+w3SSytDsLArAtxE6OYH3Gf4=\", false, function () {\n  return [useHistory, useShop, useQueryParams, useIsOnCustomDomain, useCustomDomain];\n});\n\n_c = Coupon;\nCoupon.propTypes = {\n  coupon: PropTypes.object.isRequired,\n  refresh: PropTypes.func.isRequired\n};\nCoupon.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"Coupon\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/coupons/Coupon.jsx"],"names":["React","PropTypes","DeviceUtils","CouponLevel","CouponStatus","DiscountType","useHistory","useQueryParams","share","SnackBar","Loader","Snitch","shareProduct","shareShop","useCustomDomain","useIsOnCustomDomain","useShop","moment","generateSlug","styles","Coupon","coupon","refresh","history","shop","params","console","log","isCustomDomain","domain","switchStatus","e","stopPropagation","show","status","ACTIVE","INACTIVE","updateCouponStatus","_id","showError","hide","editCoupon","set","push","search","toString","shareCoupon","type","func","copy","discountText","FLAT","currency","value","maxValue","level","PRODUCT","code","products","slug","name","SHOP","main","container","leftTitle","ball1","right","top","money","radio","radioOn","radioOff","dashedBorder","bottom","expiry","expiredText","createdAt","format","expiresAt","shareContainer","shareIcon","sharetext","copyIcon","copytext","bottomRight","pen","penIcon","propTypes","object","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport penIcon from 'assets/images/coupons/pen.svg';\nimport expiry from 'assets/images/coupons/expiry.svg';\nimport radioOff from 'assets/images/coupons/radioOff.svg';\nimport radioOn from 'assets/images/coupons/radioOnYellow.svg';\nimport shareIcon from 'assets/images/coupons/share.svg';\nimport copyIcon from 'assets/images/coupons/copy.svg';\nimport DeviceUtils from 'utils/deviceUtils';\nimport { CouponLevel, CouponStatus, DiscountType } from 'constants/coupon';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from 'hooks';\nimport { share } from 'utils';\nimport SnackBar from 'services/snackbar';\nimport Loader from 'services/loader';\nimport { Snitch } from 'api';\nimport { shareProduct, shareShop } from 'utils/share';\nimport { useCustomDomain, useIsOnCustomDomain, useShop } from 'contexts/userContext';\nimport moment from 'moment';\nimport { generateSlug } from 'utils/slug';\n// import { useDesktop } from 'contexts';\n// import { SideDrawer } from 'components/shared/SideDrawer';\nimport styles from './Coupon.module.css';\n\nexport function Coupon({\n  coupon,\n  refresh\n}) {\n  const history = useHistory();\n  const shop = useShop();\n  const params = useQueryParams();\n  // const isDesktop = useDesktop();\n  console.log(coupon);\n\n  const isCustomDomain = useIsOnCustomDomain();\n  const domain = useCustomDomain();\n\n  const switchStatus = async (e) => {\n    e.stopPropagation();\n    try {\n      Loader.show();\n      const status = coupon.status === CouponStatus.ACTIVE ? CouponStatus.INACTIVE : CouponStatus.ACTIVE;\n      await Snitch.updateCouponStatus(coupon._id, status);\n      refresh();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const editCoupon = async () => {\n    params.set('coupon', coupon._id);\n    history.push({\n      search: params.toString(),\n    });\n  };\n\n  const shareCoupon = (type) => (e) => {\n    e.stopPropagation();\n    const func = type === 'share' ? share : DeviceUtils.copy;\n    const discountText = coupon.type === DiscountType.FLAT\n      ? `flat ${shop.currency}${coupon.value} off`\n      : `${coupon.value}% off upto ${shop.currency}${coupon.maxValue}`;\n\n    if (coupon.level === CouponLevel.PRODUCT) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText}.\n\nYou can place the order for this product here ${\n  shareProduct(generateSlug('product', coupon.products[0]), shop.slug, isCustomDomain, domain)\n}\n\nYou can chat with us on the same link if you need any help with this order\n\nP.S Please visit my Shop at\n${shareShop(shop.slug, isCustomDomain, domain)} to see the complete catalog and buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (coupon.level === CouponLevel.SHOP) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText} on all products of my shop.\n\nPlease visit my Shop at ${shareShop(shop.slug, isCustomDomain, domain)} to buy my products.\n\nThank you\n${shop.name}`);\n    }\n    if (type === 'copy') {\n      SnackBar.show('Copied to clipboard', 'success');\n    }\n  };\n\n  return (\n    <div className={styles.main} onClick={editCoupon}>\n      <div className={styles.container}>\n        <div className={styles.leftTitle}>\n          {coupon.level === CouponLevel.PRODUCT ? 'Products' : 'Shop'}\n          <div className={styles.ball1}></div>\n        </div>\n        <div className={styles.right}>\n          <div className={styles.top}>\n            <div className={styles.money}>\n              {coupon.type === DiscountType.FLAT ? `${shop.currency} ${coupon.value}` : `${coupon.value}%`}\n            </div>\n            <div className={styles.code}>{coupon.code}</div>\n            <div className={styles.radio}>\n              <img src={coupon.status === CouponStatus.ACTIVE ? radioOn : radioOff} alt=\"\" onClick={switchStatus} />\n            </div>\n          </div>\n          <div className={styles.dashedBorder} />\n          <div className={styles.bottom}>\n            <img src={expiry} alt=\"\" />\n            <div className={styles.expiry}>\n              <span>Validity</span>\n              <div className={styles.expiredText}>\n                {`${moment(coupon.createdAt).format('ll')} to \n                ${moment(coupon.expiresAt).format('LL')} | ${moment(coupon.expiresAt).format('LT')}`}\n              </div>\n            </div>\n          </div>\n          <div className={styles.shareContainer}>\n            <div className={styles.share}>\n              <div onClick={shareCoupon('share')}>\n                <img src={shareIcon} className={styles.shareIcon} alt=\"\" />\n                <div className={styles.sharetext}>\n                  Share Coupon\n                </div>\n              </div>\n              <div onClick={shareCoupon('copy')}>\n                <img src={copyIcon} className={styles.copyIcon} alt=\"\" />\n                <div className={styles.copytext}>\n                  Copy\n                </div>\n              </div>\n            </div>\n            <div className={styles.bottomRight}>\n              <div>\n                <img className={styles.pen} src={penIcon} alt=\"\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nCoupon.propTypes = {\n  coupon: PropTypes.object.isRequired,\n  refresh: PropTypes.func.isRequired,\n};\n\nCoupon.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}