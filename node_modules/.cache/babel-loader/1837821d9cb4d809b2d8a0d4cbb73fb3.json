{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/aboutSeller/AboutSeller.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { Becca } from \"../../api\";\nimport Loader from \"../../services/loader\";\nimport SnackBar from \"../../services/snackbar\";\nimport { useHistory } from 'react-router-dom';\nimport { Editor } from '@tinymce/tinymce-react';\nimport editIcon from \"../../assets/overview/edit.svg\";\nimport { Button, Clickable } from 'phoenix-components';\nimport { Formik } from 'formik';\nimport { useShop, useRefreshShop } from \"../../contexts\";\nimport { useToggle } from \"../../hooks/common\";\nimport { useIsAboutEnabled, isAboutShopFilled, isLegalPrivacyFilled, isLegalTermsFilled } from \"../../contexts/userContext\";\nimport { useQueryParams } from \"../../hooks\";\nimport { useDesktop } from \"../../contexts\";\nimport { FooterButton } from \"../../components/common/FooterButton\";\nimport { SideDrawer } from \"../../components/shared/SideDrawer\";\nimport chevronLeftDesk from \"../../assets/v2/common/chevronPrimaryLeft.svg\";\nimport { Drawer } from \"../../components/shared/Drawer\";\nimport cx from 'classnames';\nimport styles from \"./AboutSeller.module.css\";\nimport { getValues, getPlaceholder, getValue, getTitle } from \"./utils\";\n\nfunction AboutSeller() {\n  _s();\n\n  const history = useHistory();\n  const shop = useShop();\n  const refresh = useRefreshShop();\n  const [openEdit, toggleEdit] = useToggle(false);\n  const params = useQueryParams();\n  const whatToShow = params.get('type') || '';\n  const isAboutEnabled = useIsAboutEnabled();\n  const isDesktop = useDesktop();\n  const [sideDrawer, setSideDrawer] = useState(false);\n  const isAboutFilled = isAboutShopFilled();\n  const isLpFilled = isLegalPrivacyFilled();\n  const isLtFilled = isLegalTermsFilled();\n  useEffect(() => {\n    if (isDesktop) {\n      return;\n    }\n\n    if (openEdit) {\n      Loader.show();\n      return;\n    }\n\n    Loader.hide();\n  }, [openEdit]);\n  useEffect(() => {\n    if (!isDesktop) {\n      return;\n    }\n\n    if (sideDrawer) {\n      Loader.show();\n      return;\n    }\n\n    Loader.hide();\n  }, [sideDrawer]);\n  const isAboutPage = whatToShow === '' || whatToShow === 'about';\n  const isLegalPolicyPage = whatToShow === 'lp';\n  const isLegalTncPage = whatToShow === 'lt';\n  useEffect(() => {\n    if (isAboutPage && !isAboutFilled) {\n      toggleEdit(!openEdit);\n\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n\n    if (isLegalPolicyPage && !isLpFilled) {\n      toggleEdit(!openEdit);\n\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n\n    if (isLegalTncPage && !isLtFilled) {\n      toggleEdit(!openEdit);\n\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n  }, [whatToShow]);\n\n  const getType = () => {\n    if (isAboutPage) {\n      return 0;\n    }\n\n    if (isLegalPolicyPage) {\n      return 1;\n    }\n\n    if (isLegalTncPage) {\n      return 2;\n    }\n  };\n\n  const onSubmit = async values => {\n    if (!isAboutEnabled && isAboutPage) {\n      params.set('openPlans', 'generic');\n      history.push({\n        search: params.toString()\n      });\n      return;\n    }\n\n    try {\n      Loader.show();\n      await Becca.updateShop(values);\n      refresh();\n      SnackBar.show('updated successfully', 'success');\n\n      if (!isDesktop) {\n        history.goBack();\n      }\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  if (isDesktop) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.desktopContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: () => history.goBack(),\n      className: styles.maintitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.backIconForDesktop,\n      src: chevronLeftDesk,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, \"\\xA0\"), getTitle(getType())), /*#__PURE__*/React.createElement(Formik, {\n      initialValues: getValues(shop, getType()) // validationSchema={schema}\n      ,\n      onSubmit: onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, ({\n      values,\n      setFieldValue,\n      submitForm\n    }) => /*#__PURE__*/React.createElement(React.Fragment, null, !openEdit && /*#__PURE__*/React.createElement(Clickable, {\n      onClick: () => {\n        toggleEdit();\n        setSideDrawer(true);\n      },\n      className: styles.previewCard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.previewHeader,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.previewHeadTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, getTitle(getType())), /*#__PURE__*/React.createElement(\"img\", {\n      src: editIcon,\n      alt: \"edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: getValue(values, getType())\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }\n    })), openEdit && sideDrawer && /*#__PURE__*/React.createElement(SideDrawer, {\n      backButton: true,\n      title: getTitle(getType()),\n      classes: {\n        container: styles.customBody\n      },\n      onClose: () => {\n        setSideDrawer(!sideDrawer);\n        toggleEdit(!toggleEdit);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.sidebarDiv,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.editor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Editor, {\n      value: getValue(values, getType()),\n      apiKey: \"jk7y6v6dbe2h16qh13q5klle5sz76ddgevc6ph3v1sa4bgu1\",\n      scriptLoading: {\n        async: true\n      },\n      init: {\n        menubar: false,\n        toolbar: false,\n        height: 'calc(100vh - 59px - 52px - 50px - 40px)',\n        width: '100%',\n        placeholder: getPlaceholder(getType()),\n        statusbar: false,\n        branding: false,\n        selector: 'textarea',\n        paste_data_images: false,\n        plugins: ['paste']\n      },\n      onInit: () => {\n        Loader.hide();\n      },\n      onEditorChange: e => {\n        if (isAboutPage) {\n          setFieldValue('about', e);\n        }\n\n        if (isLegalPolicyPage) {\n          setFieldValue('legalPrivacyPolicy', e);\n        }\n\n        if (isLegalTncPage) {\n          setFieldValue('legalTncs', e);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.button, 'flexCenter'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      bordered: true,\n      label: \"Save\",\n      primary: true,\n      size: \"large\",\n      onClick: submitForm,\n      onClose: () => {\n        // setSideDrawer(!sideDrawer);\n        // toggleEdit(!toggleEdit);\n        submitForm();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }\n    })))))));\n  }\n\n  return /*#__PURE__*/React.createElement(Drawer, {\n    title: getTitle(getType()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: getValues(shop, getType()) // validationSchema={schema}\n    ,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }, ({\n    values,\n    setFieldValue,\n    submitForm\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, !openEdit && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.previewCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.previewHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.previewHeadTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 21\n    }\n  }, getTitle(getType())), /*#__PURE__*/React.createElement(Clickable, {\n    onClick: toggleEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: editIcon,\n    alt: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: getValue(values, getType())\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 19\n    }\n  })), openEdit && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.editor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Editor, {\n    value: getValue(values, getType()),\n    apiKey: \"jk7y6v6dbe2h16qh13q5klle5sz76ddgevc6ph3v1sa4bgu1\",\n    scriptLoading: {\n      async: true\n    },\n    init: {\n      menubar: false,\n      toolbar: false,\n      height: 'calc(100vh - 59px - 52px - 50px - 16px)',\n      width: '100%',\n      placeholder: getPlaceholder(getType()),\n      statusbar: false,\n      branding: false,\n      selector: 'textarea',\n      paste_data_images: false,\n      plugins: ['paste']\n    },\n    onInit: () => {\n      Loader.hide();\n    },\n    onEditorChange: e => {\n      console.log(e);\n\n      if (isAboutPage) {\n        setFieldValue('about', e);\n      }\n\n      if (isLegalPolicyPage) {\n        setFieldValue('legalPrivacyPolicy', e);\n      }\n\n      if (isLegalTncPage) {\n        setFieldValue('legalTncs', e);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(FooterButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    bordered: false,\n    label: \"Save\",\n    primary: true,\n    size: \"large\",\n    onClick: submitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 21\n    }\n  })))))));\n}\n\n_s(AboutSeller, \"ASRsDlTQVRJba2lRs+6/j/UIkEo=\", false, function () {\n  return [useHistory, useShop, useRefreshShop, useToggle, useQueryParams, useIsAboutEnabled, useDesktop];\n});\n\n_c = AboutSeller;\nexport default AboutSeller;\n\nvar _c;\n\n$RefreshReg$(_c, \"AboutSeller\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/aboutSeller/AboutSeller.jsx"],"names":["React","useEffect","useState","Becca","Loader","SnackBar","useHistory","Editor","Button","Clickable","Formik","useShop","useRefreshShop","useToggle","useIsAboutEnabled","isAboutShopFilled","isLegalPrivacyFilled","isLegalTermsFilled","useQueryParams","useDesktop","FooterButton","SideDrawer","Drawer","cx","styles","getValues","getPlaceholder","getValue","getTitle","AboutSeller","history","shop","refresh","openEdit","toggleEdit","params","whatToShow","get","isAboutEnabled","isDesktop","sideDrawer","setSideDrawer","isAboutFilled","isLpFilled","isLtFilled","show","hide","isAboutPage","isLegalPolicyPage","isLegalTncPage","getType","onSubmit","values","set","push","search","toString","updateShop","goBack","e","showError","desktopContainer","maintitle","backIconForDesktop","chevronLeftDesk","setFieldValue","submitForm","previewCard","previewHeader","previewHeadTitle","editIcon","__html","container","customBody","sidebarDiv","editor","async","menubar","toolbar","height","width","placeholder","statusbar","branding","selector","paste_data_images","plugins","button","mainContainer","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { Becca } from 'api';\nimport Loader from 'services/loader';\nimport SnackBar from 'services/snackbar';\nimport { useHistory } from 'react-router-dom';\nimport { Editor } from '@tinymce/tinymce-react';\nimport editIcon from 'assets/overview/edit.svg';\nimport { Button, Clickable } from 'phoenix-components';\nimport { Formik } from 'formik';\nimport { useShop, useRefreshShop } from 'contexts';\nimport { useToggle } from 'hooks/common';\nimport {\n  useIsAboutEnabled,\n  isAboutShopFilled,\n  isLegalPrivacyFilled,\n  isLegalTermsFilled,\n} from 'contexts/userContext';\nimport { useQueryParams } from 'hooks';\nimport { useDesktop } from 'contexts';\nimport { FooterButton } from 'components/common/FooterButton';\nimport { SideDrawer } from 'components/shared/SideDrawer';\nimport chevronLeftDesk from 'assets/v2/common/chevronPrimaryLeft.svg';\nimport { Drawer } from 'components/shared/Drawer';\nimport cx from 'classnames';\nimport styles from './AboutSeller.module.css';\nimport {\n  getValues, getPlaceholder, getValue,\n  getTitle\n} from './utils';\n\nfunction AboutSeller() {\n  const history = useHistory();\n  const shop = useShop();\n  const refresh = useRefreshShop();\n  const [openEdit, toggleEdit] = useToggle(false);\n  const params = useQueryParams();\n  const whatToShow = params.get('type') || '';\n  const isAboutEnabled = useIsAboutEnabled();\n  const isDesktop = useDesktop();\n  const [sideDrawer, setSideDrawer] = useState(false);\n\n  const isAboutFilled = isAboutShopFilled();\n  const isLpFilled = isLegalPrivacyFilled();\n  const isLtFilled = isLegalTermsFilled();\n\n  useEffect(() => {\n    if (isDesktop) {\n      return;\n    }\n    if (openEdit) {\n      Loader.show();\n      return;\n    }\n    Loader.hide();\n  }, [openEdit]);\n\n  useEffect(() => {\n    if (!isDesktop) {\n      return;\n    }\n    if (sideDrawer) {\n      Loader.show();\n      return;\n    }\n    Loader.hide();\n  }, [sideDrawer]);\n\n  const isAboutPage = whatToShow === '' || whatToShow === 'about';\n  const isLegalPolicyPage = whatToShow === 'lp';\n  const isLegalTncPage = whatToShow === 'lt';\n\n  useEffect(() => {\n    if (isAboutPage && !isAboutFilled) {\n      toggleEdit(!openEdit);\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n    if (isLegalPolicyPage && !isLpFilled) {\n      toggleEdit(!openEdit);\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n    if (isLegalTncPage && !isLtFilled) {\n      toggleEdit(!openEdit);\n      if (isDesktop) {\n        setSideDrawer(true);\n      }\n    }\n  }, [whatToShow]);\n\n  const getType = () => {\n    if (isAboutPage) {\n      return 0;\n    }\n    if (isLegalPolicyPage) {\n      return 1;\n    }\n    if (isLegalTncPage) {\n      return 2;\n    }\n  };\n\n  const onSubmit = async (values) => {\n    if (!isAboutEnabled && isAboutPage) {\n      params.set('openPlans', 'generic');\n      history.push({\n        search: params.toString(),\n      });\n      return;\n    }\n    try {\n      Loader.show();\n      await Becca.updateShop(values);\n      refresh();\n      SnackBar.show('updated successfully', 'success');\n      if (!isDesktop) {\n        history.goBack();\n      }\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  if (isDesktop) {\n    return (\n      <div className={styles.desktopContainer}>\n        <div onClick={() => history.goBack()} className={styles.maintitle}>\n          <img className={styles.backIconForDesktop} src={chevronLeftDesk} alt=\"\" />\n          <div>&nbsp;</div>\n          <div>&nbsp;</div>\n          {getTitle(getType())}\n        </div>\n        <Formik\n          initialValues={getValues(shop, getType())}\n          // validationSchema={schema}\n          onSubmit={onSubmit}\n        >\n          {({ values, setFieldValue, submitForm }) => (\n            <>\n              {!openEdit && (\n                <Clickable\n                  onClick={() => { toggleEdit(); setSideDrawer(true); }}\n                  className={styles.previewCard}\n                >\n                  <div className={styles.previewHeader}>\n                    <div className={styles.previewHeadTitle}>{getTitle(getType())}</div>\n                    <img src={editIcon} alt=\"edit\" />\n                  </div>\n                  <div dangerouslySetInnerHTML={{ __html: getValue(values, getType()) }} />\n                </Clickable>\n              )}\n              {openEdit && sideDrawer && (\n                <SideDrawer\n                  backButton={true}\n                  title={getTitle(getType())}\n                  classes={{\n                    container: styles.customBody,\n                  }}\n                  onClose={() => {\n                    setSideDrawer(!sideDrawer);\n                    toggleEdit(!toggleEdit);\n                  }}\n                >\n                  <div className={styles.sidebarDiv}>\n                    <div className={styles.editor}>\n                      <Editor\n                        value={getValue(values, getType())}\n                        apiKey=\"jk7y6v6dbe2h16qh13q5klle5sz76ddgevc6ph3v1sa4bgu1\"\n                        scriptLoading={{ async: true }}\n                        init={{\n                          menubar: false,\n                          toolbar: false,\n                          height: 'calc(100vh - 59px - 52px - 50px - 40px)',\n                          width: '100%',\n                          placeholder: getPlaceholder(getType()),\n                          statusbar: false,\n                          branding: false,\n                          selector: 'textarea',\n                          paste_data_images: false,\n                          plugins: [\n                            'paste'\n                          ],\n                        }}\n                        onInit={() => {\n                          Loader.hide();\n                        }}\n                        onEditorChange={(e) => {\n                          if (isAboutPage) {\n                            setFieldValue('about', e);\n                          }\n                          if (isLegalPolicyPage) {\n                            setFieldValue('legalPrivacyPolicy', e);\n                          }\n                          if (isLegalTncPage) {\n                            setFieldValue('legalTncs', e);\n                          }\n                        }}\n                      />\n                    </div>\n                    <div className={cx(styles.button, 'flexCenter')}>\n                      <Button\n                        bordered={true}\n                        label=\"Save\"\n                        primary\n                        size=\"large\"\n                        onClick={submitForm}\n                        onClose={() => {\n                          // setSideDrawer(!sideDrawer);\n                          // toggleEdit(!toggleEdit);\n                          submitForm();\n                        }}\n                      >\n                      </Button>\n                    </div>\n                  </div>\n                </SideDrawer>\n              )}\n            </>\n          )}\n        </Formik>\n      </div>\n    );\n  }\n\n  return (\n    <Drawer\n      title={getTitle(getType())}\n    >\n      <div className={styles.mainContainer}>\n        <Formik\n          initialValues={getValues(shop, getType())}\n          // validationSchema={schema}\n          onSubmit={onSubmit}\n        >\n          {({ values, setFieldValue, submitForm }) => (\n            <>\n              {!openEdit && (\n                <div\n                  className={styles.previewCard}\n                >\n                  <div className={styles.previewHeader}>\n                    <div className={styles.previewHeadTitle}>{getTitle(getType())}</div>\n                    <Clickable onClick={toggleEdit}>\n                      <img src={editIcon} alt=\"edit\" />\n                    </Clickable>\n                  </div>\n                  <div dangerouslySetInnerHTML={{ __html: getValue(values, getType()) }} />\n                </div>\n              )}\n              {openEdit && (\n                <>\n                  <div className={styles.editor}>\n                    <Editor\n                      value={getValue(values, getType())}\n                      apiKey=\"jk7y6v6dbe2h16qh13q5klle5sz76ddgevc6ph3v1sa4bgu1\"\n                      scriptLoading={{ async: true }}\n                      init={{\n                        menubar: false,\n                        toolbar: false,\n                        height: 'calc(100vh - 59px - 52px - 50px - 16px)',\n                        width: '100%',\n                        placeholder: getPlaceholder(getType()),\n                        statusbar: false,\n                        branding: false,\n                        selector: 'textarea',\n                        paste_data_images: false,\n                        plugins: [\n                          'paste'\n                        ],\n                      }}\n                      onInit={() => {\n                        Loader.hide();\n                      }}\n                      onEditorChange={(e) => {\n                        console.log(e);\n                        if (isAboutPage) {\n                          setFieldValue('about', e);\n                        }\n                        if (isLegalPolicyPage) {\n                          setFieldValue('legalPrivacyPolicy', e);\n                        }\n                        if (isLegalTncPage) {\n                          setFieldValue('legalTncs', e);\n                        }\n                      }}\n                    />\n                  </div>\n                  <FooterButton>\n                    <Button\n                      fullWidth\n                      bordered={false}\n                      label=\"Save\"\n                      primary\n                      size=\"large\"\n                      onClick={submitForm}\n                    >\n                    </Button>\n                  </FooterButton>\n                </>\n              )}\n            </>\n          )}\n        </Formik>\n      </div>\n    </Drawer>\n  );\n}\nexport default AboutSeller;\n"]},"metadata":{},"sourceType":"module"}