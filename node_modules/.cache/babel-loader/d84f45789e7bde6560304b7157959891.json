{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$(),\n    _s11 = $RefreshSig$(),\n    _s12 = $RefreshSig$(),\n    _s13 = $RefreshSig$(),\n    _s14 = $RefreshSig$(),\n    _s15 = $RefreshSig$(),\n    _s16 = $RefreshSig$(),\n    _s17 = $RefreshSig$(),\n    _s18 = $RefreshSig$(),\n    _s19 = $RefreshSig$(),\n    _s20 = $RefreshSig$(),\n    _s21 = $RefreshSig$(),\n    _s22 = $RefreshSig$(),\n    _s23 = $RefreshSig$(),\n    _s24 = $RefreshSig$(),\n    _s25 = $RefreshSig$(),\n    _s26 = $RefreshSig$(),\n    _s27 = $RefreshSig$(),\n    _s28 = $RefreshSig$(),\n    _s29 = $RefreshSig$(),\n    _s30 = $RefreshSig$(),\n    _s31 = $RefreshSig$(),\n    _s32 = $RefreshSig$(),\n    _s33 = $RefreshSig$(),\n    _s34 = $RefreshSig$(),\n    _s35 = $RefreshSig$(),\n    _s36 = $RefreshSig$(),\n    _s37 = $RefreshSig$(),\n    _s38 = $RefreshSig$(),\n    _s39 = $RefreshSig$(),\n    _s40 = $RefreshSig$(),\n    _s41 = $RefreshSig$(),\n    _s42 = $RefreshSig$(),\n    _s43 = $RefreshSig$(),\n    _s44 = $RefreshSig$(),\n    _s45 = $RefreshSig$(),\n    _s46 = $RefreshSig$(),\n    _s47 = $RefreshSig$();\n\nimport { createContext, useContext } from 'react';\nimport { useShop } from \"./userContext\";\nimport _ from 'lodash';\nexport const OrderContext = /*#__PURE__*/createContext({\n  order: null,\n  ids: [],\n  setIds: () => {},\n  refresh: () => {}\n});\nexport function useOrder() {\n  _s();\n\n  return useContext(OrderContext).order;\n}\n\n_s(useOrder, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function useRefresh() {\n  _s2();\n\n  return useContext(OrderContext).refresh;\n}\n\n_s2(useRefresh, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function useGetIds() {\n  _s3();\n\n  return useContext(OrderContext).ids;\n}\n\n_s3(useGetIds, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function useSetIds() {\n  _s4();\n\n  return useContext(OrderContext).setIds;\n}\n\n_s4(useSetIds, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function useContent() {\n  _s5();\n\n  const order = useOrder();\n  return order === null || order === void 0 ? void 0 : order.content;\n}\n\n_s5(useContent, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useVariant() {\n  _s6();\n\n  const content = useContent();\n  return _.get(content, 'variants[0]', null);\n}\n\n_s6(useVariant, \"E5+TlHP2hwM17hgu6jQUrnZyQiE=\", false, function () {\n  return [useContent];\n});\n\nexport function useMedia() {\n  _s7();\n\n  const content = useContent();\n  const variant = useVariant();\n\n  const skuImages = _.get(content, 'images', []);\n\n  const skuVideos = _.get(content, 'videos', []);\n\n  const variantImages = _.get(variant, 'images', []);\n\n  const variantVideos = _.get(variant, 'videos', []);\n\n  return {\n    images: [...skuImages, ...variantImages].map(x => x.url),\n    videos: [...skuVideos, ...variantVideos].map(x => x.url)\n  };\n}\n\n_s7(useMedia, \"ahWPp3l8IP7ybv99ea2f/3YR9rs=\", false, function () {\n  return [useContent, useVariant];\n});\n\nexport function useVariations() {\n  _s8();\n\n  const order = useOrder();\n  const variant = useVariant();\n\n  const quantity = _.get(order, 'quantity', 1);\n\n  return Object.entries({ ...((variant === null || variant === void 0 ? void 0 : variant.details) || {}),\n    ...{\n      quantity\n    }\n  }).map(([key, value]) => ({\n    key,\n    value\n  }));\n}\n\n_s8(useVariations, \"JJjgzm7Hh0LI5kST728TkIwO/EM=\", false, function () {\n  return [useOrder, useVariant];\n});\n\nexport function useCustomizationMessage() {\n  _s9();\n\n  const order = useOrder();\n  return _.get(order, 'note', '');\n}\n\n_s9(useCustomizationMessage, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useProductName() {\n  _s10();\n\n  const content = useContent();\n  return _.get(content, 'title', _.get(content, 'name', ''));\n}\n\n_s10(useProductName, \"E5+TlHP2hwM17hgu6jQUrnZyQiE=\", false, function () {\n  return [useContent];\n});\n\nexport function isOnlyPending() {\n  _s11();\n\n  const order = useOrder();\n  const {\n    groups: {\n      shipped = [],\n      confirmed = []\n    }\n  } = order;\n  return shipped.length === 0 && confirmed.length === 0;\n}\n\n_s11(isOnlyPending, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function usePendingPricing() {\n  _s12();\n\n  var _coupon$amount;\n\n  const order = useOrder(); // const { shippingCharges } = useContent();\n\n  const {\n    coupon\n  } = order;\n  const couponDiscount = (_coupon$amount = coupon === null || coupon === void 0 ? void 0 : coupon.amount) !== null && _coupon$amount !== void 0 ? _coupon$amount : 0;\n  const {\n    charges: {\n      shipping = 0,\n      customization = 0,\n      pg = 0\n    } = {},\n    tax: {\n      amount = 0,\n      value = {}\n    }\n  } = order;\n  const pricing = [{\n    name: 'Total Product Price',\n    value: order.amount - amount,\n    split: 1\n  }];\n\n  if (amount > 0) {\n    pricing.push({\n      name: 'Tax',\n      value: amount,\n      split: 1\n    });\n  }\n\n  if (shipping > 0) {\n    pricing.push({\n      name: 'Shipping Charges',\n      value: shipping,\n      split: 1\n    });\n  }\n\n  if (customization > 0) {\n    pricing.push({\n      name: 'Customization Fee',\n      value: customization,\n      split: 1\n    });\n  }\n\n  pricing.push({\n    name: 'Total Product Discount',\n    value: order.amount - order.discountedAmount,\n    split: 2\n  });\n\n  if (couponDiscount > 0) {\n    pricing.push({\n      name: `Coupon Discount  [ ${coupon.code} ]`,\n      value: couponDiscount,\n      split: 2\n    });\n  }\n\n  if (pg < 0) {\n    pricing.push({\n      name: 'Payment Gateway Fee Discount',\n      value: Math.abs(pg),\n      split: 2\n    });\n  } else if (pg > 0) {\n    pricing.push({\n      name: 'Payment Gateway Fee',\n      value: Math.abs(pg),\n      split: 1\n    });\n  }\n\n  const total = order.payable - couponDiscount;\n  return {\n    pricing,\n    total,\n    taxes: value\n  };\n}\n\n_s12(usePendingPricing, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useSettlement() {\n  _s13();\n\n  var _coupon$amount2, _order$charges, _order$charges2;\n\n  const order = useOrder();\n  const shop = useShop();\n  const {\n    coupon\n  } = order;\n  const couponDiscount = (_coupon$amount2 = coupon === null || coupon === void 0 ? void 0 : coupon.amount) !== null && _coupon$amount2 !== void 0 ? _coupon$amount2 : 0;\n  const total = order.payable - couponDiscount;\n  const pGCharges = ((shop === null || shop === void 0 ? void 0 : shop.country) === 'india' ? total * 0.02 : 2.93).toFixed(2);\n  const settlement = [{\n    name: 'Total Paid By Customer',\n    value: total.toFixed(2),\n    split: 1\n  }];\n  const commission = (order === null || order === void 0 ? void 0 : (_order$charges = order.charges) === null || _order$charges === void 0 ? void 0 : _order$charges.windoCommission) || 0;\n  const paymentGateway = (order === null || order === void 0 ? void 0 : (_order$charges2 = order.charges) === null || _order$charges2 === void 0 ? void 0 : _order$charges2.paymentGateway) || 0;\n\n  if (paymentGateway === 0) {\n    settlement.push({\n      name: 'Payment Gateway Charge Waiver',\n      value: pGCharges,\n      split: 1\n    }, {\n      name: 'Payment Gateway Charges',\n      value: pGCharges,\n      split: 2\n    });\n  } else {\n    settlement.push({\n      name: 'Payment Gateway Charges',\n      value: paymentGateway.toFixed(2),\n      split: 2\n    });\n  }\n\n  if (commission > 0) {\n    settlement.push({\n      name: 'Transaction Charges',\n      value: commission.toFixed(2),\n      split: 2\n    });\n  }\n\n  settlement.push({\n    name: 'Settlement Amount',\n    value: (total - paymentGateway - commission).toFixed(2),\n    split: 3\n  });\n  return {\n    settlement\n  };\n}\n\n_s13(useSettlement, \"YWxB0fyFruLDquHj+wX4zCksyQ4=\", false, function () {\n  return [useOrder, useShop];\n});\n\nexport function useToAddress() {\n  _s14();\n\n  const {\n    shipping: {\n      to = {}\n    } = {}\n  } = useOrder();\n  return to;\n}\n\n_s14(useToAddress, \"AaXdCbEZev+LaxWzS9PuObaeyA8=\", false, function () {\n  return [useOrder];\n});\n\nexport function useToContactDetails() {\n  _s15();\n\n  const {\n    shipping: {\n      toContactDetails = {}\n    } = {}\n  } = useOrder();\n  return toContactDetails;\n}\n\n_s15(useToContactDetails, \"v5Xc6mq2ZJRo0fved4VuZyZESMI=\", false, function () {\n  return [useOrder];\n});\n\nexport function usePaymentMode() {\n  _s16();\n\n  var _order$customPaymentM;\n\n  const order = useOrder();\n\n  switch (order === null || order === void 0 ? void 0 : order.paymentMode) {\n    case 'online':\n      return 'Online';\n\n    case 'cod':\n      return 'Cash';\n\n    case 'custompayment':\n      return (_order$customPaymentM = order === null || order === void 0 ? void 0 : order.customPaymentMode) !== null && _order$customPaymentM !== void 0 ? _order$customPaymentM : 'Custom Payment';\n\n    default:\n      return 'Pending';\n  }\n}\n\n_s16(usePaymentMode, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useButton(name) {\n  _s17();\n\n  const order = useOrder();\n  return _.get(order, `buttons.${name}`, false);\n}\n\n_s17(useButton, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useEnableCustomization() {\n  _s18();\n\n  return useButton('enableCustomization');\n}\n\n_s18(useEnableCustomization, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableTracking() {\n  _s19();\n\n  return useButton('enableTracking');\n}\n\n_s19(useEnableTracking, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableConfirm() {\n  _s20();\n\n  return useButton('enableConfirm');\n}\n\n_s20(useEnableConfirm, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableAccept() {\n  _s21();\n\n  return useButton('enableAccept');\n}\n\n_s21(useEnableAccept, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnablePendingCustomization() {\n  _s22();\n\n  return useButton('enablePendingCustomization');\n}\n\n_s22(useEnablePendingCustomization, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableAddress() {\n  _s23();\n\n  return useButton('enableAddress ');\n}\n\n_s23(useEnableAddress, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableBankDetails() {\n  _s24();\n\n  return useButton('enableBankDetails');\n}\n\n_s24(useEnableBankDetails, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableCancel() {\n  _s25();\n\n  return useButton('enableCancel');\n}\n\n_s25(useEnableCancel, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableReadyToShip() {\n  _s26();\n\n  return useButton('enableReadyToShip');\n}\n\n_s26(useEnableReadyToShip, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useEnableDelivered() {\n  _s27();\n\n  return useButton('enableDelivered');\n}\n\n_s27(useEnableDelivered, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useOrderStatus() {\n  _s28();\n\n  return useOrder().status;\n}\n\n_s28(useOrderStatus, \"DNO0Yx5YQVKUGVbMjD4EfOonpIQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useEnableMarkAsPaid() {\n  _s29();\n\n  return useButton('enableMarkAsPaid') && useOrderStatus() !== 'cancelled';\n}\n\n_s29(useEnableMarkAsPaid, \"Cvp/uyQVTNqMVzThAkVNRxWS+hU=\", false, function () {\n  return [useButton, useOrderStatus];\n});\n\nexport function useIsCod() {\n  _s30();\n\n  var _useOrder;\n\n  return !!((_useOrder = useOrder()) !== null && _useOrder !== void 0 && _useOrder.isCod);\n}\n\n_s30(useIsCod, \"DNO0Yx5YQVKUGVbMjD4EfOonpIQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useIsCustomPayment() {\n  _s31();\n\n  var _useOrder2;\n\n  return !!((_useOrder2 = useOrder()) !== null && _useOrder2 !== void 0 && _useOrder2.isCustomPayment);\n}\n\n_s31(useIsCustomPayment, \"DNO0Yx5YQVKUGVbMjD4EfOonpIQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useEnableDownloadLabel() {\n  _s32();\n\n  return useButton('enableDownloadLabel');\n}\n\n_s32(useEnableDownloadLabel, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useDirectPayment() {\n  _s33();\n\n  return useButton('directPayment');\n}\n\n_s33(useDirectPayment, \"jyus4MzvW4mvN0uhGNiUIShF4cw=\", false, function () {\n  return [useButton];\n});\n\nexport function useSellerShips() {\n  _s34();\n\n  const order = useOrder();\n  return !!(order !== null && order !== void 0 && order.sellerShips);\n}\n\n_s34(useSellerShips, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function usePendingOrders() {\n  _s35();\n\n  const order = useOrder();\n  const {\n    groups: {\n      pending = []\n    }\n  } = order;\n  return pending;\n}\n\n_s35(usePendingOrders, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useConfirmedOrders() {\n  _s36();\n\n  const order = useOrder();\n  const {\n    groups: {\n      confirmed = []\n    }\n  } = order;\n  return confirmed;\n}\n\n_s36(useConfirmedOrders, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useTransformedShippedOrders() {\n  _s37();\n\n  const order = useOrder();\n  const {\n    groups: {\n      shipped = []\n    }\n  } = order;\n  const other = shipped.map(x => {\n    const {\n      items = []\n    } = x;\n    const newItems = items.map((y, i) => {\n      y.buttons = x.buttons;\n      y.sellerShips = x.sellerShips;\n      y.shippingCharges = x.shippingCharges;\n      y.walletTransactions = x.walletTransactions;\n      y.groupId = x._id;\n      y.dimensions = x.dimensions;\n      y.weight = x.weight;\n      y.status = x.status;\n      y.details = x.details;\n      y.statusHistory = x.statusHistory;\n      y.isLast = i === items.length - 1;\n      y.allItemIds = items.map(x => x._id);\n      return y;\n    });\n    x.items = newItems;\n    return x;\n  });\n  return other;\n}\n\n_s37(useTransformedShippedOrders, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useShippedOrders() {\n  _s38();\n\n  const order = useOrder();\n  const {\n    groups: {\n      shipped = []\n    }\n  } = order;\n  return shipped;\n}\n\n_s38(useShippedOrders, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function usePaymentStatus() {\n  _s39();\n\n  const {\n    balance,\n    codBalance,\n    customPaymentBalance\n  } = useOrder();\n  const isCod = useIsCod();\n  const isCustomPayment = useIsCustomPayment();\n  const enableMark = useEnableMarkAsPaid();\n\n  if (isCod) {\n    if (codBalance > 0) {\n      return 'pending';\n    }\n\n    if (enableMark) {\n      return 'pending';\n    }\n\n    return 'paid';\n  }\n\n  if (isCustomPayment) {\n    if (customPaymentBalance > 0) {\n      return 'pending';\n    }\n\n    if (enableMark) {\n      return 'pending';\n    }\n\n    return 'paid';\n  }\n\n  if (balance > 1) {\n    return 'pending';\n  }\n\n  return 'paid';\n}\n\n_s39(usePaymentStatus, \"8pUAcEJnYHxZEzsytnsMK7xY1ls=\", false, function () {\n  return [useOrder, useIsCod, useIsCustomPayment, useEnableMarkAsPaid];\n});\n\nexport function usePaymentCustomDetails() {\n  _s40();\n\n  const {\n    payments: {\n      customPaymentDetails\n    }\n  } = useOrder();\n  return customPaymentDetails;\n}\n\n_s40(usePaymentCustomDetails, \"aETFRWfdWjEqpEvtbm2RQ4tf1hM=\", false, function () {\n  return [useOrder];\n});\n\nexport function isOrderCustomerPickUp() {\n  _s41();\n\n  const order = useOrder();\n  return _.get(order, 'shipping.mode', '') === 'customerpickup';\n}\n\n_s41(isOrderCustomerPickUp, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function isDigitalOrder() {\n  _s42();\n\n  const order = useOrder();\n  return _.get(order, 'shipping.mode', '') === 'digital';\n}\n\n_s42(isDigitalOrder, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useBalanceAmount() {\n  _s43();\n\n  const order = useOrder();\n  return order.balance || 0;\n}\n\n_s43(useBalanceAmount, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useConfirmedAmount() {\n  _s44();\n\n  return useOrder().confirmedAmount || 0;\n}\n\n_s44(useConfirmedAmount, \"DNO0Yx5YQVKUGVbMjD4EfOonpIQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useNonConfirmedAmount() {\n  _s45();\n\n  var _order$coupon;\n\n  const order = useOrder();\n  return order.payable - (order.confirmedAmount || 0) - ((order === null || order === void 0 ? void 0 : (_order$coupon = order.coupon) === null || _order$coupon === void 0 ? void 0 : _order$coupon.amount) || 0);\n}\n\n_s45(useNonConfirmedAmount, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useOrderItems() {\n  _s46();\n\n  const order = useOrder();\n  return _.flatten([...(order.groups.pending || []), ...(order.groups.shipped || []).map(group => group.items)]);\n}\n\n_s46(useOrderItems, \"CjF+zHroG2NMbuM8MfJvKNUzQAQ=\", false, function () {\n  return [useOrder];\n});\n\nexport function useOrderItemIds() {\n  _s47();\n\n  const items = useOrderItems();\n  return items.map(x => x._id);\n}\n\n_s47(useOrderItemIds, \"1Ytx+gQmvLs1bojpIc+kcHP2wQs=\", false, function () {\n  return [useOrderItems];\n});","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/contexts/orderContext.js"],"names":["createContext","useContext","useShop","_","OrderContext","order","ids","setIds","refresh","useOrder","useRefresh","useGetIds","useSetIds","useContent","content","useVariant","get","useMedia","variant","skuImages","skuVideos","variantImages","variantVideos","images","map","x","url","videos","useVariations","quantity","Object","entries","details","key","value","useCustomizationMessage","useProductName","isOnlyPending","groups","shipped","confirmed","length","usePendingPricing","coupon","couponDiscount","amount","charges","shipping","customization","pg","tax","pricing","name","split","push","discountedAmount","code","Math","abs","total","payable","taxes","useSettlement","shop","pGCharges","country","toFixed","settlement","commission","windoCommission","paymentGateway","useToAddress","to","useToContactDetails","toContactDetails","usePaymentMode","paymentMode","customPaymentMode","useButton","useEnableCustomization","useEnableTracking","useEnableConfirm","useEnableAccept","useEnablePendingCustomization","useEnableAddress","useEnableBankDetails","useEnableCancel","useEnableReadyToShip","useEnableDelivered","useOrderStatus","status","useEnableMarkAsPaid","useIsCod","isCod","useIsCustomPayment","isCustomPayment","useEnableDownloadLabel","useDirectPayment","useSellerShips","sellerShips","usePendingOrders","pending","useConfirmedOrders","useTransformedShippedOrders","other","items","newItems","y","i","buttons","shippingCharges","walletTransactions","groupId","_id","dimensions","weight","statusHistory","isLast","allItemIds","useShippedOrders","usePaymentStatus","balance","codBalance","customPaymentBalance","enableMark","usePaymentCustomDetails","payments","customPaymentDetails","isOrderCustomerPickUp","isDigitalOrder","useBalanceAmount","useConfirmedAmount","confirmedAmount","useNonConfirmedAmount","useOrderItems","flatten","group","useOrderItemIds"],"mappings":"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","sourcesContent":["import { createContext, useContext } from 'react';\nimport { useShop } from 'contexts/userContext';\nimport _ from 'lodash';\n\nexport const OrderContext = createContext({\n  order: null,\n  ids: [],\n  setIds: () => {\n  },\n  refresh: () => {\n  }\n});\n\nexport function useOrder() {\n  return useContext(OrderContext).order;\n}\n\nexport function useRefresh() {\n  return useContext(OrderContext).refresh;\n}\n\nexport function useGetIds() {\n  return useContext(OrderContext).ids;\n}\n\nexport function useSetIds() {\n  return useContext(OrderContext).setIds;\n}\n\nexport function useContent() {\n  const order = useOrder();\n  return order?.content;\n}\n\nexport function useVariant() {\n  const content = useContent();\n  return _.get(content, 'variants[0]', null);\n}\n\nexport function useMedia() {\n  const content = useContent();\n  const variant = useVariant();\n  const skuImages = _.get(content, 'images', []);\n  const skuVideos = _.get(content, 'videos', []);\n  const variantImages = _.get(variant, 'images', []);\n  const variantVideos = _.get(variant, 'videos', []);\n\n  return {\n    images: [...skuImages, ...variantImages].map(x => x.url),\n    videos: [...skuVideos, ...variantVideos].map(x => x.url)\n  };\n}\n\nexport function useVariations() {\n  const order = useOrder();\n  const variant = useVariant();\n  const quantity = _.get(order, 'quantity', 1);\n  return Object.entries({\n    ...(variant?.details || {}),\n    ...{\n      quantity,\n    }\n  })\n    .map(([key, value]) => ({\n      key,\n      value,\n    }));\n}\n\nexport function useCustomizationMessage() {\n  const order = useOrder();\n  return _.get(order, 'note', '');\n}\n\nexport function useProductName() {\n  const content = useContent();\n  return _.get(content, 'title', _.get(content, 'name', ''));\n}\n\nexport function isOnlyPending() {\n  const order = useOrder();\n  const {\n    groups: {\n      shipped = [],\n      confirmed = []\n    }\n  } = order;\n  return shipped.length === 0 && confirmed.length === 0;\n}\n\nexport function usePendingPricing() {\n  const order = useOrder();\n  // const { shippingCharges } = useContent();\n\n  const { coupon } = order;\n\n  const couponDiscount = coupon?.amount ?? 0;\n\n  const {\n    charges: {\n      shipping = 0,\n      customization = 0,\n      pg = 0,\n    } = {},\n    tax: {\n      amount = 0,\n      value = {},\n    }\n  } = order;\n\n  const pricing = [\n    {\n      name: 'Total Product Price',\n      value: order.amount - amount,\n      split: 1\n    }\n  ];\n\n  if (amount > 0) {\n    pricing.push({\n      name: 'Tax',\n      value: amount,\n      split: 1\n    });\n  }\n  if (shipping > 0) {\n    pricing.push({\n      name: 'Shipping Charges',\n      value: shipping,\n      split: 1\n    });\n  }\n\n  if (customization > 0) {\n    pricing.push({\n      name: 'Customization Fee',\n      value: customization,\n      split: 1\n    });\n  }\n\n  pricing.push({\n    name: 'Total Product Discount',\n    value: order.amount - order.discountedAmount,\n    split: 2\n  });\n\n  if (couponDiscount > 0) {\n    pricing.push({\n      name: `Coupon Discount  [ ${coupon.code} ]`,\n      value: couponDiscount,\n      split: 2\n    });\n  }\n\n  if (pg < 0) {\n    pricing.push({\n      name: 'Payment Gateway Fee Discount',\n      value: Math.abs(pg),\n      split: 2\n    });\n  } else if (pg > 0) {\n    pricing.push({\n      name: 'Payment Gateway Fee',\n      value: Math.abs(pg),\n      split: 1\n    });\n  }\n\n  const total = order.payable - couponDiscount;\n\n  return {\n    pricing,\n    total,\n    taxes: value,\n  };\n}\n\nexport function useSettlement() {\n  const order = useOrder();\n  const shop = useShop();\n  const { coupon } = order;\n\n  const couponDiscount = coupon?.amount ?? 0;\n\n  const total = order.payable - couponDiscount;\n\n  const pGCharges = (shop?.country === 'india' ? total * 0.02 : 2.93).toFixed(2);\n\n  const settlement = [\n    {\n      name: 'Total Paid By Customer',\n      value: total.toFixed(2),\n      split: 1\n    },\n  ];\n\n  const commission = order?.charges?.windoCommission || 0;\n  const paymentGateway = order?.charges?.paymentGateway || 0;\n  if (paymentGateway === 0) {\n    settlement.push(\n      {\n        name: 'Payment Gateway Charge Waiver',\n        value: pGCharges,\n        split: 1\n      },\n      {\n        name: 'Payment Gateway Charges',\n        value: pGCharges,\n        split: 2\n      }\n    );\n  } else {\n    settlement.push(\n      {\n        name: 'Payment Gateway Charges',\n        value: paymentGateway.toFixed(2),\n        split: 2\n      }\n    );\n  }\n\n  if (commission > 0) {\n    settlement.push(\n      {\n        name: 'Transaction Charges',\n        value: commission.toFixed(2),\n        split: 2\n      },\n    );\n  }\n\n  settlement.push({\n    name: 'Settlement Amount',\n    value: (total - paymentGateway - commission).toFixed(2),\n    split: 3\n  });\n\n  return {\n    settlement,\n  };\n}\n\nexport function useToAddress() {\n  const { shipping: { to = {} } = {} } = useOrder();\n  return to;\n}\n\nexport function useToContactDetails() {\n  const { shipping: { toContactDetails = {} } = {} } = useOrder();\n  return toContactDetails;\n}\n\nexport function usePaymentMode() {\n  const order = useOrder();\n  switch (order?.paymentMode) {\n    case 'online':\n      return 'Online';\n    case 'cod':\n      return 'Cash';\n    case 'custompayment':\n      return order?.customPaymentMode ?? 'Custom Payment';\n    default:\n      return 'Pending';\n  }\n}\n\nexport function useButton(name) {\n  const order = useOrder();\n  return _.get(order, `buttons.${name}`, false);\n}\n\nexport function useEnableCustomization() {\n  return useButton('enableCustomization');\n}\n\nexport function useEnableTracking() {\n  return useButton('enableTracking');\n}\n\nexport function useEnableConfirm() {\n  return useButton('enableConfirm');\n}\n\nexport function useEnableAccept() {\n  return useButton('enableAccept');\n}\n\nexport function useEnablePendingCustomization() {\n  return useButton('enablePendingCustomization');\n}\n\nexport function useEnableAddress() {\n  return useButton('enableAddress ');\n}\n\nexport function useEnableBankDetails() {\n  return useButton('enableBankDetails');\n}\n\nexport function useEnableCancel() {\n  return useButton('enableCancel');\n}\n\nexport function useEnableReadyToShip() {\n  return useButton('enableReadyToShip');\n}\n\nexport function useEnableDelivered() {\n  return useButton('enableDelivered');\n}\n\nexport function useOrderStatus() {\n  return useOrder().status;\n}\n\nexport function useEnableMarkAsPaid() {\n  return useButton('enableMarkAsPaid') && useOrderStatus() !== 'cancelled';\n}\n\nexport function useIsCod() {\n  return !!useOrder()?.isCod;\n}\n\nexport function useIsCustomPayment() {\n  return !!useOrder()?.isCustomPayment;\n}\n\nexport function useEnableDownloadLabel() {\n  return useButton('enableDownloadLabel');\n}\n\nexport function useDirectPayment() {\n  return useButton('directPayment');\n}\n\nexport function useSellerShips() {\n  const order = useOrder();\n  return !!order?.sellerShips;\n}\n\nexport function usePendingOrders() {\n  const order = useOrder();\n  const { groups: { pending = [] } } = order;\n  return pending;\n}\n\nexport function useConfirmedOrders() {\n  const order = useOrder();\n  const { groups: { confirmed = [] } } = order;\n  return confirmed;\n}\n\nexport function useTransformedShippedOrders() {\n  const order = useOrder();\n  const { groups: { shipped = [] } } = order;\n  const other = shipped.map(x => {\n    const { items = [] } = x;\n    const newItems = items.map((y, i) => {\n      y.buttons = x.buttons;\n      y.sellerShips = x.sellerShips;\n      y.shippingCharges = x.shippingCharges;\n      y.walletTransactions = x.walletTransactions;\n      y.groupId = x._id;\n      y.dimensions = x.dimensions;\n      y.weight = x.weight;\n      y.status = x.status;\n      y.details = x.details;\n      y.statusHistory = x.statusHistory;\n      y.isLast = i === items.length - 1;\n      y.allItemIds = items.map(x => x._id);\n      return y;\n    });\n    x.items = newItems;\n    return x;\n  });\n  return other;\n}\n\nexport function useShippedOrders() {\n  const order = useOrder();\n  const { groups: { shipped = [] } } = order;\n  return shipped;\n}\n\nexport function usePaymentStatus() {\n  const {\n    balance,\n    codBalance,\n    customPaymentBalance,\n  } = useOrder();\n  const isCod = useIsCod();\n  const isCustomPayment = useIsCustomPayment();\n  const enableMark = useEnableMarkAsPaid();\n  if (isCod) {\n    if (codBalance > 0) {\n      return 'pending';\n    }\n    if (enableMark) {\n      return 'pending';\n    }\n    return 'paid';\n  }\n\n  if (isCustomPayment) {\n    if (customPaymentBalance > 0) {\n      return 'pending';\n    }\n    if (enableMark) {\n      return 'pending';\n    }\n    return 'paid';\n  }\n\n  if (balance > 1) {\n    return 'pending';\n  }\n  return 'paid';\n}\n\nexport function usePaymentCustomDetails() {\n  const {\n    payments: { customPaymentDetails }\n  } = useOrder();\n  return customPaymentDetails;\n}\n\nexport function isOrderCustomerPickUp() {\n  const order = useOrder();\n  return _.get(order, 'shipping.mode', '') === 'customerpickup';\n}\n\nexport function isDigitalOrder() {\n  const order = useOrder();\n  return _.get(order, 'shipping.mode', '') === 'digital';\n}\n\nexport function useBalanceAmount() {\n  const order = useOrder();\n  return order.balance || 0;\n}\n\nexport function useConfirmedAmount() {\n  return useOrder().confirmedAmount || 0;\n}\n\nexport function useNonConfirmedAmount() {\n  const order = useOrder();\n  return order.payable - (order.confirmedAmount || 0) - (order?.coupon?.amount || 0);\n}\n\nexport function useOrderItems() {\n  const order = useOrder();\n  return _.flatten([\n    ...(order.groups.pending || []),\n    ...(order.groups.shipped || []).map(group => group.items)\n  ]);\n}\n\nexport function useOrderItemIds() {\n  const items = useOrderItems();\n  return items.map(x => x._id);\n}\n"]},"metadata":{},"sourceType":"module"}