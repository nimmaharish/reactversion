{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/profile/delivery/DistanceDelivery.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useField } from 'formik';\nimport editIcon from \"../../../assets/overview/editIcon.svg\";\nimport PropTypes from 'prop-types'; // import { useToggle } from 'hooks/common';\n// import { DistanceForm } from './DistanceForm';\n\nimport { SideDrawer } from \"../../shared/SideDrawer\";\nimport { Becca } from \"../../../api\";\nimport { Button } from 'phoenix-components';\nimport _ from 'lodash';\nimport cx from 'classnames';\nimport { useDesktop } from \"../../../contexts\";\nimport { Drawer } from \"../../shared/Drawer\";\nimport Loader from \"../../../services/loader\";\nimport SnackBar from \"../../../services/snackbar\";\nimport { useToggle } from \"../../../hooks/common\"; // import { DebugValues } from 'components/formik';\n// import { useChargeConfig } from 'hooks/areasServed';\n\nimport pandaIcon from \"../../../assets/images/areasServed/panda.svg\";\nimport { useHistory } from 'react-router-dom';\nimport { useIsConditionalChargesEnabled } from \"../../../contexts/userContext\";\nimport { useQueryParams } from \"../../../hooks\";\nimport { DeliveryByZone } from \"./DeliveryByZone\";\nimport styles from \"./DistanceDelivery.module.css\";\nimport { DeliveryType } from \"./utils\";\nexport function DistanceDelivery({\n  onRefresh\n}) {\n  _s();\n\n  var _zones$data;\n\n  const isDesktop = useDesktop();\n  const history = useHistory();\n  const [idx, setIdx] = useState(null);\n  const [{\n    value: config\n  }] = useField('config');\n  const [createMoreZones, toggleMoreZones] = useToggle(false);\n  const [viewConfig, toggleConfig] = useToggle(true);\n  const [{\n    value: type\n  }] = useField('chargeType');\n  const params = useQueryParams();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled(); // const [index, setIndex] = useState(null);\n\n  const [zones, setZones] = useState({});\n\n  const getAllZones = async () => {\n    try {\n      Loader.show();\n      const data = await Becca.getAllZones();\n      setZones(data);\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    getAllZones();\n  }, []);\n\n  if (type !== DeliveryType.AREA) {\n    return null;\n  }\n\n  if (viewConfig) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.view,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: \"View Config\",\n      primary: false,\n      size: \"medium\",\n      onClick: () => {\n        if (!isConditionalChargesEnabled) {\n          params.set('openPlans', 'generic');\n          history.push({\n            search: params.toString()\n          });\n        } else {\n          toggleConfig();\n        }\n      },\n      style: styles.button,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.spacer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      label: \"Add Charges\",\n      primary: true,\n      size: \"medium\",\n      onClick: () => {\n        if (!isConditionalChargesEnabled) {\n          params.set('openPlans', 'generic');\n          history.push({\n            search: params.toString()\n          });\n        } else {\n          toggleConfig();\n          toggleMoreZones();\n        }\n      },\n      style: styles.button,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (createMoreZones) {\n    return /*#__PURE__*/React.createElement(DeliveryByZone, {\n      zones: zones,\n      idx: idx,\n      config: config,\n      onClose: toggleMoreZones,\n      setIdx: setIdx,\n      onRefresh: onRefresh,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    });\n  }\n\n  const Component = isDesktop ? SideDrawer : Drawer;\n  const props = !isDesktop ? {\n    title: 'Delivery Charge by Zone',\n    onClose: toggleConfig\n  } : {\n    className: styles.desktopContainer,\n    backButton: true,\n    title: 'Delivery Charge by Zone',\n    onClose: toggleConfig\n  };\n  const zonesWithChargeArray = config === null || config === void 0 ? void 0 : config.reduce((acc, obj) => [...acc, obj.value], []);\n  const marshalConfig = zones === null || zones === void 0 ? void 0 : (_zones$data = zones.data) === null || _zones$data === void 0 ? void 0 : _zones$data.map(obj => {\n    var _obj$region;\n\n    // eslint-disable-next-line no-prototype-builtins\n    if (((_obj$region = obj.region) === null || _obj$region === void 0 ? void 0 : _obj$region.length) > 0) {\n      const newObj = { ...obj\n      };\n      newObj.region = obj.region.filter(region => zonesWithChargeArray.includes(region._id));\n      return newObj;\n    }\n\n    if (zonesWithChargeArray.includes(obj._id)) {\n      return obj;\n    }\n\n    return null;\n  }).filter(a => a);\n\n  const getCharges = (idx, key) => {\n    var _config$find, _config$find$config;\n\n    return config === null || config === void 0 ? void 0 : (_config$find = config.find(obj => obj.value === idx)) === null || _config$find === void 0 ? void 0 : (_config$find$config = _config$find.config) === null || _config$find$config === void 0 ? void 0 : _config$find$config[key];\n  };\n\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    React.createElement(Component, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, marshalConfig === null || marshalConfig === void 0 ? void 0 : marshalConfig.map(zone => {\n      var _zone$region, _zone$region2;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.card,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.green),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }\n      }, _.capitalize(zone === null || zone === void 0 ? void 0 : zone.name)), (zone === null || zone === void 0 ? void 0 : (_zone$region = zone.region) === null || _zone$region === void 0 ? void 0 : _zone$region.length) > 0 ? zone === null || zone === void 0 ? void 0 : (_zone$region2 = zone.region) === null || _zone$region2 === void 0 ? void 0 : _zone$region2.map(s => /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.cards,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.paddingTop, styles.f12),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 19\n        }\n      }, s.name, /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => {\n          setIdx(s._id);\n          toggleMoreZones();\n        },\n        src: editIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.border, styles.f12),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.grid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      }, \"Min order value\", /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.spacer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.f14,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 23\n        }\n      }, getCharges(s._id, 'min'))), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.grid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, \"Max order value\", /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.spacer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.f14,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 23\n        }\n      }, getCharges(s._id, 'max')))), /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.f14, styles.paddingTop),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 19\n        }\n      }, \"Delivery Charge\", /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }\n      }, getCharges(s._id, 'value'))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexEnd, styles.paddingTop, styles.f12),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => {\n          setIdx(zone._id);\n          toggleMoreZones();\n        },\n        src: editIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.border, styles.f12),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.grid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }\n      }, \"Min order value\", /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.spacer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.f14,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, getCharges(zone._id, 'min'))), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.grid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 19\n        }\n      }, \"Max order value\", /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.spacer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.f14,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }\n      }, getCharges(zone._id, 'max')))), /*#__PURE__*/React.createElement(\"div\", {\n        className: cx(styles.flexbetween, styles.f14, styles.paddingTop),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 17\n        }\n      }, \"Delivery Charge\", /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 19\n        }\n      }, getCharges(zone._id, 'value')))));\n    }), (zones === null || zones === void 0 ? void 0 : zones.length) === 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: pandaIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, \"No active zones in the areas you serve\")), (marshalConfig === null || marshalConfig === void 0 ? void 0 : marshalConfig.length) === 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: pandaIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    })), ' ', /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, \"No active charges for the active zones in the areas you serve\")), /*#__PURE__*/React.createElement(Button, {\n      label: (zones === null || zones === void 0 ? void 0 : zones.length) === 0 ? 'Add Zones' : (marshalConfig === null || marshalConfig === void 0 ? void 0 : marshalConfig.length) === 0 ? 'Add Charges' : 'Add More Charges',\n      fullwidth: true,\n      className: styles.saveButton,\n      variant: \"primary\",\n      onClick: () => (zones === null || zones === void 0 ? void 0 : zones.length) === 0 ? history.push('/manage/areasServed') : toggleMoreZones(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }\n    })))\n  );\n}\n\n_s(DistanceDelivery, \"htDKZBRJ+nV4tElq4QkNkyTwZIE=\", false, function () {\n  return [useDesktop, useHistory, useField, useToggle, useToggle, useField, useQueryParams, useIsConditionalChargesEnabled];\n});\n\n_c = DistanceDelivery;\nDistanceDelivery.propTypes = {\n  onRefresh: PropTypes.func.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"DistanceDelivery\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/profile/delivery/DistanceDelivery.jsx"],"names":["React","useState","useEffect","useField","PropTypes","SideDrawer","Becca","Button","_","cx","useDesktop","Drawer","Loader","SnackBar","useToggle","useHistory","useIsConditionalChargesEnabled","useQueryParams","DeliveryByZone","styles","DeliveryType","DistanceDelivery","onRefresh","isDesktop","history","idx","setIdx","value","config","createMoreZones","toggleMoreZones","viewConfig","toggleConfig","type","params","isConditionalChargesEnabled","zones","setZones","getAllZones","show","data","e","showError","hide","AREA","view","set","push","search","toString","button","spacer","Component","props","title","onClose","className","desktopContainer","backButton","zonesWithChargeArray","reduce","acc","obj","marshalConfig","map","region","length","newObj","filter","includes","_id","a","getCharges","key","find","container","zone","card","flexbetween","green","capitalize","name","s","cards","paddingTop","f12","editIcon","border","grid","f14","flexEnd","noData","pandaIcon","text","saveButton","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useField } from 'formik';\nimport editIcon from 'assets/overview/editIcon.svg';\nimport PropTypes from 'prop-types';\n// import { useToggle } from 'hooks/common';\n// import { DistanceForm } from './DistanceForm';\nimport { SideDrawer } from 'components/shared/SideDrawer';\nimport { Becca } from 'api';\nimport { Button } from 'phoenix-components';\nimport _ from 'lodash';\nimport cx from 'classnames';\nimport { useDesktop } from 'contexts';\nimport { Drawer } from 'components/shared/Drawer';\nimport Loader from 'services/loader';\nimport SnackBar from 'services/snackbar';\nimport { useToggle } from 'hooks/common';\n// import { DebugValues } from 'components/formik';\n// import { useChargeConfig } from 'hooks/areasServed';\nimport pandaIcon from 'assets/images/areasServed/panda.svg';\nimport { useHistory } from 'react-router-dom';\nimport {\n  useIsConditionalChargesEnabled\n} from 'contexts/userContext';\nimport { useQueryParams } from 'hooks';\nimport { DeliveryByZone } from './DeliveryByZone';\nimport styles from './DistanceDelivery.module.css';\nimport { DeliveryType } from './utils';\n\nexport function DistanceDelivery({ onRefresh }) {\n  const isDesktop = useDesktop();\n  const history = useHistory();\n  const [idx, setIdx] = useState(null);\n  const [{ value: config }] = useField('config');\n  const [createMoreZones, toggleMoreZones] = useToggle(false);\n  const [viewConfig, toggleConfig] = useToggle(true);\n  const [{ value: type }] = useField('chargeType');\n  const params = useQueryParams();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled();\n\n  // const [index, setIndex] = useState(null);\n  const [zones, setZones] = useState({});\n\n  const getAllZones = async () => {\n    try {\n      Loader.show();\n      const data = await Becca.getAllZones();\n      setZones(data);\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    getAllZones();\n  }, []);\n\n  if (type !== DeliveryType.AREA) {\n    return null;\n  }\n\n  if (viewConfig) {\n    return (\n      <div className={styles.view}>\n        <Button\n          label=\"View Config\"\n          primary={false}\n          size=\"medium\"\n          onClick={() => {\n            if (!isConditionalChargesEnabled) {\n              params.set('openPlans', 'generic');\n              history.push({\n                search: params.toString(),\n              });\n            } else {\n              toggleConfig();\n            }\n          }}\n          style={styles.button}\n        />\n        <div className={styles.spacer} />\n        <Button\n          label=\"Add Charges\"\n          primary={true}\n          size=\"medium\"\n          onClick={() => {\n            if (!isConditionalChargesEnabled) {\n              params.set('openPlans', 'generic');\n              history.push({\n                search: params.toString(),\n              });\n            } else { toggleConfig(); toggleMoreZones(); }\n          }}\n          style={styles.button}\n        />\n      </div>\n    );\n  }\n\n  if (createMoreZones) {\n    return (\n      <DeliveryByZone\n        zones={zones}\n        idx={idx}\n        config={config}\n        onClose={toggleMoreZones}\n        setIdx={setIdx}\n        onRefresh={onRefresh} />\n    );\n  }\n\n  const Component = isDesktop ? SideDrawer : Drawer;\n  const props = !isDesktop ? {\n    title: 'Delivery Charge by Zone',\n    onClose: toggleConfig,\n\n  } : {\n    className: styles.desktopContainer,\n    backButton: true,\n    title: 'Delivery Charge by Zone',\n    onClose: toggleConfig,\n  };\n\n  const zonesWithChargeArray = config?.reduce((acc, obj) => [...acc, obj.value], []);\n\n  const marshalConfig = zones?.data?.map(obj => {\n    // eslint-disable-next-line no-prototype-builtins\n    if (obj.region?.length > 0) {\n      const newObj = { ...obj };\n      newObj.region = obj.region.filter(region => zonesWithChargeArray.includes(region._id));\n      return newObj;\n    }\n    if (zonesWithChargeArray.includes(obj._id)) {\n      return obj;\n    }\n    return null;\n  }).filter(a => a);\n\n  const getCharges = (idx, key) => config?.find(obj => obj.value === idx)?.config?.[key];\n\n  return (\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    <Component {...props}>\n      <div className={styles.container}>\n        {marshalConfig?.map(zone => (\n          <div className={styles.card}>\n            <div className={cx(styles.flexbetween, styles.green)}>\n              {_.capitalize(zone?.name)}\n              {/* <Switch active={zone?.enabled} onChange={onUnlive(id)} /> */}\n            </div>\n            {zone?.region?.length > 0 ? (\n              zone?.region?.map(s => (\n                <div className={styles.cards}>\n                  <div className={cx(styles.flexbetween, styles.paddingTop, styles.f12)}>\n                    {s.name}\n                    <img onClick={() => { setIdx(s._id); toggleMoreZones(); }} src={editIcon} alt=\"\" />\n                  </div>\n                  <div className={cx(styles.flexbetween, styles.border, styles.f12)}>\n                    <div className={styles.grid}>\n                      Min order value\n                      <div className={styles.spacer} />\n                      <div className={styles.f14}>{getCharges(s._id, 'min')}</div>\n                    </div>\n                    <div className={styles.grid}>\n                      Max order value\n                      <div className={styles.spacer} />\n                      <div className={styles.f14}>{getCharges(s._id, 'max')}</div>\n                    </div>\n                  </div>\n                  <div className={cx(styles.flexbetween, styles.f14, styles.paddingTop)}>\n                    Delivery Charge\n                    <div>{getCharges(s._id, 'value')}</div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <>\n                <div className={cx(styles.flexEnd, styles.paddingTop, styles.f12)}>\n                  <img onClick={() => { setIdx(zone._id); toggleMoreZones(); }} src={editIcon} alt=\"\" />\n                </div>\n                <div className={cx(styles.flexbetween, styles.border, styles.f12)}>\n                  <div className={styles.grid}>\n                    Min order value\n                    <div className={styles.spacer} />\n                    <div className={styles.f14}>{getCharges(zone._id, 'min')}</div>\n                  </div>\n                  <div className={styles.grid}>\n                    Max order value\n                    <div className={styles.spacer} />\n                    <div className={styles.f14}>{getCharges(zone._id, 'max')}</div>\n                  </div>\n                </div>\n                <div className={cx(styles.flexbetween, styles.f14, styles.paddingTop)}>\n                  Delivery Charge\n                  <div>{getCharges(zone._id, 'value')}</div>\n                </div>\n              </>\n            )}\n          </div>\n        ))}\n        {zones?.length === 0 && (\n          <>\n            <div className={styles.noData}>\n              <img src={pandaIcon} alt=\"\" />\n            </div>\n            <div className={styles.text}>\n              No active zones in the areas you serve\n            </div>\n          </>\n        )}\n        {marshalConfig?.length === 0 && (\n          <>\n            <div className={styles.noData}>\n              <img src={pandaIcon} alt=\"\" />\n            </div>\n            {' '}\n            <div className={styles.text}>\n              No active charges for the active zones in the areas you serve\n            </div>\n          </>\n        )}\n        <Button\n          label={zones?.length === 0 ? 'Add Zones'\n            : (marshalConfig?.length === 0 ? 'Add Charges' : 'Add More Charges')}\n          fullwidth={true}\n          className={styles.saveButton}\n          variant=\"primary\"\n          onClick={() => (zones?.length === 0 ? (history.push('/manage/areasServed')) : toggleMoreZones())} />\n      </div>\n    </Component>\n  );\n}\n\nDistanceDelivery.propTypes = {\n  onRefresh: PropTypes.func.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}