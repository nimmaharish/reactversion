{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/BottomBar.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { Drawer, Dialog } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport locationIcon from \"../../assets/images/orders/details/route.svg\";\nimport { TrackingPopOver } from \"./TrackingPopOver\";\nimport { Button } from 'phoenix-components';\nimport Loader from \"../../services/loader\";\nimport { Factory } from \"../../api\";\nimport { useOrder, useRefresh, useOrderStatus } from \"../../contexts/orderContext\";\nimport SnackBar from \"../../services/snackbar\";\nimport { useDesktop } from \"../../contexts\";\nimport { CenterButton } from \"./CenterButton\";\nimport styles from \"./BottomBar.module.css\";\nexport function BottomBar({\n  order,\n  groupId\n}) {\n  _s();\n\n  const enableTracking = _.get(order, 'buttons.enableTracking', false);\n\n  const enableDownloadLabel = _.get(order, 'buttons.enableDownloadLabel', false);\n\n  const enablePickedUp = _.get(order, 'buttons.enableReadyToPickUp', false);\n\n  const enableOutForDelivery = _.get(order, 'buttons.enableOutForDelivery', false);\n\n  const isCancelledOrder = useOrderStatus() === 'cancelled';\n  const [popOverEL, setPopOverEl] = useState(null);\n  const [, setTagEl] = useState(null);\n  const refresh = useRefresh();\n  const rootOrder = useOrder();\n  const isDesktop = useDesktop();\n\n  const openPopOver = e => {\n    setPopOverEl(e.currentTarget);\n  };\n\n  const closePopOver = () => {\n    setPopOverEl(null);\n    setTagEl(null);\n  };\n\n  const pickedupOrder = async () => {\n    try {\n      Loader.show();\n      await Factory.picked(rootOrder._id, order.groupId);\n      await refresh();\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const outForDelivery = async () => {\n    try {\n      Loader.show();\n      await Factory.outForDelivery(rootOrder._id, order.groupId);\n      await refresh();\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  if (!enableDownloadLabel && !enableTracking && !enablePickedUp && !enableOutForDelivery && !isCancelledOrder) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isDesktop && /*#__PURE__*/React.createElement(Drawer, {\n    anchor: \"bottom\",\n    open: !!popOverEL,\n    onClose: closePopOver,\n    PaperProps: {\n      classes: {\n        root: styles.paper\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, !!popOverEL && /*#__PURE__*/React.createElement(TrackingPopOver, {\n    order: order,\n    groupId: groupId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 28\n    }\n  })), isDesktop && /*#__PURE__*/React.createElement(Dialog, {\n    maxWidth: \"xs\",\n    open: !!popOverEL,\n    onClose: closePopOver,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, !!popOverEL && /*#__PURE__*/React.createElement(TrackingPopOver, {\n    order: order,\n    groupId: groupId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 28\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, enableTracking && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: openPopOver,\n    className: styles.iconContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: locationIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"Track Order\")), enableDownloadLabel && /*#__PURE__*/React.createElement(CenterButton, {\n    order: order,\n    groupId: groupId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }), enableOutForDelivery && !isCancelledOrder && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.btn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"Out For Delivery\",\n    onClick: outForDelivery,\n    size: \"medium\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  })), enablePickedUp && !isCancelledOrder && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.btn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"Picked Up\",\n    onClick: pickedupOrder,\n    size: \"medium\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  })))));\n}\n\n_s(BottomBar, \"EeBQtvdOSCeRcLxsHY/kkBTp5Lw=\", false, function () {\n  return [useOrderStatus, useRefresh, useOrder, useDesktop];\n});\n\n_c = BottomBar;\nBottomBar.propTypes = {\n  order: PropTypes.any.isRequired,\n  groupId: PropTypes.string\n};\nBottomBar.defaultProps = {\n  groupId: ''\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"BottomBar\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/BottomBar.jsx"],"names":["React","useState","Drawer","Dialog","PropTypes","_","TrackingPopOver","Button","Loader","Factory","useOrder","useRefresh","useOrderStatus","SnackBar","useDesktop","CenterButton","styles","BottomBar","order","groupId","enableTracking","get","enableDownloadLabel","enablePickedUp","enableOutForDelivery","isCancelledOrder","popOverEL","setPopOverEl","setTagEl","refresh","rootOrder","isDesktop","openPopOver","e","currentTarget","closePopOver","pickedupOrder","show","picked","_id","console","error","hide","outForDelivery","classes","root","paper","container","flexContainer","iconContainer","locationIcon","iconLabel","btn","propTypes","any","isRequired","string","defaultProps"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { Drawer, Dialog } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport locationIcon from 'assets/images/orders/details/route.svg';\nimport { TrackingPopOver } from 'components/orders/TrackingPopOver';\nimport { Button } from 'phoenix-components';\nimport Loader from 'services/loader';\nimport { Factory } from 'api';\nimport {\n  useOrder, useRefresh, useOrderStatus\n} from 'contexts/orderContext';\nimport SnackBar from 'services/snackbar';\nimport { useDesktop } from 'contexts';\nimport { CenterButton } from './CenterButton';\nimport styles from './BottomBar.module.css';\n\nexport function BottomBar({ order, groupId }) {\n  const enableTracking = _.get(order, 'buttons.enableTracking', false);\n  const enableDownloadLabel = _.get(order, 'buttons.enableDownloadLabel', false);\n\n  const enablePickedUp = _.get(order, 'buttons.enableReadyToPickUp', false);\n  const enableOutForDelivery = _.get(order, 'buttons.enableOutForDelivery', false);\n\n  const isCancelledOrder = useOrderStatus() === 'cancelled';\n\n  const [popOverEL, setPopOverEl] = useState(null);\n  const [, setTagEl] = useState(null);\n\n  const refresh = useRefresh();\n  const rootOrder = useOrder();\n  const isDesktop = useDesktop();\n\n  const openPopOver = (e) => {\n    setPopOverEl(e.currentTarget);\n  };\n\n  const closePopOver = () => {\n    setPopOverEl(null);\n    setTagEl(null);\n  };\n  const pickedupOrder = async () => {\n    try {\n      Loader.show();\n      await Factory.picked(rootOrder._id, order.groupId);\n      await refresh();\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const outForDelivery = async () => {\n    try {\n      Loader.show();\n      await Factory.outForDelivery(rootOrder._id, order.groupId);\n      await refresh();\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  if (!enableDownloadLabel && !enableTracking && !enablePickedUp && !enableOutForDelivery && !isCancelledOrder) {\n    return null;\n  }\n\n  return (\n    <>\n      {!isDesktop && (\n        <Drawer\n          anchor=\"bottom\"\n          open={!!popOverEL}\n          onClose={closePopOver}\n          PaperProps={{\n            classes: {\n              root: styles.paper,\n            }\n          }}\n        >\n          {!!popOverEL && (<TrackingPopOver order={order} groupId={groupId} />)}\n        </Drawer>\n      )}\n      {isDesktop && (\n        <Dialog\n          maxWidth=\"xs\"\n          open={!!popOverEL}\n          onClose={closePopOver}\n        >\n          {!!popOverEL && (<TrackingPopOver order={order} groupId={groupId} />)}\n        </Dialog>\n      )}\n      <div className={styles.container}>\n        <div className={styles.flexContainer}>\n          {enableTracking && (\n            <div onClick={openPopOver} className={styles.iconContainer}>\n              <img src={locationIcon} alt=\"\" />\n              <div className={styles.iconLabel}>Track Order</div>\n            </div>\n          )}\n          {(enableDownloadLabel) && <CenterButton order={order} groupId={groupId} />}\n          {(enableOutForDelivery && !isCancelledOrder) && (\n            <div className={styles.btn}>\n              <Button\n                label=\"Out For Delivery\"\n                onClick={outForDelivery}\n                size=\"medium\"\n                fullWidth={true}\n              />\n            </div>\n          )}\n          {(enablePickedUp && !isCancelledOrder) && (\n            <div className={styles.btn}>\n              <Button\n                label=\"Picked Up\"\n                onClick={pickedupOrder}\n                size=\"medium\"\n                fullWidth={true}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\nBottomBar.propTypes = {\n  order: PropTypes.any.isRequired,\n  groupId: PropTypes.string,\n};\n\nBottomBar.defaultProps = {\n  groupId: '',\n};\n"]},"metadata":{},"sourceType":"module"}