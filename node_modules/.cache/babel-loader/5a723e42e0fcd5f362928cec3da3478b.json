{"ast":null,"code":"import { Promise } from './polyfills';\nvar slice = [].slice;\nvar isBrowser = typeof window !== 'undefined';\nvar PERF = isBrowser && typeof performance !== 'undefined' ? performance : {};\n\nfunction isCORSSupported() {\n  var xhr = new window.XMLHttpRequest();\n  return 'withCredentials' in xhr;\n}\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToHex(buffer) {\n  var hexOctets = [];\n\n  for (var _i = 0; _i < buffer.length; _i++) {\n    hexOctets.push(byteToHex[buffer[_i]]);\n  }\n\n  return hexOctets.join('');\n}\n\nvar destination = new Uint8Array(16);\n\nfunction rng() {\n  if (typeof crypto != 'undefined' && typeof crypto.getRandomValues == 'function') {\n    return crypto.getRandomValues(destination);\n  } else if (typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function') {\n    return msCrypto.getRandomValues(destination);\n  }\n\n  return destination;\n}\n\nfunction generateRandomId(length) {\n  var id = bytesToHex(rng());\n  return id.substr(0, length);\n}\n\nfunction getDtHeaderValue(span) {\n  var dtVersion = '00';\n  var dtUnSampledFlags = '00';\n  var dtSampledFlags = '01';\n\n  if (span && span.traceId && span.id && span.parentId) {\n    var flags = span.sampled ? dtSampledFlags : dtUnSampledFlags;\n    var id = span.sampled ? span.id : span.parentId;\n    return dtVersion + '-' + span.traceId + '-' + id + '-' + flags;\n  }\n}\n\nfunction parseDtHeaderValue(value) {\n  var parsed = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})$/.exec(value);\n\n  if (parsed) {\n    var flags = parsed[4];\n    var sampled = flags !== '00';\n    return {\n      traceId: parsed[2],\n      id: parsed[3],\n      sampled: sampled\n    };\n  }\n}\n\nfunction isDtHeaderValid(header) {\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(header) && header.slice(3, 35) !== '00000000000000000000000000000000' && header.slice(36, 52) !== '0000000000000000';\n}\n\nfunction getTSHeaderValue(_ref) {\n  var sampleRate = _ref.sampleRate;\n\n  if (typeof sampleRate !== 'number' || String(sampleRate).length > 256) {\n    return;\n  }\n\n  var NAMESPACE = 'es';\n  var SEPARATOR = '=';\n  return \"\" + NAMESPACE + SEPARATOR + \"s:\" + sampleRate;\n}\n\nfunction setRequestHeader(target, name, value) {\n  if (typeof target.setRequestHeader === 'function') {\n    target.setRequestHeader(name, value);\n  } else if (target.headers && typeof target.headers.append === 'function') {\n    target.headers.append(name, value);\n  } else {\n    target[name] = value;\n  }\n}\n\nfunction checkSameOrigin(source, target) {\n  var isSame = false;\n\n  if (typeof target === 'string') {\n    isSame = source === target;\n  } else if (target && typeof target.test === 'function') {\n    isSame = target.test(source);\n  } else if (Array.isArray(target)) {\n    target.forEach(function (t) {\n      if (!isSame) {\n        isSame = checkSameOrigin(source, t);\n      }\n    });\n  }\n\n  return isSame;\n}\n\nfunction isPlatformSupported() {\n  return isBrowser && typeof Set === 'function' && typeof JSON.stringify === 'function' && PERF && typeof PERF.now === 'function' && isCORSSupported();\n}\n\nfunction setLabel(key, value, obj) {\n  if (!obj || !key) return;\n  var skey = removeInvalidChars(key);\n  var valueType = typeof value;\n\n  if (value != undefined && valueType !== 'boolean' && valueType !== 'number') {\n    value = String(value);\n  }\n\n  obj[skey] = value;\n  return obj;\n}\n\nfunction getServerTimingInfo(serverTimingEntries) {\n  if (serverTimingEntries === void 0) {\n    serverTimingEntries = [];\n  }\n\n  var serverTimingInfo = [];\n  var entrySeparator = ', ';\n  var valueSeparator = ';';\n\n  for (var _i2 = 0; _i2 < serverTimingEntries.length; _i2++) {\n    var _serverTimingEntries$ = serverTimingEntries[_i2],\n        name = _serverTimingEntries$.name,\n        duration = _serverTimingEntries$.duration,\n        description = _serverTimingEntries$.description;\n    var timingValue = name;\n\n    if (description) {\n      timingValue += valueSeparator + 'desc=' + description;\n    }\n\n    if (duration) {\n      timingValue += valueSeparator + 'dur=' + duration;\n    }\n\n    serverTimingInfo.push(timingValue);\n  }\n\n  return serverTimingInfo.join(entrySeparator);\n}\n\nfunction getTimeOrigin() {\n  return PERF.timing.fetchStart;\n}\n\nfunction stripQueryStringFromUrl(url) {\n  return url && url.split('?')[0];\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction baseExtend(dst, objs, deep) {\n  for (var i = 0, ii = objs.length; i < ii; ++i) {\n    var obj = objs[i];\n    if (!isObject(obj) && !isFunction(obj)) continue;\n    var keys = Object.keys(obj);\n\n    for (var j = 0, jj = keys.length; j < jj; j++) {\n      var key = keys[j];\n      var src = obj[key];\n\n      if (deep && isObject(src)) {\n        if (!isObject(dst[key])) dst[key] = Array.isArray(src) ? [] : {};\n        baseExtend(dst[key], [src], false);\n      } else {\n        dst[key] = src;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction getElasticScript() {\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0, l = scripts.length; i < l; i++) {\n      var sc = scripts[i];\n\n      if (sc.src.indexOf('elastic') > 0) {\n        return sc;\n      }\n    }\n  }\n}\n\nfunction getCurrentScript() {\n  if (typeof document !== 'undefined') {\n    var currentScript = document.currentScript;\n\n    if (!currentScript) {\n      return getElasticScript();\n    }\n\n    return currentScript;\n  }\n}\n\nfunction extend(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), false);\n}\n\nfunction merge(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), true);\n}\n\nfunction isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\nfunction noop() {}\n\nfunction find(array, predicate, thisArg) {\n  if (array == null) {\n    throw new TypeError('array is null or not defined');\n  }\n\n  var o = Object(array);\n  var len = o.length >>> 0;\n\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate must be a function');\n  }\n\n  var k = 0;\n\n  while (k < len) {\n    var kValue = o[k];\n\n    if (predicate.call(thisArg, kValue, k, o)) {\n      return kValue;\n    }\n\n    k++;\n  }\n\n  return undefined;\n}\n\nfunction removeInvalidChars(key) {\n  return key.replace(/[.*\"]/g, '_');\n}\n\nfunction getLatestNonXHRSpan(spans) {\n  var latestSpan = null;\n\n  for (var _i3 = 0; _i3 < spans.length; _i3++) {\n    var span = spans[_i3];\n\n    if (String(span.type).indexOf('external') === -1 && (!latestSpan || latestSpan._end < span._end)) {\n      latestSpan = span;\n    }\n  }\n\n  return latestSpan;\n}\n\nfunction getEarliestSpan(spans) {\n  var earliestSpan = spans[0];\n\n  for (var _i4 = 1; _i4 < spans.length; _i4++) {\n    var span = spans[_i4];\n\n    if (earliestSpan._start > span._start) {\n      earliestSpan = span;\n    }\n  }\n\n  return earliestSpan;\n}\n\nfunction now() {\n  return PERF.now();\n}\n\nfunction getTime(time) {\n  return typeof time === 'number' && time >= 0 ? time : now();\n}\n\nfunction getDuration(start, end) {\n  if (isUndefined(end) || isUndefined(start)) {\n    return null;\n  }\n\n  return parseInt(end - start);\n}\n\nfunction scheduleMacroTask(callback) {\n  setTimeout(callback, 0);\n}\n\nfunction scheduleMicroTask(callback) {\n  Promise.resolve().then(callback);\n}\n\nfunction isPerfTimelineSupported() {\n  return typeof PERF.getEntriesByType === 'function';\n}\n\nfunction isPerfTypeSupported(type) {\n  return typeof PerformanceObserver !== 'undefined' && PerformanceObserver.supportedEntryTypes && PerformanceObserver.supportedEntryTypes.indexOf(type) >= 0;\n}\n\nexport { extend, merge, isUndefined, noop, baseExtend, bytesToHex, isCORSSupported, isObject, isFunction, isPlatformSupported, isDtHeaderValid, parseDtHeaderValue, getServerTimingInfo, getDtHeaderValue, getTSHeaderValue, getCurrentScript, getElasticScript, getTimeOrigin, generateRandomId, getEarliestSpan, getLatestNonXHRSpan, getDuration, getTime, now, rng, checkSameOrigin, scheduleMacroTask, scheduleMicroTask, setLabel, setRequestHeader, stripQueryStringFromUrl, find, removeInvalidChars, PERF, isPerfTimelineSupported, isBrowser, isPerfTypeSupported };","map":{"version":3,"sources":["/home/harish/windo/phoenix/node_modules/@elastic/apm-rum-core/dist/es/common/utils.js"],"names":["Promise","slice","isBrowser","window","PERF","performance","isCORSSupported","xhr","XMLHttpRequest","byteToHex","i","toString","substr","bytesToHex","buffer","hexOctets","_i","length","push","join","destination","Uint8Array","rng","crypto","getRandomValues","msCrypto","generateRandomId","id","getDtHeaderValue","span","dtVersion","dtUnSampledFlags","dtSampledFlags","traceId","parentId","flags","sampled","parseDtHeaderValue","value","parsed","exec","isDtHeaderValid","header","test","getTSHeaderValue","_ref","sampleRate","String","NAMESPACE","SEPARATOR","setRequestHeader","target","name","headers","append","checkSameOrigin","source","isSame","Array","isArray","forEach","t","isPlatformSupported","Set","JSON","stringify","now","setLabel","key","obj","skey","removeInvalidChars","valueType","undefined","getServerTimingInfo","serverTimingEntries","serverTimingInfo","entrySeparator","valueSeparator","_i2","_serverTimingEntries$","duration","description","timingValue","getTimeOrigin","timing","fetchStart","stripQueryStringFromUrl","url","split","isObject","isFunction","baseExtend","dst","objs","deep","ii","keys","Object","j","jj","src","getElasticScript","document","scripts","getElementsByTagName","l","sc","indexOf","getCurrentScript","currentScript","extend","call","arguments","merge","isUndefined","noop","find","array","predicate","thisArg","TypeError","o","len","k","kValue","replace","getLatestNonXHRSpan","spans","latestSpan","_i3","type","_end","getEarliestSpan","earliestSpan","_i4","_start","getTime","time","getDuration","start","end","parseInt","scheduleMacroTask","callback","setTimeout","scheduleMicroTask","resolve","then","isPerfTimelineSupported","getEntriesByType","isPerfTypeSupported","PerformanceObserver","supportedEntryTypes"],"mappings":"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","sourcesContent":["import { Promise } from './polyfills';\nvar slice = [].slice;\nvar isBrowser = typeof window !== 'undefined';\nvar PERF = isBrowser && typeof performance !== 'undefined' ? performance : {};\n\nfunction isCORSSupported() {\n  var xhr = new window.XMLHttpRequest();\n  return 'withCredentials' in xhr;\n}\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToHex(buffer) {\n  var hexOctets = [];\n\n  for (var _i = 0; _i < buffer.length; _i++) {\n    hexOctets.push(byteToHex[buffer[_i]]);\n  }\n\n  return hexOctets.join('');\n}\n\nvar destination = new Uint8Array(16);\n\nfunction rng() {\n  if (typeof crypto != 'undefined' && typeof crypto.getRandomValues == 'function') {\n    return crypto.getRandomValues(destination);\n  } else if (typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function') {\n    return msCrypto.getRandomValues(destination);\n  }\n\n  return destination;\n}\n\nfunction generateRandomId(length) {\n  var id = bytesToHex(rng());\n  return id.substr(0, length);\n}\n\nfunction getDtHeaderValue(span) {\n  var dtVersion = '00';\n  var dtUnSampledFlags = '00';\n  var dtSampledFlags = '01';\n\n  if (span && span.traceId && span.id && span.parentId) {\n    var flags = span.sampled ? dtSampledFlags : dtUnSampledFlags;\n    var id = span.sampled ? span.id : span.parentId;\n    return dtVersion + '-' + span.traceId + '-' + id + '-' + flags;\n  }\n}\n\nfunction parseDtHeaderValue(value) {\n  var parsed = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})$/.exec(value);\n\n  if (parsed) {\n    var flags = parsed[4];\n    var sampled = flags !== '00';\n    return {\n      traceId: parsed[2],\n      id: parsed[3],\n      sampled: sampled\n    };\n  }\n}\n\nfunction isDtHeaderValid(header) {\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(header) && header.slice(3, 35) !== '00000000000000000000000000000000' && header.slice(36, 52) !== '0000000000000000';\n}\n\nfunction getTSHeaderValue(_ref) {\n  var sampleRate = _ref.sampleRate;\n\n  if (typeof sampleRate !== 'number' || String(sampleRate).length > 256) {\n    return;\n  }\n\n  var NAMESPACE = 'es';\n  var SEPARATOR = '=';\n  return \"\" + NAMESPACE + SEPARATOR + \"s:\" + sampleRate;\n}\n\nfunction setRequestHeader(target, name, value) {\n  if (typeof target.setRequestHeader === 'function') {\n    target.setRequestHeader(name, value);\n  } else if (target.headers && typeof target.headers.append === 'function') {\n    target.headers.append(name, value);\n  } else {\n    target[name] = value;\n  }\n}\n\nfunction checkSameOrigin(source, target) {\n  var isSame = false;\n\n  if (typeof target === 'string') {\n    isSame = source === target;\n  } else if (target && typeof target.test === 'function') {\n    isSame = target.test(source);\n  } else if (Array.isArray(target)) {\n    target.forEach(function (t) {\n      if (!isSame) {\n        isSame = checkSameOrigin(source, t);\n      }\n    });\n  }\n\n  return isSame;\n}\n\nfunction isPlatformSupported() {\n  return isBrowser && typeof Set === 'function' && typeof JSON.stringify === 'function' && PERF && typeof PERF.now === 'function' && isCORSSupported();\n}\n\nfunction setLabel(key, value, obj) {\n  if (!obj || !key) return;\n  var skey = removeInvalidChars(key);\n  var valueType = typeof value;\n\n  if (value != undefined && valueType !== 'boolean' && valueType !== 'number') {\n    value = String(value);\n  }\n\n  obj[skey] = value;\n  return obj;\n}\n\nfunction getServerTimingInfo(serverTimingEntries) {\n  if (serverTimingEntries === void 0) {\n    serverTimingEntries = [];\n  }\n\n  var serverTimingInfo = [];\n  var entrySeparator = ', ';\n  var valueSeparator = ';';\n\n  for (var _i2 = 0; _i2 < serverTimingEntries.length; _i2++) {\n    var _serverTimingEntries$ = serverTimingEntries[_i2],\n        name = _serverTimingEntries$.name,\n        duration = _serverTimingEntries$.duration,\n        description = _serverTimingEntries$.description;\n    var timingValue = name;\n\n    if (description) {\n      timingValue += valueSeparator + 'desc=' + description;\n    }\n\n    if (duration) {\n      timingValue += valueSeparator + 'dur=' + duration;\n    }\n\n    serverTimingInfo.push(timingValue);\n  }\n\n  return serverTimingInfo.join(entrySeparator);\n}\n\nfunction getTimeOrigin() {\n  return PERF.timing.fetchStart;\n}\n\nfunction stripQueryStringFromUrl(url) {\n  return url && url.split('?')[0];\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction baseExtend(dst, objs, deep) {\n  for (var i = 0, ii = objs.length; i < ii; ++i) {\n    var obj = objs[i];\n    if (!isObject(obj) && !isFunction(obj)) continue;\n    var keys = Object.keys(obj);\n\n    for (var j = 0, jj = keys.length; j < jj; j++) {\n      var key = keys[j];\n      var src = obj[key];\n\n      if (deep && isObject(src)) {\n        if (!isObject(dst[key])) dst[key] = Array.isArray(src) ? [] : {};\n        baseExtend(dst[key], [src], false);\n      } else {\n        dst[key] = src;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction getElasticScript() {\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0, l = scripts.length; i < l; i++) {\n      var sc = scripts[i];\n\n      if (sc.src.indexOf('elastic') > 0) {\n        return sc;\n      }\n    }\n  }\n}\n\nfunction getCurrentScript() {\n  if (typeof document !== 'undefined') {\n    var currentScript = document.currentScript;\n\n    if (!currentScript) {\n      return getElasticScript();\n    }\n\n    return currentScript;\n  }\n}\n\nfunction extend(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), false);\n}\n\nfunction merge(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), true);\n}\n\nfunction isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\nfunction noop() {}\n\nfunction find(array, predicate, thisArg) {\n  if (array == null) {\n    throw new TypeError('array is null or not defined');\n  }\n\n  var o = Object(array);\n  var len = o.length >>> 0;\n\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate must be a function');\n  }\n\n  var k = 0;\n\n  while (k < len) {\n    var kValue = o[k];\n\n    if (predicate.call(thisArg, kValue, k, o)) {\n      return kValue;\n    }\n\n    k++;\n  }\n\n  return undefined;\n}\n\nfunction removeInvalidChars(key) {\n  return key.replace(/[.*\"]/g, '_');\n}\n\nfunction getLatestNonXHRSpan(spans) {\n  var latestSpan = null;\n\n  for (var _i3 = 0; _i3 < spans.length; _i3++) {\n    var span = spans[_i3];\n\n    if (String(span.type).indexOf('external') === -1 && (!latestSpan || latestSpan._end < span._end)) {\n      latestSpan = span;\n    }\n  }\n\n  return latestSpan;\n}\n\nfunction getEarliestSpan(spans) {\n  var earliestSpan = spans[0];\n\n  for (var _i4 = 1; _i4 < spans.length; _i4++) {\n    var span = spans[_i4];\n\n    if (earliestSpan._start > span._start) {\n      earliestSpan = span;\n    }\n  }\n\n  return earliestSpan;\n}\n\nfunction now() {\n  return PERF.now();\n}\n\nfunction getTime(time) {\n  return typeof time === 'number' && time >= 0 ? time : now();\n}\n\nfunction getDuration(start, end) {\n  if (isUndefined(end) || isUndefined(start)) {\n    return null;\n  }\n\n  return parseInt(end - start);\n}\n\nfunction scheduleMacroTask(callback) {\n  setTimeout(callback, 0);\n}\n\nfunction scheduleMicroTask(callback) {\n  Promise.resolve().then(callback);\n}\n\nfunction isPerfTimelineSupported() {\n  return typeof PERF.getEntriesByType === 'function';\n}\n\nfunction isPerfTypeSupported(type) {\n  return typeof PerformanceObserver !== 'undefined' && PerformanceObserver.supportedEntryTypes && PerformanceObserver.supportedEntryTypes.indexOf(type) >= 0;\n}\n\nexport { extend, merge, isUndefined, noop, baseExtend, bytesToHex, isCORSSupported, isObject, isFunction, isPlatformSupported, isDtHeaderValid, parseDtHeaderValue, getServerTimingInfo, getDtHeaderValue, getTSHeaderValue, getCurrentScript, getElasticScript, getTimeOrigin, generateRandomId, getEarliestSpan, getLatestNonXHRSpan, getDuration, getTime, now, rng, checkSameOrigin, scheduleMacroTask, scheduleMicroTask, setLabel, setRequestHeader, stripQueryStringFromUrl, find, removeInvalidChars, PERF, isPerfTimelineSupported, isBrowser, isPerfTypeSupported };"]},"metadata":{},"sourceType":"module"}