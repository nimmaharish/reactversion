{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/products/Catalog/List.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar } from '@material-ui/core';\nimport AddIcon from \"../../../assets/images/products/catalog/add.svg\";\nimport checkedIcon from \"../../../assets/images/products/catalog/checked.svg\";\nimport emptyIcon from \"../../../assets/images/products/catalog/empty.svg\";\nimport cx from 'classnames';\nimport { Button as Btn, Search, Clickable } from 'phoenix-components';\nimport { Becca } from \"../../../api\";\nimport { useRefreshShop } from \"../../../contexts\";\nimport { useToggle } from \"../../../hooks/common\";\nimport { useQueryParams } from \"../../../hooks\";\nimport { Picker } from \"../../../components/shared/dateRangePicker/Picker\";\nimport { useDesktop } from \"../../../contexts\";\nimport ButtonComponent from \"../../profile/ButtonComponent\";\nimport PropTypes from 'prop-types';\nimport SnackBar from \"../../../services/snackbar\";\nimport Add1Icon from \"../../../assets/images/products/create/add1.svg\";\nimport Loader from \"../../../services/loader\"; // import { Loading } from 'components/shared/Loading';\n\nimport EventManager from \"../../../utils/events\";\nimport { customDateFilters, dateFilters, getText } from \"../../utils\";\nimport { Add } from \"./Add\";\nimport styles from \"./List.module.css\";\nconst colors = ['#FFF0E8', '#EDEDFF', '#E6FBFF', '#FFE6FB', '#FFC8C8', '#E6FFF3'];\n\nfunction List({\n  from,\n  selected,\n  onSelect,\n  onHide\n}) {\n  _s();\n\n  var _getCatalogs, _getCatalogs2, _getCatalogs3, _getCatalogs4;\n\n  const [query, setQuery] = useState('');\n  const contextShopRefresh = useRefreshShop();\n  const [url, setUrl] = useState('');\n  const [caption, setCaption] = useState('');\n  const isDesktop = useDesktop();\n  const params = useQueryParams();\n  const create = params.get('created') || 'all';\n  const history = useHistory();\n  const [openDrawer, setOpenDrawer] = useToggle(false);\n  const [catalogs, setCatalogs] = useState([]);\n  const [dateRangeFilters, setDateRangeFilters] = useState({\n    from: null,\n    to: null\n  });\n  const isEmptyFrom = dateRangeFilters.from === null;\n  const isEmptyTo = dateRangeFilters.to === null;\n  useEffect(() => {\n    Loader.show();\n    Becca.getCatalogStats().then(x => {\n      setCatalogs(x);\n      Loader.hide();\n    }).catch(e => {\n      SnackBar.showError(e);\n      Loader.hide();\n    });\n  }, [setCatalogs]);\n\n  const refresh = async () => {\n    setCatalogs(await Becca.getCatalogStats());\n  }; // if (!shop) {\n  //   return (\n  //     <Loading />\n  //   );\n  // }\n\n\n  const dateTimeFilters = () => {\n    if (create !== 'custom') {\n      return dateFilters[create];\n    }\n\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const onClick = (value, id) => {\n    if (from === 'product') {\n      if (selected.includes(value)) {\n        const filtered = selected.filter(x => x !== value);\n        onSelect(filtered);\n        return;\n      }\n\n      onSelect(selected.concat(value));\n      return;\n    }\n\n    contextShopRefresh();\n    history.push({\n      pathname: `/products/catalog/${id}`\n    });\n  };\n\n  const goBack = () => {\n    setOpenDrawer();\n  };\n\n  const updateShop = async () => {\n    if (caption.length === 0) {\n      SnackBar.show('Please Add Name', 'error');\n      return;\n    }\n\n    try {\n      await Becca.updateShop({\n        catalogs: [...catalogs, {\n          url,\n          caption: caption.trim()\n        }]\n      });\n      SnackBar.show('Catalog created successfully', 'success', 10000);\n      EventManager.emitEvent('catalog_added', {\n        name: caption.trim()\n      });\n      await refresh();\n      dateTimeFilters();\n      goBack();\n      setUrl('');\n      setCaption('');\n    } catch (exception) {\n      SnackBar.showError(exception);\n    }\n  };\n\n  const getCatalogs = () => {\n    if (query.length === 0) {\n      return catalogs;\n    }\n\n    return catalogs.filter(x => {\n      var _x$caption;\n\n      return ((_x$caption = x.caption) === null || _x$caption === void 0 ? void 0 : _x$caption.toLowerCase().indexOf(query === null || query === void 0 ? void 0 : query.toLowerCase())) > -1;\n    });\n  };\n\n  const getClass = value => {\n    if (from === 'product') {\n      if (selected.includes(value === null || value === void 0 ? void 0 : value.caption)) {\n        return cx(styles.tile, styles.active);\n      }\n\n      return cx(styles.tile);\n    }\n\n    return cx(styles.tile);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, openDrawer && /*#__PURE__*/React.createElement(Add, {\n    url: url,\n    caption: caption,\n    setUrl: setUrl,\n    catalogs: catalogs,\n    setCaption: setCaption,\n    updateShop: updateShop,\n    onBack: goBack,\n    type: \"create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ButtonComponent, {\n    style: styles.catLabel,\n    text: \"Total Collections\",\n    color: \"secondary\",\n    onClick: () => {},\n    endIcon: /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.catCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, (catalogs === null || catalogs === void 0 ? void 0 : catalogs.length) || 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Btn, {\n    startIcon: AddIcon,\n    label: \"Add Collections\",\n    onClick: setOpenDrawer,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  })), (catalogs === null || catalogs === void 0 ? void 0 : catalogs.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    value: query,\n    placeholder: \"Search for collection\",\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, (_getCatalogs = getCatalogs()) === null || _getCatalogs === void 0 ? void 0 : _getCatalogs.map((x, i) => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: colors[i % colors.length]\n    },\n    className: getClass(x, i),\n    onClick: () => onClick(x === null || x === void 0 ? void 0 : x.caption, x === null || x === void 0 ? void 0 : x._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: cx(styles.avatar),\n    variant: \"rounded\",\n    alt: \"Remy Sharp\",\n    src: x === null || x === void 0 ? void 0 : x.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, x !== null && x !== void 0 && x.caption ? x.caption.charAt(0) : '#'), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 23\n    }\n  }, x !== null && x !== void 0 && x.caption ? x.caption : 'un named'), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.skuCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 23\n    }\n  }, `${x === null || x === void 0 ? void 0 : x.skuCount} Products`)), selected.includes(x === null || x === void 0 ? void 0 : x.caption) && /*#__PURE__*/React.createElement(\"img\", {\n    src: checkedIcon,\n    className: styles.img,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 23\n    }\n  }))), ((_getCatalogs2 = getCatalogs()) === null || _getCatalogs2 === void 0 ? void 0 : _getCatalogs2.length) === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.empty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 19\n    }\n  }, \"You haven't curated any Collections yet!\")), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.fab,\n    onClick: setOpenDrawer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: Add1Icon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  })))), isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, openDrawer && /*#__PURE__*/React.createElement(Add, {\n    url: url,\n    caption: caption,\n    setUrl: setUrl,\n    catalogs: catalogs,\n    setCaption: setCaption,\n    updateShop: updateShop,\n    onBack: goBack,\n    type: \"create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ButtonComponent, {\n    style: styles.catLabel,\n    text: \"Total Collections\",\n    color: \"secondary\",\n    onClick: () => {},\n    endIcon: /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.catCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }, (catalogs === null || catalogs === void 0 ? void 0 : catalogs.length) || 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Btn, {\n    startIcon: AddIcon,\n    primary: false,\n    label: \"Add Collections\",\n    onClick: setOpenDrawer,\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 15\n    }\n  })), (catalogs === null || catalogs === void 0 ? void 0 : catalogs.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, !onHide && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pickerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.picker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    label: getText(dateRangeFilters),\n    onSelect: e => {\n      setDateRangeFilters(e);\n      params.set('created', 'custom');\n      history.push({\n        search: params.toString()\n      });\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    value: query,\n    placeholder: \"Search for collection\",\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(Btn, {\n    label: \"Search \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  })), onHide && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pickerContainer1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    value: query,\n    placeholder: \"Search for collection\",\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(Btn, {\n    label: \"Search \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sectionContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, (_getCatalogs3 = getCatalogs()) === null || _getCatalogs3 === void 0 ? void 0 : _getCatalogs3.map((x, i) => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: colors[i % colors.length]\n    },\n    className: getClass(x, i),\n    onClick: () => onClick(x === null || x === void 0 ? void 0 : x.caption, x === null || x === void 0 ? void 0 : x._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: cx(styles.avatar),\n    variant: \"rounded\",\n    alt: \"Remy Sharp\",\n    src: x === null || x === void 0 ? void 0 : x.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 23\n    }\n  }, x !== null && x !== void 0 && x.caption ? x.caption.charAt(0) : '#'), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 25\n    }\n  }, x !== null && x !== void 0 && x.caption ? x.caption : 'un named'), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.skuCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 25\n    }\n  }, `${x === null || x === void 0 ? void 0 : x.skuCount} Products`)), selected.includes(x === null || x === void 0 ? void 0 : x.caption) && /*#__PURE__*/React.createElement(\"img\", {\n    src: checkedIcon,\n    className: styles.img,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 25\n    }\n  }))), ((_getCatalogs4 = getCatalogs()) === null || _getCatalogs4 === void 0 ? void 0 : _getCatalogs4.length) === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.empty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 21\n    }\n  }, \"You haven't curated any Collections yet!\")), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.fab,\n    onClick: setOpenDrawer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: Add1Icon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 19\n    }\n  }))))));\n}\n\n_s(List, \"AoESgghIA42/ly7cCff0+q3tdTQ=\", false, function () {\n  return [useRefreshShop, useDesktop, useQueryParams, useHistory, useToggle];\n});\n\n_c = List;\nList.defaultProps = {\n  from: 'grid',\n  selected: [],\n  onSelect: null,\n  onHide: null\n};\nList.propTypes = {\n  from: PropTypes.string,\n  selected: PropTypes.array,\n  onSelect: PropTypes.func,\n  onHide: PropTypes.bool\n};\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/products/Catalog/List.jsx"],"names":["React","useState","useEffect","useHistory","Avatar","cx","Button","Btn","Search","Clickable","Becca","useRefreshShop","useToggle","useQueryParams","Picker","useDesktop","ButtonComponent","PropTypes","SnackBar","Loader","EventManager","customDateFilters","dateFilters","getText","Add","styles","colors","List","from","selected","onSelect","onHide","query","setQuery","contextShopRefresh","url","setUrl","caption","setCaption","isDesktop","params","create","get","history","openDrawer","setOpenDrawer","catalogs","setCatalogs","dateRangeFilters","setDateRangeFilters","to","isEmptyFrom","isEmptyTo","show","getCatalogStats","then","x","hide","catch","e","showError","refresh","dateTimeFilters","onClick","value","id","includes","filtered","filter","concat","push","pathname","goBack","updateShop","length","trim","emitEvent","name","exception","getCatalogs","toLowerCase","indexOf","getClass","tile","active","container","buttons","catLabel","catCount","AddIcon","search","target","section","map","i","backgroundColor","_id","avatar","charAt","card","skuCount","checkedIcon","img","empty","emptyIcon","emptyText","fab","Add1Icon","pickerContainer","picker","set","toString","search1","pickerContainer1","sectionContainer","defaultProps","propTypes","string","array","func","bool"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar, } from '@material-ui/core';\nimport AddIcon from 'assets/images/products/catalog/add.svg';\nimport checkedIcon from 'assets/images/products/catalog/checked.svg';\nimport emptyIcon from 'assets/images/products/catalog/empty.svg';\nimport cx from 'classnames';\nimport { Button as Btn, Search, Clickable } from 'phoenix-components';\nimport { Becca } from 'api/index';\nimport { useRefreshShop } from 'contexts';\nimport { useToggle } from 'hooks/common';\nimport { useQueryParams } from 'hooks';\nimport { Picker } from 'components/shared/dateRangePicker/Picker';\nimport { useDesktop } from 'contexts';\nimport ButtonComponent from 'containers/profile/ButtonComponent';\nimport PropTypes from 'prop-types';\nimport SnackBar from 'services/snackbar';\nimport Add1Icon from 'assets/images/products/create/add1.svg';\nimport Loader from 'services/loader';\n// import { Loading } from 'components/shared/Loading';\nimport EventManager from 'utils/events';\nimport { customDateFilters, dateFilters, getText } from 'containers/utils';\nimport { Add } from './Add';\nimport styles from './List.module.css';\n\nconst colors = ['#FFF0E8', '#EDEDFF', '#E6FBFF', '#FFE6FB', '#FFC8C8', '#E6FFF3'];\n\nfunction List({\n  from,\n  selected,\n  onSelect,\n  onHide\n}) {\n  const [query, setQuery] = useState('');\n  const contextShopRefresh = useRefreshShop();\n  const [url, setUrl] = useState('');\n  const [caption, setCaption] = useState('');\n  const isDesktop = useDesktop();\n  const params = useQueryParams();\n  const create = params.get('created') || 'all';\n  const history = useHistory();\n  const [openDrawer, setOpenDrawer] = useToggle(false);\n  const [catalogs, setCatalogs] = useState([]);\n  const [dateRangeFilters, setDateRangeFilters] = useState({\n    from: null,\n    to: null\n  });\n  const isEmptyFrom = dateRangeFilters.from === null;\n  const isEmptyTo = dateRangeFilters.to === null;\n\n  useEffect(() => {\n    Loader.show();\n    Becca.getCatalogStats().then(x => {\n      setCatalogs(x);\n      Loader.hide();\n    }).catch((e) => {\n      SnackBar.showError(e);\n      Loader.hide();\n    });\n  }, [setCatalogs]);\n\n  const refresh = async () => {\n    setCatalogs(await Becca.getCatalogStats());\n  };\n\n  // if (!shop) {\n  //   return (\n  //     <Loading />\n  //   );\n  // }\n  const dateTimeFilters = () => {\n    if (create !== 'custom') {\n      return dateFilters[create];\n    }\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const onClick = (value, id) => {\n    if (from === 'product') {\n      if (selected.includes(value)) {\n        const filtered = selected.filter(x => x !== value);\n        onSelect(filtered);\n        return;\n      }\n      onSelect(selected.concat(value));\n      return;\n    }\n    contextShopRefresh();\n    history.push({\n      pathname: `/products/catalog/${id}`\n    });\n  };\n\n  const goBack = () => {\n    setOpenDrawer();\n  };\n\n  const updateShop = async () => {\n    if (caption.length === 0) {\n      SnackBar.show('Please Add Name', 'error');\n      return;\n    }\n    try {\n      await Becca.updateShop({\n        catalogs: [...catalogs, {\n          url,\n          caption: caption.trim()\n        }]\n      });\n      SnackBar.show('Catalog created successfully', 'success', 10000);\n      EventManager.emitEvent('catalog_added', {\n        name: caption.trim(),\n      });\n      await refresh();\n      dateTimeFilters();\n      goBack();\n      setUrl('');\n      setCaption('');\n    } catch (exception) {\n      SnackBar.showError(exception);\n    }\n  };\n  const getCatalogs = () => {\n    if (query.length === 0) {\n      return catalogs;\n    }\n    return catalogs.filter(x => x.caption?.toLowerCase()\n      .indexOf(query?.toLowerCase()) > -1);\n  };\n\n  const getClass = (value) => {\n    if (from === 'product') {\n      if (selected.includes(value?.caption)) {\n        return cx(styles.tile, styles.active);\n      }\n      return cx(styles.tile);\n    }\n    return cx(styles.tile);\n  };\n\n  return (\n    <>\n      {!isDesktop\n        && (\n          <div className={styles.container}>\n            {openDrawer && (\n              <Add\n                url={url}\n                caption={caption}\n                setUrl={setUrl}\n                catalogs={catalogs}\n                setCaption={setCaption}\n                updateShop={updateShop}\n                onBack={goBack}\n                type=\"create\"\n              />\n            )}\n            <div className={styles.buttons}>\n              <ButtonComponent\n                style={styles.catLabel}\n                text=\"Total Collections\"\n                color=\"secondary\"\n                onClick={() => {\n                }}\n                endIcon={(\n                  <span className={styles.catCount}>\n                    {catalogs?.length || 0}\n                  </span>\n                )}\n              />\n              <Btn\n                startIcon={AddIcon}\n                label=\"Add Collections\"\n                onClick={setOpenDrawer}\n                size=\"small\"\n              />\n            </div>\n            {catalogs?.length > 0 && (\n              <div className={styles.search}>\n                <Search\n                  value={query}\n                  placeholder=\"Search for collection\"\n                  onChange={(e) => setQuery(e.target.value)}\n                />\n              </div>\n            )}\n            <div className={styles.section}>\n              {getCatalogs()\n                ?.map((x, i) => (\n                  <div\n                    style={{ backgroundColor: colors[i % colors.length] }}\n                    className={getClass(x, i)}\n                    onClick={() => onClick(x?.caption, x?._id)}\n                  >\n                    <Avatar className={cx(styles.avatar)} variant=\"rounded\" alt=\"Remy Sharp\" src={x?.url}>\n                      {x?.caption ? x.caption.charAt(0) : '#'}\n                    </Avatar>\n                    <div className={styles.card}>\n                      <div className={styles.name}>{x?.caption ? x.caption : 'un named'}</div>\n                      <div className={styles.skuCount}>{`${x?.skuCount} Products`}</div>\n                    </div>\n                    {selected.includes(x?.caption) && (\n                      <img src={checkedIcon} className={styles.img} alt=\"\" />\n                    )}\n                  </div>\n                ))}\n              {getCatalogs()?.length === 0 && (\n                <div className={styles.empty}>\n                  <img src={emptyIcon} alt=\"\" />\n                  <div className={styles.emptyText}>\n                    You haven't curated any Collections yet!\n                  </div>\n                </div>\n              )}\n              <Clickable\n                className={styles.fab}\n                onClick={setOpenDrawer}>\n                <img src={Add1Icon} alt=\"\" />\n              </Clickable>\n            </div>\n          </div>\n        )}\n      {isDesktop\n        && (\n          <div className={styles.container}>\n            {openDrawer && (\n              <Add\n                url={url}\n                caption={caption}\n                setUrl={setUrl}\n                catalogs={catalogs}\n                setCaption={setCaption}\n                updateShop={updateShop}\n                onBack={goBack}\n                type=\"create\"\n              />\n            )}\n            <div className={styles.buttons}>\n              <ButtonComponent\n                style={styles.catLabel}\n                text=\"Total Collections\"\n                color=\"secondary\"\n                onClick={() => {\n                }}\n                endIcon={(\n                  <span className={styles.catCount}>\n                    {catalogs?.length || 0}\n                  </span>\n                )}\n              />\n              <Btn\n                startIcon={AddIcon}\n                primary={false}\n                label=\"Add Collections\"\n                onClick={setOpenDrawer}\n                size=\"medium\"\n              />\n            </div>\n            {catalogs?.length > 0 && (\n              <>\n                {!onHide && (\n                  <div className={styles.pickerContainer}>\n                    <div className={styles.picker}>\n                      <div>\n                        <Picker\n                          label={getText(dateRangeFilters)}\n                          onSelect={(e) => {\n                            setDateRangeFilters(e);\n                            params.set('created', 'custom');\n                            history.push({ search: params.toString() });\n                            refresh();\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div className={styles.search1}>\n                      <Search\n                        value={query}\n                        placeholder=\"Search for collection\"\n                        onChange={(e) => setQuery(e.target.value)}\n                      />\n                    </div>\n                    <Btn\n                      label=\"Search \"\n                    />\n                  </div>\n                )}\n                {onHide && (\n                  <div className={styles.pickerContainer1}>\n                    <div className={styles.search1}>\n                      <Search\n                        value={query}\n                        placeholder=\"Search for collection\"\n                        onChange={(e) => setQuery(e.target.value)}\n                      />\n                    </div>\n                    <Btn\n                      label=\"Search \"\n                    />\n                  </div>\n                )}\n              </>\n            )}\n            <div className={styles.sectionContainer}>\n              <div className={styles.section}>\n                {getCatalogs()\n                  ?.map((x, i) => (\n                    <div\n                      style={{ backgroundColor: colors[i % colors.length] }}\n                      className={getClass(x, i)}\n                      onClick={() => onClick(x?.caption, x?._id)}\n                    >\n                      <Avatar className={cx(styles.avatar)} variant=\"rounded\" alt=\"Remy Sharp\" src={x?.url}>\n                        {x?.caption ? x.caption.charAt(0) : '#'}\n                      </Avatar>\n                      <div className={styles.card}>\n                        <div className={styles.name}>{x?.caption ? x.caption : 'un named'}</div>\n                        <div className={styles.skuCount}>{`${x?.skuCount} Products`}</div>\n                      </div>\n                      {selected.includes(x?.caption) && (\n                        <img src={checkedIcon} className={styles.img} alt=\"\" />\n                      )}\n                    </div>\n                  ))}\n                {getCatalogs()?.length === 0 && (\n                  <div className={styles.empty}>\n                    <img src={emptyIcon} alt=\"\" />\n                    <div className={styles.emptyText}>\n                      You haven't curated any Collections yet!\n                    </div>\n                  </div>\n                )}\n                <Clickable\n                  className={styles.fab}\n                  onClick={setOpenDrawer}>\n                  <img src={Add1Icon} alt=\"\" />\n                </Clickable>\n              </div>\n            </div>\n          </div>\n        )}\n    </>\n  );\n}\n\nList.defaultProps = {\n  from: 'grid',\n  selected: [],\n  onSelect: null,\n  onHide: null,\n};\n\nList.propTypes = {\n  from: PropTypes.string,\n  selected: PropTypes.array,\n  onSelect: PropTypes.func,\n  onHide: PropTypes.bool\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}