{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Loader from \"../services/loader\";\nimport { Nikon } from \"../api\";\nimport { uniqBy, uniq } from 'lodash';\nimport Snackbar from \"../services/snackbar\";\nexport function usePost(id) {\n  _s();\n\n  const [post, setPost] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const refresh = async () => {\n    if (!id) {\n      return;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setPost(await Nikon.getPost(id));\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('error occurred', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [id]);\n  return [post, loading, refresh];\n}\n\n_s(usePost, \"rvJOH+Ly7lWpOgSUg61sx2TKCIM=\");\n\nexport function usePosts(func, filters = {}, sorts = {}) {\n  _s2();\n\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n\n      if (page === 0) {\n        Loader.show();\n      }\n\n      const data = await func(page, filters, sorts);\n      const uniquePosts = uniqBy([...posts, ...data], 'pid');\n      setPosts(uniquePosts);\n\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const loadMore = async ({\n    stopIndex = 15\n  } = {}) => {\n    if (loading) {\n      return;\n    }\n\n    const newPage = Math.floor(stopIndex / 15);\n\n    if (newPage <= page) {\n      return;\n    }\n\n    if (!hasMore) {\n      return;\n    }\n\n    await load();\n  };\n\n  const refresh = async () => {\n    try {\n      setLoading(true);\n      const data = await func(0, filters, sorts);\n      const uniquePosts = uniqBy([...data], 'pid');\n      setPosts(uniquePosts);\n      setPage(0);\n      setHasMore(true);\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [func, JSON.stringify(filters), JSON.stringify(sorts)]);\n  return [posts, loadMore, hasMore, loading, refresh];\n}\n\n_s2(usePosts, \"618zV9UPXpOlaceJ6YvvqcF88Bs=\");\n\nexport function useLivePosts(filters = {}, sorts = {}) {\n  _s3();\n\n  return usePosts(Nikon.getLivePosts, filters, sorts);\n}\n\n_s3(useLivePosts, \"1BNZ2JT4xLSt1qt5H2YOw8R6thQ=\", false, function () {\n  return [usePosts];\n});\n\nexport function useDraftPosts(filters = {}, sorts = {}) {\n  _s4();\n\n  return usePosts(Nikon.getDraftPosts, filters, sorts);\n}\n\n_s4(useDraftPosts, \"1BNZ2JT4xLSt1qt5H2YOw8R6thQ=\", false, function () {\n  return [usePosts];\n});\n\nexport function useShoppablePosts(filters = {}, sorts = {}) {\n  _s5();\n\n  return usePosts(Nikon.getShoppablePosts, filters, sorts);\n}\n\n_s5(useShoppablePosts, \"1BNZ2JT4xLSt1qt5H2YOw8R6thQ=\", false, function () {\n  return [usePosts];\n});\n\nexport function usePostsMedia(initialPosts = [], initialPage = 0, filters = {}, sorts = {}) {\n  _s6();\n\n  const [posts, setPosts] = useState(initialPosts);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(initialPage);\n  const [hasMore, setHasMore] = useState(true);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n\n      if (page === 0) {\n        Loader.show();\n      }\n\n      const data = await Nikon.getPostsMedia(page, filters, sorts);\n      const uniquePosts = uniq([...posts, ...data]);\n      setPosts(uniquePosts);\n\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const loadMore = async ({\n    stopIndex = 15\n  } = {}) => {\n    if (loading) {\n      return;\n    }\n\n    const newPage = Math.floor(stopIndex / 15);\n\n    if (newPage <= page) {\n      return;\n    }\n\n    if (!hasMore) {\n      return;\n    }\n\n    await load();\n  };\n\n  const refresh = async () => {\n    try {\n      setLoading(true);\n      const data = await Nikon.getPostsMedia(0, filters, sorts);\n      const uniquePosts = uniq([...data]);\n      setPosts(uniquePosts);\n      setPage(0);\n      setHasMore(true);\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [JSON.stringify(filters), JSON.stringify(sorts)]);\n  return [posts, loadMore, hasMore, loading, refresh];\n}\n\n_s6(usePostsMedia, \"qSTRkWf84w9bgqWTqFnokgQwzNc=\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/hooks/posts.js"],"names":["useEffect","useState","Loader","Nikon","uniqBy","uniq","Snackbar","usePost","id","post","setPost","loading","setLoading","refresh","getPost","e","console","error","show","usePosts","func","filters","sorts","posts","setPosts","page","setPage","hasMore","setHasMore","load","data","uniquePosts","length","hide","loadMore","stopIndex","newPage","Math","floor","JSON","stringify","useLivePosts","getLivePosts","useDraftPosts","getDraftPosts","useShoppablePosts","getShoppablePosts","usePostsMedia","initialPosts","initialPage","getPostsMedia"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Loader from 'services/loader';\nimport { Nikon } from 'api';\nimport { uniqBy, uniq } from 'lodash';\nimport Snackbar from 'services/snackbar';\n\nexport function usePost(id) {\n  const [post, setPost] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const refresh = async () => {\n    if (!id) {\n      return;\n    }\n    if (loading) {\n      return;\n    }\n    try {\n      setLoading(true);\n      setPost(await Nikon.getPost(id));\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('error occurred', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [id]);\n\n  return [post, loading, refresh];\n}\n\nexport function usePosts(func, filters = {}, sorts = {}) {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      if (page === 0) {\n        Loader.show();\n      }\n      const data = await func(page, filters, sorts);\n      const uniquePosts = uniqBy([...posts, ...data], 'pid');\n      setPosts(uniquePosts);\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const loadMore = async ({ stopIndex = 15 } = {}) => {\n    if (loading) {\n      return;\n    }\n    const newPage = Math.floor(stopIndex / 15);\n    if (newPage <= page) {\n      return;\n    }\n    if (!hasMore) {\n      return;\n    }\n    await load();\n  };\n\n  const refresh = async () => {\n    try {\n      setLoading(true);\n      const data = await func(0, filters, sorts);\n      const uniquePosts = uniqBy([...data], 'pid');\n      setPosts(uniquePosts);\n      setPage(0);\n      setHasMore(true);\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [func, JSON.stringify(filters), JSON.stringify(sorts)]);\n\n  return [posts, loadMore, hasMore, loading, refresh];\n}\n\nexport function useLivePosts(filters = {}, sorts = {}) {\n  return usePosts(Nikon.getLivePosts, filters, sorts);\n}\n\nexport function useDraftPosts(filters = {}, sorts = {}) {\n  return usePosts(Nikon.getDraftPosts, filters, sorts);\n}\n\nexport function useShoppablePosts(filters = {}, sorts = {}) {\n  return usePosts(Nikon.getShoppablePosts, filters, sorts);\n}\n\nexport function usePostsMedia(initialPosts = [], initialPage = 0, filters = {}, sorts = {}) {\n  const [posts, setPosts] = useState(initialPosts);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(initialPage);\n  const [hasMore, setHasMore] = useState(true);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      if (page === 0) {\n        Loader.show();\n      }\n      const data = await Nikon.getPostsMedia(page, filters, sorts);\n      const uniquePosts = uniq([...posts, ...data]);\n      setPosts(uniquePosts);\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const loadMore = async ({ stopIndex = 15 } = {}) => {\n    if (loading) {\n      return;\n    }\n    const newPage = Math.floor(stopIndex / 15);\n    if (newPage <= page) {\n      return;\n    }\n    if (!hasMore) {\n      return;\n    }\n    await load();\n  };\n\n  const refresh = async () => {\n    try {\n      setLoading(true);\n      const data = await Nikon.getPostsMedia(0, filters, sorts);\n      const uniquePosts = uniq([...data]);\n      setPosts(uniquePosts);\n      setPage(0);\n      setHasMore(true);\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [JSON.stringify(filters), JSON.stringify(sorts)]);\n\n  return [posts, loadMore, hasMore, loading, refresh];\n}\n"]},"metadata":{},"sourceType":"module"}