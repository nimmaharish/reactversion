{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/multi/OrderCard.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { useOrder, useRefresh, useSetIds, isOrderCustomerPickUp, useOrderStatus } from \"../../../contexts/orderContext\"; // import moment from 'moment';\n\nimport cx from 'classnames';\nimport { useToggle } from \"../../../hooks/common\";\nimport { ShippingModal } from \"../ShippingModal\";\nimport { useShop } from \"../../../contexts/userContext\";\nimport { SettlementAndShippingDetails } from \"../SettlementAndShippingDetails\";\nimport { CenterButton } from \"../CenterButton\";\nimport { BottomBar } from \"../BottomBar\";\nimport { Badge, Button } from 'phoenix-components';\nimport { getBadgeVariant } from \"../utils\";\nimport { Note } from \"../Note\";\nimport styles from \"./OrderCard.module.css\";\nexport function OrderCard({\n  order,\n  type\n}) {\n  _s();\n\n  var _order$content, _order$content2, _order$content3;\n\n  const refresh = useRefresh();\n  const shop = useShop();\n  const setIds = useSetIds();\n  const rootOrder = useOrder();\n  const isShipped = type === 'shipped';\n  const isCustomerPickUp = isOrderCustomerPickUp();\n  const isSelfDrop = _.get(order, 'subType', '') === 'selfdrop';\n\n  const image = _.get(order, 'content.images[0].url', '');\n\n  const quantity = _.get(order, 'quantity', 1);\n\n  const isGroupedItems = isShipped && _.get(order, 'isLast', false);\n\n  const groupItemsId = isShipped && _.get(order, 'allItemIds', false);\n\n  const [deliveryForm, setDeliveryForm] = useToggle(false);\n\n  const enableReadyToShip = _.get(order, 'buttons.enableReadyToShip', false);\n\n  const selfShipProvider = _.get(order, 'details.provider', '');\n\n  const awbNo = _.get(order, 'details.awbNo', '');\n\n  const note = _.get(order, 'details.note', '');\n\n  const isCancelledOrder = useOrderStatus() === 'cancelled';\n\n  const readyToShip = async () => {\n    const itemIds = isGroupedItems ? groupItemsId : [order._id];\n    setIds(itemIds);\n    setDeliveryForm(true);\n  };\n\n  const onReadyToShipClose = async () => {\n    setDeliveryForm(false);\n    await refresh();\n  };\n\n  const getStatus = () => {\n    if (type === 'pending') {\n      if (isCancelledOrder) {\n        return 'Cancelled';\n      }\n\n      if ((rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder.status) === 'payment successful') {\n        return rootOrder.status;\n      }\n\n      if ((rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder.status) === 'payment pending') {\n        if (rootOrder !== null && rootOrder !== void 0 && rootOrder.isCod) {\n          return 'pending';\n        }\n\n        return 'Added to cart';\n      }\n\n      if ((rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder.status) === 'payment cod' || (rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder.status) === 'payment custom') {\n        return 'pending';\n      }\n\n      return order.status;\n    }\n\n    if (isCancelledOrder) {\n      return 'Cancelled';\n    }\n\n    return order.status;\n  };\n\n  const variant = order === null || order === void 0 ? void 0 : (_order$content = order.content) === null || _order$content === void 0 ? void 0 : _order$content.details;\n  const color = order === null || order === void 0 ? void 0 : (_order$content2 = order.content) === null || _order$content2 === void 0 ? void 0 : _order$content2.color;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: isShipped && styles.shipSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.root),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bgWhite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    loading: \"lazy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.column,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, 'flexBetween'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, order === null || order === void 0 ? void 0 : (_order$content3 = order.content) === null || _order$content3 === void 0 ? void 0 : _order$content3.title), /*#__PURE__*/React.createElement(Badge, {\n    size: \"small\",\n    rounded: true,\n    variant: getBadgeVariant(order.status),\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, getStatus())), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, shop.currency || 'INR', ' ', order.amount), (variant === null || variant === void 0 ? void 0 : variant.name) && (variant === null || variant === void 0 ? void 0 : variant.value) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, variant.value, ' ', variant.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, `${quantity} Qty`)), (color === null || color === void 0 ? void 0 : color.hex) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.colorHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, \"Color\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.colorBox,\n    style: {\n      background: color.hex\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.note,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Note, {\n    note: order === null || order === void 0 ? void 0 : order.note,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  })), isShipped && isGroupedItems && enableReadyToShip && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fullWidth flexCenter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"Ready To Ship\",\n    onClick: readyToShip,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  })), isShipped && isGroupedItems && /*#__PURE__*/React.createElement(CenterButton, {\n    order: order,\n    groupId: order.groupId,\n    hideLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 43\n    }\n  }), deliveryForm && /*#__PURE__*/React.createElement(ShippingModal, {\n    order: order,\n    groupId: order.groupId,\n    onClose: onReadyToShipClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 26\n    }\n  }), isShipped && isGroupedItems && /*#__PURE__*/React.createElement(SettlementAndShippingDetails, {\n    showShipping: true,\n    order: order,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 44\n    }\n  }), selfShipProvider.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selfprovider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \" Shipping Details\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"Shipped By -\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, ' ', selfShipProvider), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, \"Tracking ID - \"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, ' ', awbNo)), isCustomerPickUp && note.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selfprovider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, \" Shipping Details\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, \"Shipping Type:\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, ' ', \"Customer Pickup\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, \"Pickup Remarks: \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, ' ', note)), isSelfDrop && note.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selfprovider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, \" Shipping Details\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, \"Shipping Type:\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, ' ', \"Self Drop\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, \"Delivery Remarks: \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, ' ', note)), isShipped && isGroupedItems && /*#__PURE__*/React.createElement(BottomBar, {\n    order: order,\n    groupId: order.groupId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 42\n    }\n  })));\n}\n\n_s(OrderCard, \"kZqUuvJfGsOQrH25musncbXs7T8=\", false, function () {\n  return [useRefresh, useShop, useSetIds, useOrder, useToggle, useOrderStatus];\n});\n\n_c = OrderCard;\nOrderCard.defaultProps = {\n  type: ''\n};\nOrderCard.propTypes = {\n  order: PropTypes.object.isRequired,\n  type: PropTypes.string\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderCard\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/multi/OrderCard.jsx"],"names":["React","PropTypes","_","useOrder","useRefresh","useSetIds","isOrderCustomerPickUp","useOrderStatus","cx","useToggle","ShippingModal","useShop","SettlementAndShippingDetails","CenterButton","BottomBar","Badge","Button","getBadgeVariant","Note","styles","OrderCard","order","type","refresh","shop","setIds","rootOrder","isShipped","isCustomerPickUp","isSelfDrop","get","image","quantity","isGroupedItems","groupItemsId","deliveryForm","setDeliveryForm","enableReadyToShip","selfShipProvider","awbNo","note","isCancelledOrder","readyToShip","itemIds","_id","onReadyToShipClose","getStatus","status","isCod","variant","content","details","color","shipSection","root","bgWhite","container","left","column","row","title","price","currency","amount","name","value","hex","colorHeading","colorBox","background","groupId","length","selfprovider","defaultProps","propTypes","object","isRequired","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport {\n  useOrder, useRefresh, useSetIds, isOrderCustomerPickUp, useOrderStatus\n} from 'contexts/orderContext';\n// import moment from 'moment';\nimport cx from 'classnames';\nimport { useToggle } from 'hooks/common';\nimport { ShippingModal } from 'components/orders/ShippingModal';\nimport { useShop } from 'contexts/userContext';\nimport { SettlementAndShippingDetails } from 'components/orders/SettlementAndShippingDetails';\nimport { CenterButton } from 'components/orders/CenterButton';\nimport { BottomBar } from 'components/orders/BottomBar';\nimport { Badge, Button } from 'phoenix-components';\nimport { getBadgeVariant } from 'components/orders/utils';\nimport { Note } from 'components/orders/Note';\nimport styles from './OrderCard.module.css';\n\nexport function OrderCard({\n  order,\n  type\n}) {\n  const refresh = useRefresh();\n  const shop = useShop();\n  const setIds = useSetIds();\n  const rootOrder = useOrder();\n  const isShipped = type === 'shipped';\n  const isCustomerPickUp = isOrderCustomerPickUp();\n  const isSelfDrop = _.get(order, 'subType', '') === 'selfdrop';\n  const image = _.get(order, 'content.images[0].url', '');\n  const quantity = _.get(order, 'quantity', 1);\n  const isGroupedItems = isShipped && _.get(order, 'isLast', false);\n  const groupItemsId = isShipped && _.get(order, 'allItemIds', false);\n  const [deliveryForm, setDeliveryForm] = useToggle(false);\n  const enableReadyToShip = _.get(order, 'buttons.enableReadyToShip', false);\n  const selfShipProvider = _.get(order, 'details.provider', '');\n  const awbNo = _.get(order, 'details.awbNo', '');\n  const note = _.get(order, 'details.note', '');\n  const isCancelledOrder = useOrderStatus() === 'cancelled';\n\n  const readyToShip = async () => {\n    const itemIds = isGroupedItems ? groupItemsId : [order._id];\n    setIds(itemIds);\n    setDeliveryForm(true);\n  };\n\n  const onReadyToShipClose = async () => {\n    setDeliveryForm(false);\n    await refresh();\n  };\n\n  const getStatus = () => {\n    if (type === 'pending') {\n      if (isCancelledOrder) {\n        return 'Cancelled';\n      }\n      if (rootOrder?.status === 'payment successful') {\n        return rootOrder.status;\n      }\n      if (rootOrder?.status === 'payment pending') {\n        if (rootOrder?.isCod) {\n          return 'pending';\n        }\n        return 'Added to cart';\n      }\n      if (rootOrder?.status === 'payment cod' || rootOrder?.status === 'payment custom') {\n        return 'pending';\n      }\n      return order.status;\n    }\n    if (isCancelledOrder) {\n      return 'Cancelled';\n    }\n    return order.status;\n  };\n\n  const variant = order?.content?.details;\n  const color = order?.content?.color;\n\n  return (\n    <div className={isShipped && styles.shipSection}>\n      <div className={cx(styles.root)}>\n        <div className={styles.bgWhite}>\n          <div className={styles.container}>\n            <div className={styles.left}>\n              <img src={image} alt=\"\" loading=\"lazy\" />\n            </div>\n            <div className={styles.column}>\n              <div className={cx(styles.row, 'flexBetween')}>\n                <div className={styles.title}>\n                  {order?.content?.title}\n                </div>\n                <Badge\n                  size=\"small\"\n                  rounded\n                  variant={getBadgeVariant(order.status)}\n                  color=\"white\"\n                >\n                  {getStatus()}\n                </Badge>\n              </div>\n              <div className={styles.row}>\n                <div className={styles.price}>\n                  {shop.currency || 'INR'}\n                  {' '}\n                  {order.amount}\n                </div>\n                {variant?.name && variant?.value && (\n                  <div className={styles.price}>\n                    {variant.value}\n                    {' '}\n                    {variant.name}\n                  </div>\n                )}\n                <div className={styles.price}>\n                  {`${quantity} Qty`}\n                </div>\n              </div>\n              {color?.hex && (\n                <div className={styles.row}>\n                  <div className={styles.colorHeading}>Color</div>\n                  <div>\n                    <div className={styles.colorBox} style={{ background: color.hex }} />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div>\n        <div className={styles.note}>\n          <Note note={order?.note} />\n        </div>\n        {isShipped && isGroupedItems && enableReadyToShip && (\n          <div className=\"fullWidth flexCenter\">\n            <Button\n              label=\"Ready To Ship\"\n              onClick={readyToShip}\n              size=\"large\"\n            />\n          </div>\n        )}\n        {(isShipped && isGroupedItems) && <CenterButton order={order} groupId={order.groupId} hideLabel={true} />}\n        {deliveryForm && <ShippingModal order={order} groupId={order.groupId} onClose={onReadyToShipClose} />}\n        {(isShipped && isGroupedItems) && (<SettlementAndShippingDetails showShipping={true} order={order} />)}\n        {selfShipProvider.length > 0 && (\n          <div className={styles.selfprovider}>\n            <div> Shipping Details</div>\n            <span>\n              Shipped By -\n            </span>\n            <span>\n              {' '}\n              {selfShipProvider}\n            </span>\n            <br />\n            <span>Tracking ID - </span>\n            <span>\n              {' '}\n              {awbNo}\n            </span>\n          </div>\n        )}\n        {isCustomerPickUp && note.length > 0 && (\n          <div className={styles.selfprovider}>\n            <div> Shipping Details</div>\n            <span>\n              Shipping Type:\n            </span>\n            <span>\n              {' '}\n              Customer Pickup\n            </span>\n            <br />\n            <span>Pickup Remarks: </span>\n            <br />\n            <span>\n              {' '}\n              {note}\n            </span>\n          </div>\n        )}\n        {isSelfDrop && note.length > 0 && (\n          <div className={styles.selfprovider}>\n            <div> Shipping Details</div>\n            <span>\n              Shipping Type:\n            </span>\n            <span>\n              {' '}\n              Self Drop\n            </span>\n            <br />\n            <span>Delivery Remarks: </span>\n            <br />\n            <span>\n              {' '}\n              {note}\n            </span>\n          </div>\n        )}\n        {isShipped && isGroupedItems && (<BottomBar order={order} groupId={order.groupId} />)}\n      </div>\n    </div>\n  );\n}\n\nOrderCard.defaultProps = {\n  type: ''\n};\n\nOrderCard.propTypes = {\n  order: PropTypes.object.isRequired,\n  type: PropTypes.string\n};\n"]},"metadata":{},"sourceType":"module"}