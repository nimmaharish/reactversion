{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { Becca } from \"../api\";\nimport Snackbar from \"../services/snackbar\";\nexport function useShop(error = true) {\n  _s();\n\n  const [shop, setShop] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n\n      setLoading(true);\n      setShop(await Becca.getShop());\n      setLoaded(true);\n    } catch (e) {\n      if (error) {\n        console.error(e);\n        Snackbar.show('Errror Occured', 'error');\n      } else {\n        setLoaded(true);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [shop, refresh, loading, loaded];\n}\n\n_s(useShop, \"RTE4nuoXPJVFYlsb5aiDBANNP7g=\");\n\nexport function useShopOverview() {\n  _s2();\n\n  const [overview, setOverview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n\n      setLoading(true);\n      setOverview((await Becca.overview()) || {});\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Errror Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [overview, refresh, loading];\n}\n\n_s2(useShopOverview, \"L7M8h98OO0/+fb25uOgVLFDFidY=\");\n\nexport function useShopTemplates() {\n  _s3();\n\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n\n      setLoading(true);\n      const {\n        templates: newTemplates\n      } = await Becca.templates(0, 1000, {}, {\n        createdAt: -1\n      });\n      setTemplates(newTemplates);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [templates, refresh, loading];\n}\n\n_s3(useShopTemplates, \"8gzKGRZpj/nEDuwGlrdVwKwiubQ=\");\n\nexport function useShopShippingPartners() {\n  _s4();\n\n  const [partners, setPartners] = useState({});\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n\n      setLoading(true);\n      const data = await Becca.getShippingPartners();\n      setPartners(data);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [partners, refresh, loading];\n}\n\n_s4(useShopShippingPartners, \"rH3gFnnbzF+zqAN7VY43Op3qnXA=\");\n\nexport function useShopPaymentPartners() {\n  _s5();\n\n  const [partners, setPartners] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n\n      setLoading(true);\n      const {\n        accounts = []\n      } = await Becca.getShop();\n      const stripe = accounts.find(x => x.name === 'stripe');\n      const rzpay = accounts.find(x => x.name === 'razorpay');\n      const paypal = accounts.find(x => x.name === 'paypal');\n\n      if (stripe) {\n        stripe.config = {};\n        const data = await Becca.getAccount('stripe');\n        stripe.config = data;\n      }\n\n      if (rzpay) {\n        rzpay.config = {};\n        const data = await Becca.getAccount('razorpay');\n        rzpay.config = data;\n      }\n\n      if (paypal) {\n        paypal.config = {};\n        const data = await Becca.getAccount('paypal');\n        paypal.config = data;\n      }\n\n      setPartners(accounts);\n    } catch (e) {\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [partners, refresh, loading];\n}\n\n_s5(useShopPaymentPartners, \"b5WStHxbGM3ct7GxYsNruYptqSQ=\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/hooks/shop.js"],"names":["useCallback","useEffect","useState","Becca","Snackbar","useShop","error","shop","setShop","loaded","setLoaded","loading","setLoading","refresh","getShop","e","console","show","useShopOverview","overview","setOverview","useShopTemplates","templates","setTemplates","newTemplates","createdAt","useShopShippingPartners","partners","setPartners","data","getShippingPartners","useShopPaymentPartners","accounts","stripe","find","x","name","rzpay","paypal","config","getAccount"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { Becca } from 'api';\nimport Snackbar from 'services/snackbar';\n\nexport function useShop(error = true) {\n  const [shop, setShop] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n      setLoading(true);\n      setShop(await Becca.getShop());\n      setLoaded(true);\n    } catch (e) {\n      if (error) {\n        console.error(e);\n        Snackbar.show('Errror Occured', 'error');\n      } else {\n        setLoaded(true);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  return [shop, refresh, loading, loaded];\n}\n\nexport function useShopOverview() {\n  const [overview, setOverview] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n      setLoading(true);\n      setOverview((await Becca.overview()) || {});\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Errror Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return [overview, refresh, loading];\n}\n\nexport function useShopTemplates() {\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n      setLoading(true);\n      const { templates: newTemplates } = await Becca.templates(0, 1000, {}, { createdAt: -1 });\n      setTemplates(newTemplates);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  return [templates, refresh, loading];\n}\n\nexport function useShopShippingPartners() {\n  const [partners, setPartners] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n      setLoading(true);\n      const data = await Becca.getShippingPartners();\n      setPartners(data);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  return [partners, refresh, loading];\n}\n\nexport function useShopPaymentPartners() {\n  const [partners, setPartners] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const refresh = useCallback(async () => {\n    try {\n      if (loading) {\n        return;\n      }\n      setLoading(true);\n      const { accounts = [] } = await Becca.getShop();\n      const stripe = accounts.find(x => x.name === 'stripe');\n      const rzpay = accounts.find(x => x.name === 'razorpay');\n      const paypal = accounts.find(x => x.name === 'paypal');\n      if (stripe) {\n        stripe.config = {};\n        const data = await Becca.getAccount('stripe');\n        stripe.config = data;\n      }\n      if (rzpay) {\n        rzpay.config = {};\n        const data = await Becca.getAccount('razorpay');\n        rzpay.config = data;\n      }\n      if (paypal) {\n        paypal.config = {};\n        const data = await Becca.getAccount('paypal');\n        paypal.config = data;\n      }\n      setPartners(accounts);\n    } catch (e) {\n      Snackbar.show('Error Occured', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  return [partners, refresh, loading];\n}\n"]},"metadata":{},"sourceType":"module"}