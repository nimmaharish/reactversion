{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/v2/ItemSelectionDrawer.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from \"../../../services/snackbar\";\nimport { SideDrawer } from \"../../shared/SideDrawer\";\nimport { BottomDrawer } from \"../../shared/BottomDrawer\";\nimport { useDesktop, useShop } from \"../../../contexts\";\nimport { useOrderItems } from \"../../../contexts/orderContext\";\nimport { Button, Clickable } from 'phoenix-components';\nimport selectIcon from \"../../../assets/v2/orders/selectv2.svg\";\nimport unSelectIcon from \"../../../assets/v2/orders/unselectV2.svg\";\nimport { useToggle } from \"../../../hooks/common\";\nimport Alert from \"../../shared/alert/Alert\";\nimport styles from \"./ItemSelectionDrawer.module.css\";\nexport function ItemSelectionDrawer({\n  onClose,\n  onSubmit\n}) {\n  _s();\n\n  const isDesktop = useDesktop();\n  const {\n    currency\n  } = useShop();\n  const [selectedItems, setItems] = useState([]);\n  const [open, toggleOpen] = useToggle();\n  const items = useOrderItems();\n  const itemSet = new Set(selectedItems);\n  const Component = isDesktop ? SideDrawer : BottomDrawer;\n  const allSelected = selectedItems.length === items.length;\n\n  const onAdd = item => {\n    const hasPhysicalAndDigital = selectedItems.find(selectedItem => (selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.productType) !== (item === null || item === void 0 ? void 0 : item.productType));\n    const hasMultiDigitalProdcuts = selectedItems.find(selectedItem => (selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.productType) === (item === null || item === void 0 ? void 0 : item.productType) && (item === null || item === void 0 ? void 0 : item.productType) === 'digital');\n\n    if (hasPhysicalAndDigital || hasMultiDigitalProdcuts) {\n      Snackbar.showError(\"Can't select both physical and digital\");\n      return;\n    }\n\n    const set = new Set(selectedItems);\n\n    if (set.has(item)) {\n      set.delete(item);\n    } else {\n      set.add(item);\n    }\n\n    setItems([...set]);\n  };\n\n  const selectAll = () => {\n    const filteredItems = items.filter(product => product.productType === 'physical');\n\n    if (filteredItems.length !== items.length) {\n      Snackbar.showError(\"Can't select both physical and digital\");\n      return;\n    }\n\n    if (allSelected) {\n      setItems([]);\n    } else {\n      setItems(items);\n    }\n  };\n\n  const onSubmitClick = () => {\n    if (selectedItems.length === 0) {\n      toggleOpen();\n      return;\n    }\n\n    onSubmit(selectedItems);\n  };\n\n  const renderItem = item => {\n    var _item$content, _item$content$images$, _item$content2, _item$content3;\n\n    const image = item === null || item === void 0 ? void 0 : (_item$content = item.content) === null || _item$content === void 0 ? void 0 : (_item$content$images$ = _item$content.images[0]) === null || _item$content$images$ === void 0 ? void 0 : _item$content$images$.url;\n    const variant = item === null || item === void 0 ? void 0 : (_item$content2 = item.content) === null || _item$content2 === void 0 ? void 0 : _item$content2.details;\n    const color = item === null || item === void 0 ? void 0 : (_item$content3 = item.content) === null || _item$content3 === void 0 ? void 0 : _item$content3.color;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.imageContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: image,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.firstRow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, item.content.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, currency, ' ', item.discountedAmount)), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.firstRow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, (variant === null || variant === void 0 ? void 0 : variant.name) && (variant === null || variant === void 0 ? void 0 : variant.value) && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.variant,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, variant.name, ' ', \":\", ' ', variant.value), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.quantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, item.quantity, ' ', \"Qty\"), color && (color === null || color === void 0 ? void 0 : color.hex) && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.color,\n      style: {\n        background: color === null || color === void 0 ? void 0 : color.hex\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.select,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: itemSet.has(item) ? selectIcon : unSelectIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  return /*#__PURE__*/React.createElement(Component, {\n    title: \"Choose Items\",\n    backButton: true,\n    onClose: onClose,\n    closeButton: false,\n    button: true,\n    classes: isDesktop ? undefined : {\n      heading: styles.bottomDrawerContainer\n    },\n    onClick: isDesktop ? onSubmitClick : undefined,\n    btnLabel: isDesktop ? 'Next' : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, open && /*#__PURE__*/React.createElement(Alert, {\n    btnText: \"Ok\",\n    text: \"Oops! You haven't ticked the items you'd like to proceed with.\",\n    onClick: toggleOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.borderBottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Clickable, {\n    onClick: selectAll,\n    className: styles.selectAll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, allSelected ? 'Unselect' : 'Select', ' ', \"All\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: allSelected ? selectIcon : unSelectIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, items.map(item => /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => onAdd(item),\n    key: item._id,\n    className: styles.itemContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, renderItem(item)))), !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    label: \"Next\",\n    size: \"large\",\n    bordered: false,\n    onClick: onSubmitClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  })));\n}\n\n_s(ItemSelectionDrawer, \"2SxYmsuprwI6mkc0HMIFIYdSZ4c=\", false, function () {\n  return [useDesktop, useShop, useToggle, useOrderItems];\n});\n\n_c = ItemSelectionDrawer;\nItemSelectionDrawer.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\nItemSelectionDrawer.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemSelectionDrawer\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/v2/ItemSelectionDrawer.jsx"],"names":["React","useState","PropTypes","Snackbar","SideDrawer","BottomDrawer","useDesktop","useShop","useOrderItems","Button","Clickable","useToggle","Alert","styles","ItemSelectionDrawer","onClose","onSubmit","isDesktop","currency","selectedItems","setItems","open","toggleOpen","items","itemSet","Set","Component","allSelected","length","onAdd","item","hasPhysicalAndDigital","find","selectedItem","productType","hasMultiDigitalProdcuts","showError","set","has","delete","add","selectAll","filteredItems","filter","product","onSubmitClick","renderItem","image","content","images","url","variant","details","color","imageContainer","firstRow","title","price","discountedAmount","name","value","quantity","hex","background","select","selectIcon","unSelectIcon","undefined","heading","bottomDrawerContainer","borderBottom","container","map","_id","itemContainer","submit","propTypes","func","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from 'services/snackbar';\nimport { SideDrawer } from 'components/shared/SideDrawer';\nimport { BottomDrawer } from 'components/shared/BottomDrawer';\nimport { useDesktop, useShop } from 'contexts';\nimport { useOrderItems } from 'contexts/orderContext';\nimport { Button, Clickable } from 'phoenix-components';\nimport selectIcon from 'assets/v2/orders/selectv2.svg';\nimport unSelectIcon from 'assets/v2/orders/unselectV2.svg';\nimport { useToggle } from 'hooks/common';\nimport Alert from 'components/shared/alert/Alert';\nimport styles from './ItemSelectionDrawer.module.css';\n\nexport function ItemSelectionDrawer({\n  onClose,\n  onSubmit\n}) {\n  const isDesktop = useDesktop();\n  const { currency } = useShop();\n  const [selectedItems, setItems] = useState([]);\n  const [open, toggleOpen] = useToggle();\n  const items = useOrderItems();\n  const itemSet = new Set(selectedItems);\n  const Component = isDesktop ? SideDrawer : BottomDrawer;\n  const allSelected = selectedItems.length === items.length;\n\n  const onAdd = (item) => {\n    const hasPhysicalAndDigital = selectedItems.find(selectedItem => (\n      selectedItem?.productType !== item?.productType\n    ));\n    const hasMultiDigitalProdcuts = selectedItems.find(selectedItem => (\n      selectedItem?.productType === item?.productType && item?.productType === 'digital'\n    ));\n    if (hasPhysicalAndDigital || hasMultiDigitalProdcuts) {\n      Snackbar.showError(\"Can't select both physical and digital\");\n      return;\n    }\n    const set = new Set(selectedItems);\n    if (set.has(item)) {\n      set.delete(item);\n    } else {\n      set.add(item);\n    }\n    setItems([...set]);\n  };\n\n  const selectAll = () => {\n    const filteredItems = items.filter(product => product.productType === 'physical');\n    if (filteredItems.length !== items.length) {\n      Snackbar.showError(\"Can't select both physical and digital\");\n      return;\n    }\n    if (allSelected) {\n      setItems([]);\n    } else {\n      setItems(items);\n    }\n  };\n\n  const onSubmitClick = () => {\n    if (selectedItems.length === 0) {\n      toggleOpen();\n      return;\n    }\n    onSubmit(selectedItems);\n  };\n\n  const renderItem = item => {\n    const image = item?.content?.images[0]?.url;\n    const variant = item?.content?.details;\n    const color = item?.content?.color;\n    return (\n      <>\n        <div className={styles.imageContainer}>\n          <img src={image} alt=\"\" />\n        </div>\n        <div>\n          <div className={styles.firstRow}>\n            <div className={styles.title}>\n              {item.content.title}\n            </div>\n            <div className={styles.price}>\n              {currency}\n              {' '}\n              {item.discountedAmount}\n            </div>\n          </div>\n          <div className={styles.firstRow}>\n            {variant?.name && variant?.value && (\n              <div className={styles.variant}>\n                {variant.name}\n                {' '}\n                :\n                {' '}\n                {variant.value}\n              </div>\n            )}\n            <div className={styles.quantity}>\n              {item.quantity}\n              {' '}\n              Qty\n            </div>\n            {color && color?.hex && (\n              <div className={styles.color} style={{ background: color?.hex }}>\n              </div>\n            )}\n          </div>\n        </div>\n        <div className={styles.select}>\n          <img src={itemSet.has(item) ? selectIcon : unSelectIcon} alt=\"\" />\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <Component\n      title=\"Choose Items\"\n      backButton\n      onClose={onClose}\n      closeButton={false}\n      button\n      classes={isDesktop ? undefined : {\n        heading: styles.bottomDrawerContainer,\n      }}\n      onClick={isDesktop ? onSubmitClick : undefined}\n      btnLabel={isDesktop ? 'Next' : undefined}\n    >\n      {open && (\n        <Alert\n          btnText=\"Ok\"\n          text=\"Oops! You haven't ticked the items you'd like to proceed with.\"\n          onClick={toggleOpen}\n        />\n      )}\n      {!isDesktop && (\n        <div className={styles.borderBottom} />\n      )}\n      <Clickable onClick={selectAll} className={styles.selectAll}>\n        <span>\n          {allSelected ? 'Unselect' : 'Select'}\n          {' '}\n          All\n        </span>\n        <img src={allSelected ? selectIcon : unSelectIcon} alt=\"\" />\n      </Clickable>\n      <div className={styles.container}>\n        {items.map(item => (\n          <Clickable onClick={() => onAdd(item)} key={item._id} className={styles.itemContainer}>\n            {renderItem(item)}\n          </Clickable>\n        ))}\n      </div>\n      {!isDesktop && (\n        <div className={styles.submit}>\n          <Button fullWidth label=\"Next\" size=\"large\" bordered={false} onClick={onSubmitClick} />\n        </div>\n      )}\n    </Component>\n  );\n}\n\nItemSelectionDrawer.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nItemSelectionDrawer.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}