{"ast":null,"code":"import _defineProperty from \"/home/harish/windo/phoenix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/harish/windo/phoenix/src/layouts/ErrorBoundary.jsx\";\nimport React, { Component } from 'react';\nimport * as Sentry from '@sentry/react';\nimport PropTypes from 'prop-types';\nimport { Dialog, DialogContent, DialogActions, Button } from '@material-ui/core';\nimport { updateWebApp } from \"../utils/app\";\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClick\", async () => {\n      try {\n        await updateWebApp();\n      } catch (e) {\n        document.location.reload(true);\n      }\n    });\n\n    this.state = {\n      hasError: false\n    };\n  } // eslint-disable-next-line no-unused-vars\n\n\n  static getDerivedStateFromError(error) {\n    return {\n      hasError: true\n    };\n  } // eslint-disable-next-line no-unused-vars\n\n\n  componentDidCatch(error, errorInfo) {\n    if (error !== null && error !== void 0 && error.isAxiosError) {\n      return;\n    }\n\n    Sentry.captureException(error);\n  }\n\n  render() {\n    const {\n      hasError\n    } = this.state;\n    const {\n      children\n    } = this.props;\n\n    if (hasError) {\n      return /*#__PURE__*/React.createElement(Dialog, {\n        open: true,\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogContent, {\n        className: \"textCenter bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }\n      }, \"Something went wrong.\"), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        variant: \"contained\",\n        fullWidth: true,\n        onClick: this.onClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }\n      }, \"Try again.\")));\n    }\n\n    return children;\n  }\n\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport default ErrorBoundary;","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/layouts/ErrorBoundary.jsx"],"names":["React","Component","Sentry","PropTypes","Dialog","DialogContent","DialogActions","Button","updateWebApp","ErrorBoundary","constructor","props","e","document","location","reload","state","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","isAxiosError","captureException","render","children","onClick","propTypes","any","isRequired"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,MAAZ,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SACEC,MADF,EACUC,aADV,EACyBC,aADzB,EACwCC,MADxC,QAEO,mBAFP;AAGA,SAASC,YAAT;;AAEA,MAAMC,aAAN,SAA4BR,SAA5B,CAAsC;AACpCS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,qCAkBT,YAAY;AACpB,UAAI;AACF,cAAMH,YAAY,EAAlB;AACD,OAFD,CAEE,OAAOI,CAAP,EAAU;AACVC,QAAAA,QAAQ,CAACC,QAAT,CAAkBC,MAAlB,CAAyB,IAAzB;AACD;AACF,KAxBkB;;AAEjB,SAAKC,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAb;AACD,GAJmC,CAMpC;;;AAC+B,SAAxBC,wBAAwB,CAACC,KAAD,EAAQ;AACrC,WAAO;AAAEF,MAAAA,QAAQ,EAAE;AAAZ,KAAP;AACD,GATmC,CAWpC;;;AACAG,EAAAA,iBAAiB,CAACD,KAAD,EAAQE,SAAR,EAAmB;AAClC,QAAIF,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEG,YAAX,EAAyB;AACvB;AACD;;AACDpB,IAAAA,MAAM,CAACqB,gBAAP,CAAwBJ,KAAxB;AACD;;AAUDK,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEP,MAAAA;AAAF,QAAe,KAAKD,KAA1B;AACA,UAAM;AAAES,MAAAA;AAAF,QAAe,KAAKd,KAA1B;;AACA,QAAIM,QAAJ,EAAc;AACZ,0BACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAE,IAAd;AAAoB,QAAA,SAAS,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,aAAD;AAAe,QAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAIE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAC,WADR;AAEE,QAAA,OAAO,EAAC,WAFV;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,OAAO,EAAE,KAAKS,OAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CAJF,CADF;AAiBD;;AACD,WAAOD,QAAP;AACD;;AAlDmC;;AAqDtChB,aAAa,CAACkB,SAAd,GAA0B;AACxBF,EAAAA,QAAQ,EAAEtB,SAAS,CAACyB,GAAV,CAAcC;AADA,CAA1B;AAIA,eAAepB,aAAf","sourcesContent":["import React, { Component } from 'react';\nimport * as Sentry from '@sentry/react';\nimport PropTypes from 'prop-types';\nimport {\n  Dialog, DialogContent, DialogActions, Button\n} from '@material-ui/core';\nimport { updateWebApp } from 'utils/app';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  componentDidCatch(error, errorInfo) {\n    if (error?.isAxiosError) {\n      return;\n    }\n    Sentry.captureException(error);\n  }\n\n  onClick = async () => {\n    try {\n      await updateWebApp();\n    } catch (e) {\n      document.location.reload(true);\n    }\n  }\n\n  render() {\n    const { hasError } = this.state;\n    const { children } = this.props;\n    if (hasError) {\n      return (\n        <Dialog open={true} fullWidth>\n          <DialogContent className=\"textCenter bold\">\n            Something went wrong.\n          </DialogContent>\n          <DialogActions>\n            <Button\n              color=\"secondary\"\n              variant=\"contained\"\n              fullWidth\n              onClick={this.onClick}\n            >\n              Try again.\n            </Button>\n          </DialogActions>\n        </Dialog>\n      );\n    }\n    return children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any.isRequired,\n};\n\nexport default ErrorBoundary;\n"]},"metadata":{},"sourceType":"module"}