{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Becca } from \"../api\";\nimport Snackbar from \"../services/snackbar\";\nimport Loader from \"../services/loader\";\nexport function useProducts(page = 0, filters = {}, sorts = {}) {\n  _s();\n\n  const [products, setProducts] = useState(null);\n\n  const refresh = async () => {\n    try {\n      const {\n        data = []\n      } = await Becca.getProducts(page, filters, sorts);\n      setProducts(data);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Errror Occured', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, []);\n  return [products, refresh];\n}\n\n_s(useProducts, \"8/Hhf2onsmvGCykHlTCLKPkfVcY=\");\n\nexport function useInfiniteProducts(filters = {}, sorts = {}) {\n  _s2();\n\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [isEmptyProducts, setIsEmptyProducts] = useState(false);\n\n  const loadMore = async ({\n    stopIndex = 10\n  } = {}) => {\n    if (loading) {\n      return;\n    }\n\n    const newPage = Math.floor(stopIndex / 10);\n\n    if (newPage <= page) {\n      return;\n    }\n\n    if (!hasMore) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      if (page === 0) {\n        Loader.show();\n      }\n\n      const {\n        data = []\n      } = await Becca.getProducts(page, filters, sorts);\n      setProducts([...(products || []), ...data]);\n\n      if (page === 0 && (data === null || data === void 0 ? void 0 : data.length) === 0) {\n        setIsEmptyProducts(true);\n      }\n\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const refresh = () => {\n    setPage(0);\n    setHasMore(true);\n    setProducts([]);\n    setTimeout(loadMore, 0);\n  };\n\n  useEffect(() => {\n    setPage(0);\n    refresh();\n  }, [JSON.stringify(filters), JSON.stringify(sorts)]);\n  return [products, loadMore, hasMore, loading, refresh, isEmptyProducts];\n}\n\n_s2(useInfiniteProducts, \"Epoe+mCljfUH118jYHT3Z2TUI8A=\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/hooks/product.js"],"names":["useEffect","useState","Becca","Snackbar","Loader","useProducts","page","filters","sorts","products","setProducts","refresh","data","getProducts","e","console","error","show","useInfiniteProducts","loading","setLoading","setPage","hasMore","setHasMore","isEmptyProducts","setIsEmptyProducts","loadMore","stopIndex","newPage","Math","floor","length","hide","setTimeout","JSON","stringify"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Becca } from 'api';\nimport Snackbar from 'services/snackbar';\nimport Loader from 'services/loader';\n\nexport function useProducts(page = 0, filters = {}, sorts = {}) {\n  const [products, setProducts] = useState(null);\n\n  const refresh = async () => {\n    try {\n      const { data = [] } = await Becca.getProducts(page, filters, sorts);\n      setProducts(data);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Errror Occured', 'error');\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, []);\n\n  return [products, refresh];\n}\n\nexport function useInfiniteProducts(filters = {}, sorts = {}) {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [isEmptyProducts, setIsEmptyProducts] = useState(false);\n  const loadMore = async ({ stopIndex = 10 } = {}) => {\n    if (loading) {\n      return;\n    }\n    const newPage = Math.floor(stopIndex / 10);\n    if (newPage <= page) {\n      return;\n    }\n    if (!hasMore) {\n      return;\n    }\n    try {\n      setLoading(true);\n      if (page === 0) {\n        Loader.show();\n      }\n      const { data = [] } = await Becca.getProducts(page, filters, sorts);\n      setProducts([...products || [], ...data]);\n      if (page === 0 && data?.length === 0) {\n        setIsEmptyProducts(true);\n      }\n      if (data.length === 0) {\n        setHasMore(false);\n      }\n      setPage(page + 1);\n    } catch (e) {\n      console.error(e);\n      Snackbar.show('Error Occurred', 'error');\n    } finally {\n      Loader.hide();\n      setLoading(false);\n    }\n  };\n\n  const refresh = () => {\n    setPage(0);\n    setHasMore(true);\n    setProducts([]);\n    setTimeout(loadMore, 0);\n  };\n\n  useEffect(() => {\n    setPage(0);\n    refresh();\n  }, [JSON.stringify(filters), JSON.stringify(sorts)]);\n\n  return [products, loadMore, hasMore, loading, refresh, isEmptyProducts];\n}\n"]},"metadata":{},"sourceType":"module"}