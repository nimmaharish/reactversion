{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/stepper/Step3.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useOrder } from \"../../../contexts/orderContext\";\nimport PropTypes from 'prop-types';\nimport { Button } from 'phoenix-components';\nimport cx from 'classnames';\nimport { useDefaultAddress } from \"../../../contexts/userContext\";\nimport { useUser } from \"../../../contexts\";\nimport locIcon from \"../../../assets/images/orders/details/location.svg\";\nimport nextIcon from \"../../../assets/images/orders/details/next.svg\"; // import { useQueryParams } from 'hooks';\n\nimport { useHistory } from 'react-router-dom';\nimport moment from 'moment';\nimport Input from \"../../common/Input\";\nimport SelectSearch from 'react-select';\nimport SnackBar from \"../../../services/snackbar\";\nimport Loader from \"../../../services/loader\";\nimport { InputAdornment } from '@material-ui/core';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { Factory } from \"../../../api\";\nimport styles from \"./Step.module.css\";\nexport function Step3({\n  handleBack,\n  groupId\n}) {\n  _s();\n\n  const order = useOrder(); // const params = useQueryParams();\n\n  const history = useHistory();\n  const defAddress = useDefaultAddress();\n  const user = useUser();\n  const [startAt, setStartAt] = useState(null);\n  const [endAt, setEndAt] = useState(null);\n  const [buildingType, setBuildingType] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const options = ['Front Door', 'Back Door', 'Security', 'Other'].map(x => ({\n    label: x,\n    value: x\n  }));\n\n  const toBank = () => {// params.set('openAddress', 'true');\n    // history.push({ pathname: 'manage', search: params.toString() });\n  };\n\n  const info = `Your pickup has been scheduled on ${moment(startAt).format('MMMM Do YYYY, h:mm a')} - \n  ${moment(endAt).format('MMMM Do YYYY, h:mm a')}. Download your Shipping Label and Print it, \n  attach it on your shipment, keep it ready for the PickUp`;\n\n  const createPickup = async () => {\n    if (buildingType.length === 0) {\n      SnackBar.show('Please select building location type', 'error');\n      return;\n    }\n\n    if (buildingType === 'Other' && instructions.length < 20) {\n      SnackBar.show('Please enter instructions more than 20 characters', 'error');\n      return;\n    }\n\n    try {\n      const payload = {\n        startAt: moment(startAt).seconds(0).milliseconds(0).toISOString(),\n        endAt: moment(endAt).seconds(0).milliseconds(0).toISOString(),\n        instructions,\n        buildingLocationType: buildingType,\n        email: user.email\n      };\n      Loader.show();\n      await Factory.createPickup(order._id, groupId, payload);\n      history.push({\n        pathname: `/orders/${order._id}/thankyou`,\n        state: {\n          info,\n          groupId,\n          id: order._id\n        }\n      });\n    } catch (e) {\n      var _e$response, _e$response$data, _e$response3, _e$response3$data, _e$response3$data$mes;\n\n      if (e !== null && e !== void 0 && (_e$response = e.response) !== null && _e$response !== void 0 && (_e$response$data = _e$response.data) !== null && _e$response$data !== void 0 && _e$response$data.message) {\n        var _e$response2, _e$response2$data;\n\n        SnackBar.show(e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message, 'error');\n        return;\n      }\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : (_e$response3$data$mes = _e$response3$data.messages) === null || _e$response3$data$mes === void 0 ? void 0 : _e$response3$data$mes.length) > 0) {\n        history.push({\n          pathname: `/orders/${order._id}/thankyou`,\n          state: {\n            info,\n            groupId,\n            id: order._id\n          }\n        });\n        SnackBar.show('Shipment created successfully');\n        return;\n      }\n\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.couriersSection, styles.alterHeight),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: locIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.center1),\n    onClick: toBank,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \" Pickup Location \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addressText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, ' ', `${defAddress === null || defAddress === void 0 ? void 0 : defAddress.addressLine1}  ${defAddress === null || defAddress === void 0 ? void 0 : defAddress.addressLine2} ${defAddress === null || defAddress === void 0 ? void 0 : defAddress.pincode}`, ' ')), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.right1),\n    onClick: toBank,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: nextIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.head3),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \"Select Building Location Type\"), /*#__PURE__*/React.createElement(SelectSearch, {\n    className: styles.select,\n    classNamePrefix: \"react-select\",\n    placeholder: \"Select\",\n    value: options.find(x => x.value === buildingType),\n    onChange: e => setBuildingType(e.value),\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), buildingType === 'Other' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.head3),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Delivery Instructions\"), /*#__PURE__*/React.createElement(Input, {\n    value: instructions,\n    placeholder: \"Type here...\",\n    setValue: e => setInstructions(e),\n    InputProps: {\n      classes: {\n        input: cx(styles.slug, styles.single)\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.head4),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"Select Date & Time\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.head3),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, \"From\"), /*#__PURE__*/React.createElement(DateTimePicker, {\n    clearable: true,\n    fullWidth: true,\n    value: startAt,\n    disablePast: true,\n    InputProps: {\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        className: cx(styles.adorn),\n        position: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: nextIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      })),\n      classes: {\n        input: cx(styles.slug, styles.single),\n        root: styles.grey1\n      }\n    },\n    onChange: setStartAt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.head3),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, \"To\"), /*#__PURE__*/React.createElement(DateTimePicker, {\n    clearable: true,\n    fullWidth: true,\n    minDate: startAt,\n    value: endAt,\n    InputProps: {\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        className: cx(styles.adorn),\n        position: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: nextIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      })),\n      classes: {\n        input: cx(styles.slug, styles.single),\n        root: styles.grey1\n      }\n    },\n    onChange: setEndAt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.actions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, \" Confirm your Door-Step Pickup \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleBack,\n    type: \"large\",\n    primary: false,\n    label: \"No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => createPickup(true),\n    type: \"large\",\n    label: \"Yes, Proceed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }))));\n}\n\n_s(Step3, \"IAik5dRNs+9B0P6gpfrMrFX/myc=\", false, function () {\n  return [useOrder, useHistory, useDefaultAddress, useUser];\n});\n\n_c = Step3;\nStep3.propTypes = {\n  handleBack: PropTypes.func.isRequired,\n  groupId: PropTypes.string\n};\nStep3.defaultProps = {\n  groupId: ''\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Step3\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/stepper/Step3.jsx"],"names":["React","useState","useOrder","PropTypes","Button","cx","useDefaultAddress","useUser","useHistory","moment","Input","SelectSearch","SnackBar","Loader","InputAdornment","DateTimePicker","Factory","styles","Step3","handleBack","groupId","order","history","defAddress","user","startAt","setStartAt","endAt","setEndAt","buildingType","setBuildingType","instructions","setInstructions","options","map","x","label","value","toBank","info","format","createPickup","length","show","payload","seconds","milliseconds","toISOString","buildingLocationType","email","_id","push","pathname","state","id","e","response","data","message","messages","hide","couriersSection","alterHeight","address","left1","locIcon","center1","addressText","addressLine1","addressLine2","pincode","right1","nextIcon","head3","select","find","classes","input","slug","single","head4","endAdornment","adorn","root","grey1","actions","buttons","propTypes","func","isRequired","string","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useOrder } from 'contexts/orderContext';\nimport PropTypes from 'prop-types';\nimport { Button } from 'phoenix-components';\nimport cx from 'classnames';\nimport { useDefaultAddress } from 'contexts/userContext';\nimport { useUser } from 'contexts';\nimport locIcon from 'assets/images/orders/details/location.svg';\nimport nextIcon from 'assets/images/orders/details/next.svg';\n// import { useQueryParams } from 'hooks';\nimport { useHistory } from 'react-router-dom';\nimport moment from 'moment';\nimport Input from 'components/common/Input';\nimport SelectSearch from 'react-select';\nimport SnackBar from 'services/snackbar';\nimport Loader from 'services/loader';\nimport { InputAdornment } from '@material-ui/core';\nimport {\n  DateTimePicker,\n} from '@material-ui/pickers';\nimport { Factory } from 'api';\nimport styles from './Step.module.css';\n\nexport function Step3({ handleBack, groupId }) {\n  const order = useOrder();\n  // const params = useQueryParams();\n  const history = useHistory();\n  const defAddress = useDefaultAddress();\n  const user = useUser();\n  const [startAt, setStartAt] = useState(null);\n  const [endAt, setEndAt] = useState(null);\n  const [buildingType, setBuildingType] = useState('');\n  const [instructions, setInstructions] = useState('');\n\n  const options = ['Front Door', 'Back Door', 'Security', 'Other'].map(x => ({ label: x, value: x }));\n\n  const toBank = () => {\n    // params.set('openAddress', 'true');\n    // history.push({ pathname: 'manage', search: params.toString() });\n  };\n\n  const info = `Your pickup has been scheduled on ${moment(startAt).format('MMMM Do YYYY, h:mm a')} - \n  ${moment(endAt).format('MMMM Do YYYY, h:mm a')}. Download your Shipping Label and Print it, \n  attach it on your shipment, keep it ready for the PickUp`;\n\n  const createPickup = async () => {\n    if (buildingType.length === 0) {\n      SnackBar.show('Please select building location type', 'error');\n      return;\n    }\n    if (buildingType === 'Other' && instructions.length < 20) {\n      SnackBar.show('Please enter instructions more than 20 characters', 'error');\n      return;\n    }\n    try {\n      const payload = {\n        startAt: moment(startAt).seconds(0).milliseconds(0).toISOString(),\n        endAt: moment(endAt).seconds(0).milliseconds(0).toISOString(),\n        instructions,\n        buildingLocationType: buildingType,\n        email: user.email,\n      };\n      Loader.show();\n      await Factory.createPickup(order._id, groupId, payload);\n      history.push({ pathname: `/orders/${order._id}/thankyou`, state: { info, groupId, id: order._id } });\n    } catch (e) {\n      if (e?.response?.data?.message) {\n        SnackBar.show(e?.response?.data?.message, 'error');\n        return;\n      }\n      if (e?.response?.data?.messages?.length > 0) {\n        history.push({ pathname: `/orders/${order._id}/thankyou`, state: { info, groupId, id: order._id } });\n        SnackBar.show('Shipment created successfully');\n        return;\n      }\n\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  return (\n    <div className={cx(styles.couriersSection, styles.alterHeight)}>\n      <div className={styles.address}>\n        <div className={styles.left1}>\n          <img src={locIcon} alt=\"\" />\n        </div>\n        <div className={cx(styles.center1)} onClick={toBank}>\n          <div> Pickup Location </div>\n          <div className={styles.addressText}>\n            {' '}\n            {`${defAddress?.addressLine1}  ${defAddress?.addressLine2} ${defAddress?.pincode}`}\n            {' '}\n          </div>\n        </div>\n        <div className={cx(styles.right1)} onClick={toBank}>\n          <img src={nextIcon} alt=\"\" />\n        </div>\n      </div>\n      <div className={cx(styles.head3)}>Select Building Location Type</div>\n      <SelectSearch\n        className={styles.select}\n        classNamePrefix=\"react-select\"\n        placeholder=\"Select\"\n        value={options.find(x => x.value === buildingType)}\n        onChange={(e) => setBuildingType(e.value)}\n        options={options}\n      />\n      {buildingType === 'Other' && (\n        <>\n          <div className={cx(styles.head3)}>Delivery Instructions</div>\n          <Input\n            value={instructions}\n            placeholder=\"Type here...\"\n            setValue={(e) => setInstructions(e)}\n            InputProps={{\n              classes: {\n                input: cx(styles.slug, styles.single),\n              },\n            }}\n          />\n        </>\n      )}\n      <div className={cx(styles.head4)}>Select Date & Time</div>\n      <div className={cx(styles.head3)}>From</div>\n      <DateTimePicker\n        clearable\n        fullWidth\n        value={startAt}\n        disablePast={true}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment className={cx(styles.adorn)} position=\"end\">\n              <img src={nextIcon} alt=\"\" />\n            </InputAdornment>\n          ),\n          classes: {\n            input: cx(styles.slug, styles.single),\n            root: styles.grey1\n          },\n        }}\n        onChange={setStartAt}\n      />\n      <div className={cx(styles.head3)}>To</div>\n      <DateTimePicker\n        clearable\n        fullWidth\n        minDate={startAt}\n        value={endAt}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment className={cx(styles.adorn)} position=\"end\">\n              <img src={nextIcon} alt=\"\" />\n            </InputAdornment>\n          ),\n          classes: {\n            input: cx(styles.slug, styles.single),\n            root: styles.grey1\n          },\n        }}\n        onChange={setEndAt}\n      />\n      <div className={styles.actions}>\n        <div className={styles.label}> Confirm your Door-Step Pickup </div>\n        <div className={styles.buttons}>\n          <Button\n            onClick={handleBack}\n            type=\"large\"\n            primary={false}\n            label=\"No\"\n          />\n          <Button\n            onClick={() => createPickup(true)}\n            type=\"large\"\n            label=\"Yes, Proceed\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nStep3.propTypes = {\n  handleBack: PropTypes.func.isRequired,\n  groupId: PropTypes.string,\n};\n\nStep3.defaultProps = {\n  groupId: ''\n};\n"]},"metadata":{},"sourceType":"module"}