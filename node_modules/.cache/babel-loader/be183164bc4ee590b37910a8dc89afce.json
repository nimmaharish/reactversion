{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/overview/Stepper.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport DIcon from \"../../assets/onboarding/done.svg\";\nimport PIcon from \"../../assets/onboarding/products.svg\";\nimport PDIcon from \"../../assets/onboarding/productsDisabled.svg\";\nimport { StepConnector } from '@material-ui/core';\nimport BDIcon from \"../../assets/onboarding/bankDisabled.svg\";\nimport PlusIcon from \"../../assets/onboarding/plus.svg\";\nimport PlusDisabledIcon from \"../../assets/onboarding/plusDisabled.svg\";\nimport { useIsPaymentsEnabled } from \"../../contexts/userContext\";\nimport { useProducts } from \"../../hooks\";\nimport { useHistory } from 'react-router-dom';\nimport SemiCircleProgressBar from 'react-progressbar-semicircle';\nimport { Button, Clickable } from 'phoenix-components';\nimport cx from 'classnames';\nimport Storage from \"../../services/storage\";\nimport { CoachMark } from \"../coachMarks/CoachMark\";\nimport { CmText } from \"../../constants/coachmarks\";\nimport { useDesktop } from \"../../contexts\";\nimport styles from \"./Stepper.module.css\";\nexport default function VerticalLinearStepper() {\n  _s();\n\n  const history = useHistory();\n  const isDesktop = useDesktop();\n  const sellerProfile = true;\n  const [products] = useProducts(0, {\n    status: {\n      $in: ['live', 'created']\n    }\n  }, {\n    createdAt: 1\n  });\n  const isEmptyroducts = (products === null || products === void 0 ? void 0 : products.length) === 0;\n  const isPaymentsActive = useIsPaymentsEnabled();\n  const [elements, setElements] = useState([]);\n  const [current, setCurrent] = useState(null);\n  const overviewRef = useRef();\n  const active = 1;\n  const steps = ['Add Products', 'Choose Payment Modes'];\n\n  const percentage = () => {\n    let val = 40;\n\n    if (!isEmptyroducts) {\n      val += 30;\n    }\n\n    if (isPaymentsActive) {\n      val += 30;\n    }\n\n    console.log(val);\n    return val;\n  };\n\n  const getStepIcon = i => {\n    if (i === 0) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        id: \"stepper\",\n        className: styles.iconActive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: !isEmptyroducts ? DIcon : active === 1 ? PIcon : PDIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    if (i === 1) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: isPaymentsActive ? styles.iconActive : active === 1 ? styles.iconPassive : styles.iconInactive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: isPaymentsActive ? DIcon : active === 1 ? BDIcon : BDIcon,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }));\n    }\n  };\n\n  const getActions = i => {\n    if (i === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }\n      }, (products === null || products === void 0 ? void 0 : products.length) === 0 && /*#__PURE__*/React.createElement(Button, {\n        primary: false,\n        label: \"Add Products\",\n        size: \"small\",\n        onClick: () => {\n          history.push({\n            pathname: '/products/create'\n          });\n        },\n        disabled: active !== 1,\n        className: active !== 1 ? styles.disabledButton : '',\n        startIcon: active !== 1 ? PlusDisabledIcon : PlusIcon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      }), (products === null || products === void 0 ? void 0 : products.length) > 0 && /*#__PURE__*/React.createElement(Clickable, {\n        className: styles.minW,\n        onClick: () => {\n          history.push('/products');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, \"View Products\"));\n    }\n\n    if (i === 1) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, isPaymentsActive && /*#__PURE__*/React.createElement(Clickable, {\n        className: styles.minW,\n        onClick: () => {\n          history.push({\n            pathname: '/manage/paymentModes'\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }, \"View Payment Settings\"), !isPaymentsActive && /*#__PURE__*/React.createElement(Button, {\n        primary: false,\n        disabled: active !== 1,\n        size: \"small\",\n        className: active !== 1 ? styles.disabledButton : '',\n        label: \"Activate Payments\",\n        startIcon: active !== 1 ? PlusDisabledIcon : PlusIcon,\n        onClick: () => {\n          history.push({\n            pathname: '/manage/paymentModes'\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }));\n    }\n  };\n\n  const getStepContent = step => {\n    switch (step) {\n      case 0:\n        if (!isEmptyroducts) {\n          return 'Woohoo! You just added products to your shop';\n        }\n\n        return 'Go on and stock your shop with products';\n\n      case 1:\n        if (isPaymentsActive) {\n          return 'You\\'re ready to accept payments now!';\n        }\n\n        return 'Decide how you want to receive payments for your orders';\n\n      default:\n        return 'Add Products';\n\n      case 2:\n        if (!sellerProfile) {\n          return 'Woohoo! You just added products to your shop';\n        }\n\n    }\n  };\n\n  useEffect(() => {\n    if (!overviewRef.current) {\n      return;\n    }\n\n    const ids = Storage.getNotWatchedCoachMarks();\n    const el = ids.map(x => document.getElementById(x));\n    const mapped = ids.map((x, i) => ({\n      [x]: el[i]\n    }));\n    setElements(mapped);\n    setCurrent(0);\n  }, [overviewRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.percent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SemiCircleProgressBar, {\n    stroke: \"#F5603F\",\n    strokeWidth: \"15\",\n    background: \"rgba(256,256,256,0.5)\",\n    percentage: percentage(),\n    showPercentValue: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.head,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, \"Setup Progress\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, \"Complete these steps to launch your shop!\"), /*#__PURE__*/React.createElement(Stepper, {\n    className: styles.stepper,\n    activeStep: active,\n    orientation: \"vertical\",\n    connector: /*#__PURE__*/React.createElement(StepConnector, {\n      classes: {\n        line: styles.stepRoot\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, steps.map((label, index) => /*#__PURE__*/React.createElement(Step, {\n    expanded: true,\n    active: active,\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    ref: overviewRef,\n    StepIconComponent: () => getStepIcon(index),\n    StepIconProps: {\n      classes: {\n        root: styles.stepRoot,\n        active: styles.stepActive,\n        completed: styles.stepActive\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.label, {\n      [styles.disabledLabel]: active < index\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, label)), /*#__PURE__*/React.createElement(StepContent, {\n    classes: {\n      root: styles.muiStepContent\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, getStepContent(index)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 21\n    }\n  }, getActions(index))))))), isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.percent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SemiCircleProgressBar, {\n    stroke: \"#ffffff\",\n    strokeWidth: \"15\",\n    background: \"rgba(256,256,256,0.5)\",\n    percentage: percentage(),\n    showPercentValue: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.head,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, \"Setup Progress\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, \"Complete these steps to launch your shop!\"), /*#__PURE__*/React.createElement(Stepper, {\n    className: styles.stepper,\n    activeStep: active,\n    orientation: \"horizontal\",\n    connector: /*#__PURE__*/React.createElement(StepConnector, {\n      classes: {\n        line: styles.horizontalLine\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, steps.map((label, index) => /*#__PURE__*/React.createElement(Step, {\n    expanded: true,\n    active: active,\n    key: label,\n    className: styles.stepHorizontal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    ref: overviewRef,\n    StepIconComponent: () => getStepIcon(index),\n    StepIconProps: {\n      classes: {\n        root: styles.stepRoot,\n        active: styles.stepActive,\n        completed: styles.stepActive\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.label, {\n      [styles.disabledLabel]: active < index\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 19\n    }\n  }, label), /*#__PURE__*/React.createElement(StepContent, {\n    classes: {\n      root: styles.muiStepContent\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 19\n    }\n  }, getStepContent(index)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 19\n    }\n  }, getActions(index)))))), elements.length > 0 && current !== null && /*#__PURE__*/React.createElement(CoachMark, {\n    title: CmText[Object.keys(elements[current])[0]].title,\n    subTitle: CmText[Object.keys(elements[current])[0]].sub,\n    onSelect: () => {\n      const key = Object.keys(elements[current])[0];\n      Storage.updateWatchedCoachMarks(key);\n\n      if (elements[current + 1]) {\n        setCurrent(current + 1);\n        return;\n      }\n\n      setElements([]);\n    },\n    id: Object.keys(elements[current])[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }));\n}\n\n_s(VerticalLinearStepper, \"DiNV6q5i6OP45cqlStz7WSjPgy8=\", false, function () {\n  return [useHistory, useDesktop, useProducts, useIsPaymentsEnabled];\n});\n\n_c = VerticalLinearStepper;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerticalLinearStepper\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/overview/Stepper.jsx"],"names":["React","useState","useEffect","useRef","Stepper","Step","StepLabel","StepContent","StepConnector","useIsPaymentsEnabled","useProducts","useHistory","SemiCircleProgressBar","Button","Clickable","cx","Storage","CoachMark","CmText","useDesktop","styles","VerticalLinearStepper","history","isDesktop","sellerProfile","products","status","$in","createdAt","isEmptyroducts","length","isPaymentsActive","elements","setElements","current","setCurrent","overviewRef","active","steps","percentage","val","console","log","getStepIcon","i","iconActive","DIcon","PIcon","PDIcon","iconPassive","iconInactive","BDIcon","getActions","push","pathname","disabledButton","PlusDisabledIcon","PlusIcon","minW","getStepContent","step","ids","getNotWatchedCoachMarks","el","map","x","document","getElementById","mapped","root","percent","head","subHead","stepper","line","stepRoot","label","index","classes","stepActive","completed","disabledLabel","muiStepContent","text","horizontalLine","stepHorizontal","Object","keys","title","sub","key","updateWatchedCoachMarks"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport DIcon from 'assets/onboarding/done.svg';\nimport PIcon from 'assets/onboarding/products.svg';\nimport PDIcon from 'assets/onboarding/productsDisabled.svg';\nimport { StepConnector } from '@material-ui/core';\nimport BDIcon from 'assets/onboarding/bankDisabled.svg';\nimport PlusIcon from 'assets/onboarding/plus.svg';\nimport PlusDisabledIcon from 'assets/onboarding/plusDisabled.svg';\nimport { useIsPaymentsEnabled } from 'contexts/userContext';\nimport { useProducts, } from 'hooks';\nimport { useHistory } from 'react-router-dom';\nimport SemiCircleProgressBar from 'react-progressbar-semicircle';\nimport { Button, Clickable } from 'phoenix-components';\nimport cx from 'classnames';\nimport Storage from 'services/storage';\nimport { CoachMark } from 'components/coachMarks/CoachMark';\nimport { CmText } from 'constants/coachmarks';\nimport { useDesktop } from 'contexts';\nimport styles from './Stepper.module.css';\n\nexport default function VerticalLinearStepper() {\n  const history = useHistory();\n  const isDesktop = useDesktop();\n  const sellerProfile = true;\n  const [products] = useProducts(0, {\n    status: {\n      $in: ['live', 'created']\n    }\n  }, { createdAt: 1 });\n  const isEmptyroducts = products?.length === 0;\n  const isPaymentsActive = useIsPaymentsEnabled();\n  const [elements, setElements] = useState([]);\n  const [current, setCurrent] = useState(null);\n  const overviewRef = useRef();\n\n  const active = 1;\n\n  const steps = ['Add Products', 'Choose Payment Modes'];\n\n  const percentage = () => {\n    let val = 40;\n    if (!isEmptyroducts) {\n      val += 30;\n    }\n    if (isPaymentsActive) {\n      val += 30;\n    }\n    console.log(val);\n    return val;\n  };\n\n  const getStepIcon = (i) => {\n    if (i === 0) {\n      return (\n        <span\n          id=\"stepper\"\n          className={styles.iconActive}>\n          <img\n            src={(!isEmptyroducts ? DIcon : (active === 1 ? PIcon : PDIcon))}\n            alt=\"\" />\n        </span>\n      );\n    }\n    if (i === 1) {\n      return (\n        <span\n          className={(isPaymentsActive ? styles.iconActive : (active === 1 ? styles.iconPassive : styles.iconInactive))}\n        >\n          <img\n            src={(isPaymentsActive ? DIcon : (active === 1 ? BDIcon : BDIcon))}\n            alt=\"\"\n          />\n        </span>\n      );\n    }\n  };\n\n  const getActions = (i) => {\n    if (i === 0) {\n      return (\n        <div>\n          {products?.length === 0 && (\n            <Button\n              primary={false}\n              label=\"Add Products\"\n              size=\"small\"\n              onClick={() => {\n                history.push({ pathname: '/products/create' });\n              }}\n              disabled={active !== 1}\n              className={active !== 1 ? styles.disabledButton : ''}\n              startIcon={active !== 1 ? PlusDisabledIcon : PlusIcon}\n            />\n          )}\n          {products?.length > 0 && (\n            <Clickable\n              className={styles.minW}\n              onClick={() => {\n                history.push('/products');\n              }}\n            >\n              View Products\n            </Clickable>\n          )}\n        </div>\n      );\n    }\n    if (i === 1) {\n      return (\n        <>\n          {isPaymentsActive && (\n            <Clickable\n              className={styles.minW}\n              onClick={() => {\n                history.push({ pathname: '/manage/paymentModes' });\n              }}\n            >\n              View Payment Settings\n            </Clickable>\n          )}\n          {!isPaymentsActive && (\n            <Button\n              primary={false}\n              disabled={active !== 1}\n              size=\"small\"\n              className={active !== 1 ? styles.disabledButton : ''}\n              label=\"Activate Payments\"\n              startIcon={active !== 1 ? PlusDisabledIcon : PlusIcon}\n              onClick={() => {\n                history.push({ pathname: '/manage/paymentModes' });\n              }}\n            />\n          )}\n        </>\n      );\n    }\n  };\n\n  const getStepContent = (step) => {\n    switch (step) {\n      case 0:\n        if (!isEmptyroducts) {\n          return 'Woohoo! You just added products to your shop';\n        }\n        return 'Go on and stock your shop with products';\n      case 1:\n        if (isPaymentsActive) {\n          return 'You\\'re ready to accept payments now!';\n        }\n        return 'Decide how you want to receive payments for your orders';\n      default:\n        return 'Add Products';\n      case 2:\n        if (!sellerProfile) {\n          return 'Woohoo! You just added products to your shop';\n        }\n    }\n  };\n\n  useEffect(() => {\n    if (!overviewRef.current) {\n      return;\n    }\n    const ids = Storage.getNotWatchedCoachMarks();\n    const el = ids.map(x => (document.getElementById(x)));\n    const mapped = ids.map((x, i) => ({ [x]: el[i] }));\n    setElements(mapped);\n    setCurrent(0);\n  }, [overviewRef]);\n\n  return (\n    <>\n      {!isDesktop\n        && (\n          <div className={styles.root}>\n            <div className={styles.percent}>\n              <SemiCircleProgressBar\n                stroke=\"#F5603F\"\n                strokeWidth=\"15\"\n                background=\"rgba(256,256,256,0.5)\"\n                percentage={percentage()}\n                showPercentValue />\n            </div>\n            <div className={styles.head}>Setup Progress</div>\n            <div className={styles.subHead}>Complete these steps to launch your shop!</div>\n            <Stepper\n              className={styles.stepper}\n              activeStep={active}\n              orientation=\"vertical\"\n              connector={(\n                <StepConnector\n                  classes={{\n                    line: styles.stepRoot\n                  }} />\n              )}\n            >\n              {steps.map((label, index) => (\n                <Step expanded={true} active={active} key={label}>\n                  <StepLabel\n                    ref={overviewRef}\n                    StepIconComponent={() => getStepIcon(index)}\n                    StepIconProps={{\n                      classes: {\n                        root: styles.stepRoot,\n                        active: styles.stepActive,\n                        completed: styles.stepActive\n                      }\n                    }}\n                  >\n                    <div\n                      className={cx(styles.label, {\n                        [styles.disabledLabel]: active < index\n                      })}\n                    >\n                      {label}\n                    </div>\n                  </StepLabel>\n                  <StepContent\n                    classes={{\n                      root: styles.muiStepContent\n                    }}>\n                    <div className={styles.text}>{getStepContent(index)}</div>\n                    <div>\n                      {getActions(index)}\n                    </div>\n                  </StepContent>\n                </Step>\n              ))}\n            </Stepper>\n          </div>\n        )}\n      {isDesktop\n        && (\n          <div className={styles.root}>\n            <div className={styles.percent}>\n              <SemiCircleProgressBar\n                stroke=\"#ffffff\"\n                strokeWidth=\"15\"\n                background=\"rgba(256,256,256,0.5)\"\n                percentage={percentage()}\n                showPercentValue />\n            </div>\n            <div className={styles.head}>Setup Progress</div>\n            <div className={styles.subHead}>Complete these steps to launch your shop!</div>\n            <Stepper\n              className={styles.stepper}\n              activeStep={active}\n              orientation=\"horizontal\"\n              connector={(\n                <StepConnector\n                  classes={{\n                    line: styles.horizontalLine,\n                  }} />\n              )}\n            >\n              {steps.map((label, index) => (\n                <Step expanded={true} active={active} key={label} className={styles.stepHorizontal}>\n                  <StepLabel\n                    ref={overviewRef}\n                    StepIconComponent={() => getStepIcon(index)}\n                    StepIconProps={{\n                      classes: {\n                        root: styles.stepRoot,\n                        active: styles.stepActive,\n                        completed: styles.stepActive\n                      }\n                    }}\n                  >\n                  </StepLabel>\n                  <div\n                    className={cx(styles.label, {\n                      [styles.disabledLabel]: active < index\n                    })}\n                  >\n                    {label}\n                  </div>\n                  <StepContent\n                    classes={{\n                      root: styles.muiStepContent\n                    }}>\n                  </StepContent>\n                  <div className={styles.text}>{getStepContent(index)}</div>\n                  <div>\n                    {getActions(index)}\n                  </div>\n                </Step>\n              ))}\n            </Stepper>\n          </div>\n        )}\n      {elements.length > 0 && current !== null && (\n        <CoachMark\n          title={CmText[Object.keys(elements[current])[0]].title}\n          subTitle={CmText[Object.keys(elements[current])[0]].sub}\n          onSelect={() => {\n            const key = Object.keys(elements[current])[0];\n            Storage.updateWatchedCoachMarks(key);\n            if (elements[current + 1]) {\n              setCurrent(current + 1);\n              return;\n            }\n            setElements([]);\n          }}\n          id={Object.keys(elements[current])[0]}\n        />\n      )}\n    </>\n\n  );\n}\n"]},"metadata":{},"sourceType":"module"}