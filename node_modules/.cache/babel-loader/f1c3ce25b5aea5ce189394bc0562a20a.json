{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/profile/delivery/ConditionalDelivery.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useField } from 'formik';\nimport { useShop } from \"../../../contexts\";\nimport ButtonComponent from \"../../../containers/profile/ButtonComponent\";\nimport AddIcon from '@material-ui/icons/Add';\nimport binkIcon from \"../../../assets/overview/binIcon.svg\";\nimport editIcon from \"../../../assets/overview/editIcon.svg\";\nimport { useToggle } from \"../../../hooks/common\";\nimport { DeleteAlert } from \"../../shared/DeleteAlert\";\nimport { useIsConditionalChargesEnabled } from \"../../../contexts/userContext\";\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from \"../../../hooks\";\nimport { ConditionForm } from \"./ConditionForm\";\nimport { DeliveryType, formatConditionalCharge } from \"./utils\";\nimport styles from \"./Delivery.module.css\";\nexport function ConditionalDelivery() {\n  _s();\n\n  const shop = useShop();\n  const [{\n    value: type\n  }] = useField('chargeType');\n  const [{\n    value: charges = []\n  },, {\n    setValue\n  }] = useField('otherCharges');\n  const [index, setIndex] = useState(null);\n  const [del, toggleDel] = useToggle(false);\n  const params = useQueryParams();\n  const history = useHistory();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled();\n\n  const onClose = () => {\n    setIndex(null);\n  };\n\n  if (type !== DeliveryType.CONDITIONAL) {\n    return null;\n  }\n\n  if (charges.length === 0) {\n    return /*#__PURE__*/React.createElement(ConditionForm, {\n      onClose: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }\n    });\n  }\n\n  if (index !== null) {\n    return /*#__PURE__*/React.createElement(ConditionForm, {\n      onClose: onClose,\n      index: index === -1 ? null : index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }\n    });\n  }\n\n  const onDelete = () => {\n    setValue(charges.filter((_, idx) => idx !== charges.length - 1));\n    toggleDel();\n    onClose();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, del && /*#__PURE__*/React.createElement(DeleteAlert, {\n    onCancel: toggleDel,\n    onDelete: onDelete,\n    title: \"Boo! Are you sure you want to delete this delivery charge?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), charges.map((charge, idx) => /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.charge,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.chargeIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, idx + 1), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.chargeBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, formatConditionalCharge(charge, shop.currency)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.editDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: toggleDel,\n    className: styles.editContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: binkIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setIndex(idx),\n    className: styles.editContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: editIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"textRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ButtonComponent, {\n    starticon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 22\n      }\n    }),\n    text: \"Add More Charges\",\n    style: styles.addMoreCharges,\n    onclick: () => {\n      if (!isConditionalChargesEnabled) {\n        params.set('openPlans', 'generic');\n        history.push({\n          search: params.toString()\n        });\n        return;\n      }\n\n      setIndex(-1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(ConditionalDelivery, \"AyurUcV3qHlD3lBPlU91x7/H4WY=\", false, function () {\n  return [useShop, useField, useField, useToggle, useQueryParams, useHistory, useIsConditionalChargesEnabled];\n});\n\n_c = ConditionalDelivery;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConditionalDelivery\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/profile/delivery/ConditionalDelivery.jsx"],"names":["React","useState","useField","useShop","ButtonComponent","AddIcon","useToggle","DeleteAlert","useIsConditionalChargesEnabled","useHistory","useQueryParams","ConditionForm","DeliveryType","formatConditionalCharge","styles","ConditionalDelivery","shop","value","type","charges","setValue","index","setIndex","del","toggleDel","params","history","isConditionalChargesEnabled","onClose","CONDITIONAL","length","onDelete","filter","_","idx","map","charge","chargeIndex","chargeBody","currency","editDiv","editContainer","binkIcon","editIcon","addMoreCharges","set","push","search","toString"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useField } from 'formik';\nimport { useShop } from 'contexts';\nimport ButtonComponent from 'containers/profile/ButtonComponent';\nimport AddIcon from '@material-ui/icons/Add';\nimport binkIcon from 'assets/overview/binIcon.svg';\nimport editIcon from 'assets/overview/editIcon.svg';\nimport { useToggle } from 'hooks/common';\nimport { DeleteAlert } from 'components/shared/DeleteAlert';\nimport {\n  useIsConditionalChargesEnabled\n} from 'contexts/userContext';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from 'hooks';\nimport { ConditionForm } from './ConditionForm';\nimport { DeliveryType, formatConditionalCharge } from './utils';\nimport styles from './Delivery.module.css';\nexport function ConditionalDelivery() {\n  const shop = useShop();\n  const [{ value: type }] = useField('chargeType');\n  const [{ value: charges = [] }, , { setValue }] = useField('otherCharges');\n  const [index, setIndex] = useState(null);\n  const [del, toggleDel] = useToggle(false);\n  const params = useQueryParams();\n  const history = useHistory();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled();\n\n  const onClose = () => {\n    setIndex(null);\n  };\n\n  if (type !== DeliveryType.CONDITIONAL) {\n    return null;\n  }\n\n  if (charges.length === 0) {\n    return (\n      <ConditionForm onClose={onClose} />\n    );\n  }\n\n  if (index !== null) {\n    return (\n      <ConditionForm onClose={onClose} index={index === -1 ? null : index} />\n    );\n  }\n\n  const onDelete = () => {\n    setValue(charges.filter((_, idx) => idx !== charges.length - 1));\n    toggleDel();\n    onClose();\n  };\n\n  return (\n    <div>\n      {del && (\n        <DeleteAlert\n          onCancel={toggleDel}\n          onDelete={onDelete}\n          title=\"Boo! Are you sure you want to delete this delivery charge?\"\n        />\n      )}\n      {charges.map((charge, idx) => (\n        <div className={styles.charge}>\n          <span className={styles.chargeIndex}>\n            {idx + 1}\n          </span>\n          <span className={styles.chargeBody}>\n            {formatConditionalCharge(charge, shop.currency)}\n          </span>\n          <div className={styles.editDiv}>\n            <span\n              onClick={toggleDel}\n              className={styles.editContainer}\n            >\n              <img src={binkIcon} alt=\"\" />\n            </span>\n            <span\n              onClick={() => setIndex(idx)}\n              className={styles.editContainer}\n            >\n              <img src={editIcon} alt=\"\" />\n            </span>\n          </div>\n        </div>\n      ))}\n      <div className=\"textRight\">\n        <ButtonComponent\n          starticon={<AddIcon />}\n          text=\"Add More Charges\"\n          style={styles.addMoreCharges}\n          onclick={() => {\n            if (!isConditionalChargesEnabled) {\n              params.set('openPlans', 'generic');\n              history.push({\n                search: params.toString(),\n              });\n              return;\n            }\n            setIndex(-1);\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}