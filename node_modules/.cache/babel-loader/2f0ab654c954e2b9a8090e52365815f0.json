{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/stepper/Step2.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useGetIds, useOrder } from \"../../../contexts/orderContext\";\nimport { Factory } from \"../../../api\";\nimport Loader from \"../../../services/loader\";\nimport cx from 'classnames';\nimport SnackBar from \"../../../services/snackbar\";\nimport { useHistory } from 'react-router-dom';\nimport { isIND } from \"../../../contexts/userContext\";\nimport selectIcon from \"../../../assets/v2/orders/select.svg\";\nimport unselectIcon from \"../../../assets/v2/orders/unselect.svg\";\nimport chevronTop from \"../../../assets/v2/common/chevronGreyTop.svg\";\nimport chevronBottom from \"../../../assets/v2/common/chevronGreyBottom.svg\";\nimport { useToggle } from \"../../../hooks/common\";\nimport { useShop } from \"../../../contexts\";\nimport Alert from \"../../shared/alert/Alert\";\nimport { Badge, Button, Clickable } from 'phoenix-components';\nimport { inParallelWithLimit } from \"../../../utils/parallel\";\nimport emptyShipping from \"../../../assets/v2/orders/emptyShipping.svg\";\nimport EventManager from \"../../../utils/events\";\nimport styles from \"./Step.module.css\";\nexport function Step2({\n  handleNext,\n  groupId,\n  handleBack,\n  order\n}) {\n  _s();\n\n  var _order$dimensions, _order$dimensions2, _order$dimensions3;\n\n  const rootOrder = useOrder();\n  const weight = order === null || order === void 0 ? void 0 : order.weight;\n  const height = order === null || order === void 0 ? void 0 : (_order$dimensions = order.dimensions) === null || _order$dimensions === void 0 ? void 0 : _order$dimensions.height;\n  const length = order === null || order === void 0 ? void 0 : (_order$dimensions2 = order.dimensions) === null || _order$dimensions2 === void 0 ? void 0 : _order$dimensions2.length;\n  const width = order === null || order === void 0 ? void 0 : (_order$dimensions3 = order.dimensions) === null || _order$dimensions3 === void 0 ? void 0 : _order$dimensions3.width;\n  const addressId = order === null || order === void 0 ? void 0 : order.addressId;\n  const codAmount = +order._shippingCodAmount || 0;\n  const shop = useShop();\n  const ids = useGetIds();\n  const isIndia = isIND();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [shippingRates, setShippingRates] = useState([]);\n  const [selectedRate, setSelectedRate] = useState(-1);\n  const [selectedVendor, setSelectedVendor] = useState('');\n  const [pickUpEnable, setPickUpEnable] = useState(false);\n  const [inSuffDetails, setInSufDetails] = useState({});\n  const [showError, setShowError] = useToggle(false);\n  const [subPartners, setSubPartners] = useState({});\n  const [subPartnersOpen, setSubPartnersOpen] = useState({});\n  console.log(subPartners);\n\n  const toggleWallet = () => history.replace('/payments?open=1&tab=wallet&type=cash&state=credits');\n\n  const showInSuffAlert = +(inSuffDetails === null || inSuffDetails === void 0 ? void 0 : inSuffDetails.shortage) > 0 && +(inSuffDetails === null || inSuffDetails === void 0 ? void 0 : inSuffDetails.requested) > 0;\n\n  const onSubmit = async () => {\n    if (selectedRate === -1 && selectedVendor === 'shiprocket' || selectedVendor.length === 0) {\n      setShowError(true);\n      return;\n    }\n\n    try {\n      Loader.show();\n      const payload = {\n        addressId,\n        weight: +weight,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height\n        },\n        vendor: selectedVendor,\n        type: 'windo',\n        partnerId: selectedRate,\n        ids,\n        codAmount\n      };\n      const {\n        groupId: grpId,\n        orderId\n      } = await Factory.shipOrder(rootOrder._id, groupId, payload);\n      history.push({\n        pathname: `/orders/${orderId}/thankyou`,\n        state: {\n          groupId: grpId,\n          id: orderId\n        }\n      });\n      EventManager.emitEvent('order_shipped', {\n        type: payload.type,\n        id: orderId,\n        groupId: grpId || ''\n      });\n    } catch (e) {\n      var _e$response, _e$response4, _e$response5;\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 403) {\n        var _e$response2, _e$response2$data, _e$response2$data$sho, _e$response3, _e$response3$data, _e$response3$data$req;\n\n        setInSufDetails({\n          shortage: e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : (_e$response2$data$sho = _e$response2$data.shortage) === null || _e$response2$data$sho === void 0 ? void 0 : _e$response2$data$sho.toFixed(2),\n          requested: e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : (_e$response3$data$req = _e$response3$data.requested) === null || _e$response3$data$req === void 0 ? void 0 : _e$response3$data$req.toFixed(2)\n        });\n        return;\n      }\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : _e$response4.status) === 412) {\n        SnackBar.show('Please add shop address to ship', 'error');\n        history.push('/manage/address', {\n          redirectTo: `/orders/${rootOrder._id}`\n        });\n        return;\n      }\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response5 = e.response) === null || _e$response5 === void 0 ? void 0 : _e$response5.status) === 422) {\n        SnackBar.showError(e);\n        return;\n      }\n\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const getShippingRates = async () => {\n    try {\n      setIsLoading(true);\n      Loader.show();\n      const payload = {\n        weight: +weight,\n        addressId,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height\n        },\n        codAmount\n      };\n      const response = await Factory.getShippingRates(rootOrder._id, groupId, payload);\n      const filtered = response.filter(x => x.subPartners).map(x => ({\n        name: x.vendor\n      }));\n      const subPartners1 = await inParallelWithLimit(filtered, 5, async vendor => {\n        try {\n          const res = await Factory.getPartnerShippingRates(rootOrder._id, groupId, vendor.name, payload);\n          return {\n            [vendor.name]: res\n          };\n        } catch (e) {\n          var _e$response6, _e$response6$data;\n\n          const message = (e === null || e === void 0 ? void 0 : (_e$response6 = e.response) === null || _e$response6 === void 0 ? void 0 : (_e$response6$data = _e$response6.data) === null || _e$response6$data === void 0 ? void 0 : _e$response6$data.message) || (e === null || e === void 0 ? void 0 : e.message) || 'Something went wrong';\n          SnackBar.showError(`unable to fetch ${vendor.name} shipping rates ${message}`);\n          return null;\n        }\n      });\n      setShippingRates(response);\n      const values = Object.assign({}, ...subPartners1.filter(x => x));\n      const transform = Object.keys(values).map(x => ({\n        [x]: false\n      }));\n      setSubPartnersOpen(Object.assign({}, ...transform));\n      setSubPartners(values);\n    } catch (e) {\n      var _e$response7, _e$response7$data;\n\n      if (e !== null && e !== void 0 && (_e$response7 = e.response) !== null && _e$response7 !== void 0 && (_e$response7$data = _e$response7.data) !== null && _e$response7$data !== void 0 && _e$response7$data.message) {\n        var _e$response8, _e$response8$data;\n\n        SnackBar.show(e === null || e === void 0 ? void 0 : (_e$response8 = e.response) === null || _e$response8 === void 0 ? void 0 : (_e$response8$data = _e$response8.data) === null || _e$response8$data === void 0 ? void 0 : _e$response8$data.message, 'error');\n        return;\n      }\n\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n      setIsLoading(false);\n    }\n  };\n\n  const createOrder = async scheduledRequire => {\n    if (selectedRate === -1 || selectedVendor.length === 0) {\n      setShowError(true);\n      return;\n    }\n\n    try {\n      Loader.show();\n      const payload = {\n        addressId,\n        weight: +weight,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height\n        },\n        vendor: selectedVendor,\n        type: 'windo',\n        partnerId: selectedRate,\n        ids,\n        codAmount\n      };\n      const {\n        groupId: grpId,\n        orderId\n      } = await Factory.shipOrder(rootOrder._id, groupId, payload);\n\n      if (scheduledRequire) {\n        handleNext();\n      }\n\n      if (!scheduledRequire) {\n        history.push({\n          pathname: `/orders/${orderId}/thankyou`,\n          state: {\n            groupId: grpId,\n            id: orderId\n          }\n        });\n      }\n    } catch (e) {\n      var _e$response9, _e$response12, _e$response13;\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response9 = e.response) === null || _e$response9 === void 0 ? void 0 : _e$response9.status) === 403) {\n        var _e$response10, _e$response10$data, _e$response10$data$sh, _e$response11, _e$response11$data, _e$response11$data$re;\n\n        setInSufDetails({\n          shortage: e === null || e === void 0 ? void 0 : (_e$response10 = e.response) === null || _e$response10 === void 0 ? void 0 : (_e$response10$data = _e$response10.data) === null || _e$response10$data === void 0 ? void 0 : (_e$response10$data$sh = _e$response10$data.shortage) === null || _e$response10$data$sh === void 0 ? void 0 : _e$response10$data$sh.toFixed(2),\n          requested: e === null || e === void 0 ? void 0 : (_e$response11 = e.response) === null || _e$response11 === void 0 ? void 0 : (_e$response11$data = _e$response11.data) === null || _e$response11$data === void 0 ? void 0 : (_e$response11$data$re = _e$response11$data.requested) === null || _e$response11$data$re === void 0 ? void 0 : _e$response11$data$re.toFixed(2)\n        });\n        return;\n      }\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response12 = e.response) === null || _e$response12 === void 0 ? void 0 : _e$response12.status) === 412) {\n        SnackBar.show('Please add shop address to ship', 'error');\n        history.push('/manage/address', {\n          redirectTo: `/orders/${rootOrder._id}`\n        });\n        return;\n      }\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response13 = e.response) === null || _e$response13 === void 0 ? void 0 : _e$response13.status) === 422) {\n        SnackBar.showError(e);\n        return;\n      }\n\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    // others\n    if (!weight || !height || !width || !length) {\n      handleBack();\n      return;\n    }\n\n    getShippingRates();\n  }, [order === null || order === void 0 ? void 0 : order.dimensions]);\n\n  const onSelectVendor = id => setSelectedVendor(id);\n\n  const onSelectRate = id => setSelectedRate(id);\n\n  const rates = shippingRates;\n\n  const card = (items, vendor) => items.map(y => {\n    var _y$amount;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.courierSection, {\n        [styles.selected]: y.id === selectedRate\n      }),\n      onClick: e => {\n        if (y.id === selectedRate) {\n          onSelectVendor('');\n          onSelectRate(-1);\n          setPickUpEnable(false);\n          return;\n        }\n\n        onSelectVendor(vendor);\n        onSelectRate(y.id);\n        setPickUpEnable(y.pickUpAvailable);\n        e.preventDefault();\n        e.stopPropagation();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.flex),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.courSection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.cName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, y.provider), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.cPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, `${shop.currency} ${y === null || y === void 0 ? void 0 : (_y$amount = y.amount) === null || _y$amount === void 0 ? void 0 : _y$amount.toFixed(2)}`)), isIndia && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      size: \"small\",\n      variant: \"secondary\",\n      className: styles.doorStep,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 19\n      }\n    }, \"Door-Step Pickup\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.ratingContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: y.id === selectedRate ? selectIcon : unselectIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    }))), !isIndia && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      size: \"small\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 19\n      }\n    }, y.pickUpAvailable ? 'Door-Step Pickup' : 'No Door-Step Pickup'), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.ratingContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: y.id === selectedRate ? selectIcon : unselectIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }\n    }))))))));\n  });\n\n  if (isLoading) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.couriersSection, pickUpEnable && styles.alterHeight),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 5\n    }\n  }, showError && /*#__PURE__*/React.createElement(Alert, {\n    text: \"Please select provider\",\n    btnText: \"Ok\",\n    textClass: styles.textClass,\n    onClick: setShowError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }), rates.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyCouriers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyShipping,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 11\n    }\n  }, \"No Shipping Partners Connected\")), rates.length > 0 && rates.map(y => {\n    var _y$total;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.courierSection, {\n        [styles.selected]: y.vendor === selectedVendor && !y.subPartners\n      }),\n      onClick: () => {\n        if (y.vendor === selectedVendor && !y.subPartners) {\n          onSelectVendor('');\n          setPickUpEnable(false);\n          return;\n        }\n\n        onSelectVendor(y.vendor);\n        setPickUpEnable(y.schedulePickUp);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.flex),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.courSection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.cName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 21\n      }\n    }, !y.subPartners && /*#__PURE__*/React.createElement(React.Fragment, null, y.displayName), y.subPartners && /*#__PURE__*/React.createElement(Clickable, {\n      onClick: () => {\n        const value = subPartnersOpen[y.vendor];\n        setSubPartnersOpen({ ...subPartnersOpen,\n          [y.vendor]: !value\n        });\n      },\n      className: styles.cPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 25\n      }\n    }, y.displayName)), !(y !== null && y !== void 0 && y.subPartners) && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.cPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 23\n      }\n    }, `${shop.currency} ${y === null || y === void 0 ? void 0 : (_y$total = y.total) === null || _y$total === void 0 ? void 0 : _y$total.toFixed(2)}`), (y === null || y === void 0 ? void 0 : y.subPartners) && /*#__PURE__*/React.createElement(Clickable, {\n      onClick: () => {\n        const value = subPartnersOpen[y.vendor];\n        setSubPartnersOpen({ ...subPartnersOpen,\n          [y.vendor]: !value\n        });\n      },\n      className: styles.cPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: subPartnersOpen[y.vendor] ? chevronTop : chevronBottom,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 25\n      }\n    }))), isIndia && !(y !== null && y !== void 0 && y.subPartners) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      size: \"small\",\n      variant: \"secondary\",\n      className: styles.doorStep,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 23\n      }\n    }, \"Door-Step Pickup\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.ratingContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: y.vendor === selectedVendor ? selectIcon : unselectIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 25\n      }\n    }))), !isIndia && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexBetween marginSTopBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      size: \"small\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 23\n      }\n    }, y.schedulePickUp || isIndia ? 'Door-Step Pickup' : 'No Door-Step Pickup')), subPartnersOpen[y.vendor] && card(subPartners[y.vendor] || [], y.vendor))))));\n  }), !isIndia && rates.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, pickUpEnable && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.actions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 15\n    }\n  }, \" Need Doorstep Pickup?\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => createOrder(false),\n    size: \"large\",\n    primary: false,\n    label: \"No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => createOrder(true),\n    size: \"large\",\n    label: \"Yes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }))), !pickUpEnable && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => createOrder(false),\n    size: \"large\",\n    label: \"Next\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 15\n    }\n  }))), isIndia && /*#__PURE__*/React.createElement(React.Fragment, null, rates.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onSubmit,\n    size: \"large\",\n    label: \"Confirm\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 15\n    }\n  }))), rates.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      history.push('/manage/shippingPartners');\n    },\n    label: \"Connect Shipping Partner\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.spacer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }\n  }), showInSuffAlert && /*#__PURE__*/React.createElement(Alert, {\n    text: `Your estimated shipping charges are\n             ${shop.currency} ${inSuffDetails.requested}. Please add sufficient balance\n             to proceed`,\n    btnText: `Add ${shop.currency} ${inSuffDetails.shortage}`,\n    textClass: styles.textClass,\n    onClick: toggleWallet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 9\n    }\n  }));\n}\n\n_s(Step2, \"se+ZoPT0Bp+y5G2kdxHq/EjSTv0=\", false, function () {\n  return [useOrder, useShop, useGetIds, useHistory, useToggle];\n});\n\n_c = Step2;\nStep2.propTypes = {\n  handleNext: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  groupId: PropTypes.string,\n  order: {}\n};\nStep2.defaultProps = {\n  groupId: '',\n  order: {}\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Step2\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/stepper/Step2.jsx"],"names":["React","useEffect","useState","PropTypes","useGetIds","useOrder","Factory","Loader","cx","SnackBar","useHistory","isIND","useToggle","useShop","Alert","Badge","Button","Clickable","inParallelWithLimit","EventManager","styles","Step2","handleNext","groupId","handleBack","order","rootOrder","weight","height","dimensions","length","width","addressId","codAmount","_shippingCodAmount","shop","ids","isIndia","history","isLoading","setIsLoading","shippingRates","setShippingRates","selectedRate","setSelectedRate","selectedVendor","setSelectedVendor","pickUpEnable","setPickUpEnable","inSuffDetails","setInSufDetails","showError","setShowError","subPartners","setSubPartners","subPartnersOpen","setSubPartnersOpen","console","log","toggleWallet","replace","showInSuffAlert","shortage","requested","onSubmit","show","payload","vendor","type","partnerId","grpId","orderId","shipOrder","_id","push","pathname","state","id","emitEvent","e","response","status","data","toFixed","redirectTo","hide","getShippingRates","filtered","filter","x","map","name","subPartners1","res","getPartnerShippingRates","message","values","Object","assign","transform","keys","createOrder","scheduledRequire","onSelectVendor","onSelectRate","rates","card","items","y","content","courierSection","selected","pickUpAvailable","preventDefault","stopPropagation","flex","courSection","cName","provider","cPrice","currency","amount","doorStep","ratingContainer","selectIcon","unselectIcon","couriersSection","alterHeight","textClass","emptyCouriers","emptyShipping","schedulePickUp","displayName","value","total","chevronTop","chevronBottom","actions","label","buttons","buttonContainer","spacer","propTypes","func","isRequired","string","defaultProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,EAAoBC,QAApB;AACA,SAASC,OAAT;AACA,OAAOC,MAAP;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,QAAP;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,KAAT;;;;;AAKA,SAASC,SAAT;AACA,SAASC,OAAT;AACA,OAAOC,KAAP;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,oBAAzC;AACA,SAASC,mBAAT;;AAEA,OAAOC,YAAP;AACA,OAAOC,MAAP;AAEA,OAAO,SAASC,KAAT,CAAe;AACpBC,EAAAA,UADoB;AAEpBC,EAAAA,OAFoB;AAGpBC,EAAAA,UAHoB;AAIpBC,EAAAA;AAJoB,CAAf,EAKJ;AAAA;;AAAA;;AACD,QAAMC,SAAS,GAAGrB,QAAQ,EAA1B;AACA,QAAMsB,MAAM,GAAGF,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEE,MAAtB;AACA,QAAMC,MAAM,GAAGH,KAAH,aAAGA,KAAH,4CAAGA,KAAK,CAAEI,UAAV,sDAAG,kBAAmBD,MAAlC;AACA,QAAME,MAAM,GAAGL,KAAH,aAAGA,KAAH,6CAAGA,KAAK,CAAEI,UAAV,uDAAG,mBAAmBC,MAAlC;AACA,QAAMC,KAAK,GAAGN,KAAH,aAAGA,KAAH,6CAAGA,KAAK,CAAEI,UAAV,uDAAG,mBAAmBE,KAAjC;AACA,QAAMC,SAAS,GAAGP,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEO,SAAzB;AACA,QAAMC,SAAS,GAAG,CAACR,KAAK,CAACS,kBAAP,IAA6B,CAA/C;AACA,QAAMC,IAAI,GAAGtB,OAAO,EAApB;AACA,QAAMuB,GAAG,GAAGhC,SAAS,EAArB;AACA,QAAMiC,OAAO,GAAG1B,KAAK,EAArB;AACA,QAAM2B,OAAO,GAAG5B,UAAU,EAA1B;AACA,QAAM,CAAC6B,SAAD,EAAYC,YAAZ,IAA4BtC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACuC,aAAD,EAAgBC,gBAAhB,IAAoCxC,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACyC,YAAD,EAAeC,eAAf,IAAkC1C,QAAQ,CAAC,CAAC,CAAF,CAAhD;AACA,QAAM,CAAC2C,cAAD,EAAiBC,iBAAjB,IAAsC5C,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAAC6C,YAAD,EAAeC,eAAf,IAAkC9C,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAAC+C,aAAD,EAAgBC,eAAhB,IAAmChD,QAAQ,CAAC,EAAD,CAAjD;AACA,QAAM,CAACiD,SAAD,EAAYC,YAAZ,IAA4BxC,SAAS,CAAC,KAAD,CAA3C;AACA,QAAM,CAACyC,WAAD,EAAcC,cAAd,IAAgCpD,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACqD,eAAD,EAAkBC,kBAAlB,IAAwCtD,QAAQ,CAAC,EAAD,CAAtD;AAEAuD,EAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;;AAEA,QAAMM,YAAY,GAAG,MAAMrB,OAAO,CAACsB,OAAR,CAAgB,qDAAhB,CAA3B;;AAEA,QAAMC,eAAe,GAAG,EAACZ,aAAD,aAACA,aAAD,uBAACA,aAAa,CAAEa,QAAhB,IAA2B,CAA3B,IAAgC,EAACb,aAAD,aAACA,aAAD,uBAACA,aAAa,CAAEc,SAAhB,IAA4B,CAApF;;AAEA,QAAMC,QAAQ,GAAG,YAAY;AAC3B,QAAKrB,YAAY,KAAK,CAAC,CAAlB,IAAuBE,cAAc,KAAK,YAA3C,IAA4DA,cAAc,CAACf,MAAf,KAA0B,CAA1F,EAA6F;AAC3FsB,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACD;;AACD,QAAI;AACF7C,MAAAA,MAAM,CAAC0D,IAAP;AACA,YAAMC,OAAO,GAAG;AACdlC,QAAAA,SADc;AAEdL,QAAAA,MAAM,EAAE,CAACA,MAFK;AAGdE,QAAAA,UAAU,EAAE;AACVC,UAAAA,MAAM,EAAE,CAACA,MADC;AAEVC,UAAAA,KAAK,EAAE,CAACA,KAFE;AAGVH,UAAAA,MAAM,EAAE,CAACA;AAHC,SAHE;AAQduC,QAAAA,MAAM,EAAEtB,cARM;AASduB,QAAAA,IAAI,EAAE,OATQ;AAUdC,QAAAA,SAAS,EAAE1B,YAVG;AAWdP,QAAAA,GAXc;AAYdH,QAAAA;AAZc,OAAhB;AAcA,YAAM;AACJV,QAAAA,OAAO,EAAE+C,KADL;AAEJC,QAAAA;AAFI,UAGF,MAAMjE,OAAO,CAACkE,SAAR,CAAkB9C,SAAS,CAAC+C,GAA5B,EAAiClD,OAAjC,EAA0C2C,OAA1C,CAHV;AAIA5B,MAAAA,OAAO,CAACoC,IAAR,CAAa;AACXC,QAAAA,QAAQ,EAAG,WAAUJ,OAAQ,WADlB;AAEXK,QAAAA,KAAK,EAAE;AACLrD,UAAAA,OAAO,EAAE+C,KADJ;AAELO,UAAAA,EAAE,EAAEN;AAFC;AAFI,OAAb;AAOApD,MAAAA,YAAY,CAAC2D,SAAb,CAAuB,eAAvB,EAAwC;AACtCV,QAAAA,IAAI,EAAEF,OAAO,CAACE,IADwB;AAEtCS,QAAAA,EAAE,EAAEN,OAFkC;AAGtChD,QAAAA,OAAO,EAAE+C,KAAK,IAAI;AAHoB,OAAxC;AAKD,KAhCD,CAgCE,OAAOS,CAAP,EAAU;AAAA;;AACV,UAAI,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,2BAAAA,CAAC,CAAEC,QAAH,4DAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAAA;;AAC/B/B,QAAAA,eAAe,CAAC;AACdY,UAAAA,QAAQ,EAAEiB,CAAF,aAAEA,CAAF,uCAAEA,CAAC,CAAEC,QAAL,sEAAE,aAAaE,IAAf,+EAAE,kBAAmBpB,QAArB,0DAAE,sBAA6BqB,OAA7B,CAAqC,CAArC,CADI;AAEdpB,UAAAA,SAAS,EAAEgB,CAAF,aAAEA,CAAF,uCAAEA,CAAC,CAAEC,QAAL,sEAAE,aAAaE,IAAf,+EAAE,kBAAmBnB,SAArB,0DAAE,sBAA8BoB,OAA9B,CAAsC,CAAtC;AAFG,SAAD,CAAf;AAIA;AACD;;AACD,UAAI,CAAAJ,CAAC,SAAD,IAAAA,CAAC,WAAD,4BAAAA,CAAC,CAAEC,QAAH,8DAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAC/BxE,QAAAA,QAAQ,CAACwD,IAAT,CAAc,iCAAd,EAAiD,OAAjD;AACA3B,QAAAA,OAAO,CAACoC,IAAR,CAAa,iBAAb,EAAgC;AAC9BU,UAAAA,UAAU,EAAG,WAAU1D,SAAS,CAAC+C,GAAI;AADP,SAAhC;AAGA;AACD;;AACD,UAAI,CAAAM,CAAC,SAAD,IAAAA,CAAC,WAAD,4BAAAA,CAAC,CAAEC,QAAH,8DAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAC/BxE,QAAAA,QAAQ,CAAC0C,SAAT,CAAmB4B,CAAnB;AACA;AACD;;AACDtE,MAAAA,QAAQ,CAAC0C,SAAT,CAAmB4B,CAAnB;AACD,KApDD,SAoDU;AACRxE,MAAAA,MAAM,CAAC8E,IAAP;AACD;AACF,GA5DD;;AA8DA,QAAMC,gBAAgB,GAAG,YAAY;AACnC,QAAI;AACF9C,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAjC,MAAAA,MAAM,CAAC0D,IAAP;AACA,YAAMC,OAAO,GAAG;AACdvC,QAAAA,MAAM,EAAE,CAACA,MADK;AAEdK,QAAAA,SAFc;AAGdH,QAAAA,UAAU,EAAE;AACVC,UAAAA,MAAM,EAAE,CAACA,MADC;AAEVC,UAAAA,KAAK,EAAE,CAACA,KAFE;AAGVH,UAAAA,MAAM,EAAE,CAACA;AAHC,SAHE;AAQdK,QAAAA;AARc,OAAhB;AAUA,YAAM+C,QAAQ,GAAG,MAAM1E,OAAO,CAACgF,gBAAR,CAAyB5D,SAAS,CAAC+C,GAAnC,EAAwClD,OAAxC,EAAiD2C,OAAjD,CAAvB;AACA,YAAMqB,QAAQ,GAAGP,QAAQ,CAACQ,MAAT,CAAgBC,CAAC,IAAIA,CAAC,CAACpC,WAAvB,EACdqC,GADc,CACVD,CAAC,KAAK;AAAEE,QAAAA,IAAI,EAAEF,CAAC,CAACtB;AAAV,OAAL,CADS,CAAjB;AAGA,YAAMyB,YAAY,GAAG,MAAM1E,mBAAmB,CAACqE,QAAD,EAAW,CAAX,EAAc,MAAMpB,MAAN,IAAgB;AAC1E,YAAI;AACF,gBAAM0B,GAAG,GAAG,MAAMvF,OAAO,CAACwF,uBAAR,CAAgCpE,SAAS,CAAC+C,GAA1C,EAA+ClD,OAA/C,EAAwD4C,MAAM,CAACwB,IAA/D,EAAqEzB,OAArE,CAAlB;AACA,iBAAO;AAAE,aAACC,MAAM,CAACwB,IAAR,GAAeE;AAAjB,WAAP;AACD,SAHD,CAGE,OAAOd,CAAP,EAAU;AAAA;;AACV,gBAAMgB,OAAO,GAAG,CAAAhB,CAAC,SAAD,IAAAA,CAAC,WAAD,4BAAAA,CAAC,CAAEC,QAAH,mFAAaE,IAAb,wEAAmBa,OAAnB,MAA8BhB,CAA9B,aAA8BA,CAA9B,uBAA8BA,CAAC,CAAEgB,OAAjC,KAA4C,sBAA5D;AACAtF,UAAAA,QAAQ,CAAC0C,SAAT,CAAoB,mBAAkBgB,MAAM,CAACwB,IAAK,mBAAkBI,OAAQ,EAA5E;AACA,iBAAO,IAAP;AACD;AACF,OAT6C,CAA9C;AAUArD,MAAAA,gBAAgB,CAACsC,QAAD,CAAhB;AACA,YAAMgB,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,GAAIN,YAAY,CAACJ,MAAb,CAAoBC,CAAC,IAAIA,CAAzB,CAAtB,CAAf;AACA,YAAMU,SAAS,GAAGF,MAAM,CAACG,IAAP,CAAYJ,MAAZ,EACfN,GADe,CACXD,CAAC,KAAK;AAAE,SAACA,CAAD,GAAK;AAAP,OAAL,CADU,CAAlB;AAEAjC,MAAAA,kBAAkB,CAACyC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,GAAGC,SAArB,CAAD,CAAlB;AACA7C,MAAAA,cAAc,CAAC0C,MAAD,CAAd;AACD,KAjCD,CAiCE,OAAOjB,CAAP,EAAU;AAAA;;AACV,UAAIA,CAAJ,aAAIA,CAAJ,+BAAIA,CAAC,CAAEC,QAAP,8DAAI,aAAaE,IAAjB,8CAAI,kBAAmBa,OAAvB,EAAgC;AAAA;;AAC9BtF,QAAAA,QAAQ,CAACwD,IAAT,CAAcc,CAAd,aAAcA,CAAd,uCAAcA,CAAC,CAAEC,QAAjB,sEAAc,aAAaE,IAA3B,sDAAc,kBAAmBa,OAAjC,EAA0C,OAA1C;AACA;AACD;;AACDtF,MAAAA,QAAQ,CAACwD,IAAT,CAAc,sBAAd,EAAsC,OAAtC;AACD,KAvCD,SAuCU;AACR1D,MAAAA,MAAM,CAAC8E,IAAP;AACA7C,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GA5CD;;AA8CA,QAAM6D,WAAW,GAAG,MAAOC,gBAAP,IAA4B;AAC9C,QAAI3D,YAAY,KAAK,CAAC,CAAlB,IAAuBE,cAAc,CAACf,MAAf,KAA0B,CAArD,EAAwD;AACtDsB,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACD;;AACD,QAAI;AACF7C,MAAAA,MAAM,CAAC0D,IAAP;AACA,YAAMC,OAAO,GAAG;AACdlC,QAAAA,SADc;AAEdL,QAAAA,MAAM,EAAE,CAACA,MAFK;AAGdE,QAAAA,UAAU,EAAE;AACVC,UAAAA,MAAM,EAAE,CAACA,MADC;AAEVC,UAAAA,KAAK,EAAE,CAACA,KAFE;AAGVH,UAAAA,MAAM,EAAE,CAACA;AAHC,SAHE;AAQduC,QAAAA,MAAM,EAAEtB,cARM;AASduB,QAAAA,IAAI,EAAE,OATQ;AAUdC,QAAAA,SAAS,EAAE1B,YAVG;AAWdP,QAAAA,GAXc;AAYdH,QAAAA;AAZc,OAAhB;AAcA,YAAM;AACJV,QAAAA,OAAO,EAAE+C,KADL;AAEJC,QAAAA;AAFI,UAGF,MAAMjE,OAAO,CAACkE,SAAR,CAAkB9C,SAAS,CAAC+C,GAA5B,EAAiClD,OAAjC,EAA0C2C,OAA1C,CAHV;;AAIA,UAAIoC,gBAAJ,EAAsB;AACpBhF,QAAAA,UAAU;AACX;;AACD,UAAI,CAACgF,gBAAL,EAAuB;AACrBhE,QAAAA,OAAO,CAACoC,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAG,WAAUJ,OAAQ,WADlB;AAEXK,UAAAA,KAAK,EAAE;AACLrD,YAAAA,OAAO,EAAE+C,KADJ;AAELO,YAAAA,EAAE,EAAEN;AAFC;AAFI,SAAb;AAOD;AACF,KAhCD,CAgCE,OAAOQ,CAAP,EAAU;AAAA;;AACV,UAAI,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,4BAAAA,CAAC,CAAEC,QAAH,8DAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAAA;;AAC/B/B,QAAAA,eAAe,CAAC;AACdY,UAAAA,QAAQ,EAAEiB,CAAF,aAAEA,CAAF,wCAAEA,CAAC,CAAEC,QAAL,wEAAE,cAAaE,IAAf,gFAAE,mBAAmBpB,QAArB,0DAAE,sBAA6BqB,OAA7B,CAAqC,CAArC,CADI;AAEdpB,UAAAA,SAAS,EAAEgB,CAAF,aAAEA,CAAF,wCAAEA,CAAC,CAAEC,QAAL,wEAAE,cAAaE,IAAf,gFAAE,mBAAmBnB,SAArB,0DAAE,sBAA8BoB,OAA9B,CAAsC,CAAtC;AAFG,SAAD,CAAf;AAIA;AACD;;AACD,UAAI,CAAAJ,CAAC,SAAD,IAAAA,CAAC,WAAD,6BAAAA,CAAC,CAAEC,QAAH,gEAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAC/BxE,QAAAA,QAAQ,CAACwD,IAAT,CAAc,iCAAd,EAAiD,OAAjD;AACA3B,QAAAA,OAAO,CAACoC,IAAR,CAAa,iBAAb,EAAgC;AAC9BU,UAAAA,UAAU,EAAG,WAAU1D,SAAS,CAAC+C,GAAI;AADP,SAAhC;AAGA;AACD;;AACD,UAAI,CAAAM,CAAC,SAAD,IAAAA,CAAC,WAAD,6BAAAA,CAAC,CAAEC,QAAH,gEAAaC,MAAb,MAAwB,GAA5B,EAAiC;AAC/BxE,QAAAA,QAAQ,CAAC0C,SAAT,CAAmB4B,CAAnB;AACA;AACD;;AACDtE,MAAAA,QAAQ,CAACwD,IAAT,CAAc,sBAAd,EAAsC,OAAtC;AACD,KApDD,SAoDU;AACR1D,MAAAA,MAAM,CAAC8E,IAAP;AACD;AACF,GA5DD;;AA8DApF,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,QAAI,CAAC0B,MAAD,IAAW,CAACC,MAAZ,IAAsB,CAACG,KAAvB,IAAgC,CAACD,MAArC,EAA6C;AAC3CN,MAAAA,UAAU;AACV;AACD;;AACD8D,IAAAA,gBAAgB;AACjB,GAPQ,EAON,CAAC7D,KAAD,aAACA,KAAD,uBAACA,KAAK,CAAEI,UAAR,CAPM,CAAT;;AASA,QAAM0E,cAAc,GAAI1B,EAAD,IAAQ/B,iBAAiB,CAAC+B,EAAD,CAAhD;;AACA,QAAM2B,YAAY,GAAI3B,EAAD,IAAQjC,eAAe,CAACiC,EAAD,CAA5C;;AAEA,QAAM4B,KAAK,GAAGhE,aAAd;;AAEA,QAAMiE,IAAI,GAAG,CAACC,KAAD,EAAQxC,MAAR,KAAmBwC,KAAK,CAACjB,GAAN,CAAUkB,CAAC;AAAA;;AAAA,wBACzC;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAExF,MAAM,CAACyF,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAErG,EAAE,CAACY,MAAM,CAAC0F,cAAR,EACX;AAAE,SAAC1F,MAAM,CAAC2F,QAAR,GAAmBH,CAAC,CAAC/B,EAAF,KAASlC;AAA9B,OADW,CADf;AAGE,MAAA,OAAO,EAAGoC,CAAD,IAAO;AACd,YAAI6B,CAAC,CAAC/B,EAAF,KAASlC,YAAb,EAA2B;AACzB4D,UAAAA,cAAc,CAAC,EAAD,CAAd;AACAC,UAAAA,YAAY,CAAC,CAAC,CAAF,CAAZ;AACAxD,UAAAA,eAAe,CAAC,KAAD,CAAf;AACA;AACD;;AACDuD,QAAAA,cAAc,CAACpC,MAAD,CAAd;AACAqC,QAAAA,YAAY,CAACI,CAAC,CAAC/B,EAAH,CAAZ;AACA7B,QAAAA,eAAe,CAAC4D,CAAC,CAACI,eAAH,CAAf;AACAjC,QAAAA,CAAC,CAACkC,cAAF;AACAlC,QAAAA,CAAC,CAACmC,eAAF;AACD,OAfH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAiBE;AAAK,MAAA,SAAS,EAAE1G,EAAE,CAACY,MAAM,CAAC+F,IAAR,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAE/F,MAAM,CAACgG,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAEhG,MAAM,CAACiG,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+BT,CAAC,CAACU,QAAjC,CADF,eAEE;AACE,MAAA,SAAS,EAAElG,MAAM,CAACmG,MADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,GAAEpF,IAAI,CAACqF,QAAS,IAAGZ,CAApB,aAAoBA,CAApB,oCAAoBA,CAAC,CAAEa,MAAvB,8CAAoB,UAAWtC,OAAX,CAAmB,CAAnB,CAAsB,EAF7C,CAFF,CADF,EAQG9C,OAAO,iBACN;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,OAAO,EAAC,WAFV;AAGE,MAAA,SAAS,EAAEjB,MAAM,CAACsG,QAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAQE;AAAM,MAAA,SAAS,EAAEtG,MAAM,CAACuG,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEf,CAAC,CAAC/B,EAAF,KAASlC,YAAT,GAAwBiF,UAAxB,GAAqCC,YAA/C;AAA6D,MAAA,GAAG,EAAC,EAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CARF,CATJ,EAsBG,CAACxF,OAAD,iBACC;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,OAAO,EAAC,WAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGuE,CAAC,CAACI,eAAF,GACG,kBADH,GACwB,qBAL3B,CADF,eAQE;AAAM,MAAA,SAAS,EAAE5F,MAAM,CAACuG,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEf,CAAC,CAAC/B,EAAF,KAASlC,YAAT,GAAwBiF,UAAxB,GAAqCC,YAA/C;AAA6D,MAAA,GAAG,EAAC,EAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CARF,CAvBJ,CADF,CAjBF,CADF,CADF,CADyC;AAAA,GAAX,CAAhC;;AAgEA,MAAItF,SAAJ,EAAe;AACb,WAAO,IAAP;AACD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAE/B,EAAE,CAACY,MAAM,CAAC0G,eAAR,EAAyB/E,YAAY,IAAI3B,MAAM,CAAC2G,WAAhD,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG5E,SAAS,iBACR,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,wBADP;AAEE,IAAA,OAAO,EAAC,IAFV;AAGE,IAAA,SAAS,EAAE/B,MAAM,CAAC4G,SAHpB;AAIE,IAAA,OAAO,EAAE5E,YAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EASGqD,KAAK,CAAC3E,MAAN,KAAiB,CAAjB,iBACC;AAAK,IAAA,SAAS,EAAEV,MAAM,CAAC6G,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEC,aAAV;AAAyB,IAAA,GAAG,EAAC,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAFF,CAVJ,EAiBGzB,KAAK,CAAC3E,MAAN,GAAe,CAAf,IAAoB2E,KAAK,CAACf,GAAN,CAAWkB,CAAD;AAAA;;AAAA,wBAC7B;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAExF,MAAM,CAACyF,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAErG,EAAE,CAACY,MAAM,CAAC0F,cAAR,EACX;AAAE,SAAC1F,MAAM,CAAC2F,QAAR,GAAmBH,CAAC,CAACzC,MAAF,KAAatB,cAAb,IAA+B,CAAC+D,CAAC,CAACvD;AAAvD,OADW,CADf;AAGE,MAAA,OAAO,EAAE,MAAM;AACb,YAAIuD,CAAC,CAACzC,MAAF,KAAatB,cAAb,IAA+B,CAAC+D,CAAC,CAACvD,WAAtC,EAAmD;AACjDkD,UAAAA,cAAc,CAAC,EAAD,CAAd;AACAvD,UAAAA,eAAe,CAAC,KAAD,CAAf;AACA;AACD;;AACDuD,QAAAA,cAAc,CAACK,CAAC,CAACzC,MAAH,CAAd;AACAnB,QAAAA,eAAe,CAAC4D,CAAC,CAACuB,cAAH,CAAf;AACD,OAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAaE;AAAK,MAAA,SAAS,EAAE3H,EAAE,CAACY,MAAM,CAAC+F,IAAR,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAK,MAAA,SAAS,EAAE/F,MAAM,CAACgG,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAEhG,MAAM,CAACiG,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACT,CAAC,CAACvD,WAAH,iBACC,0CACGuD,CAAC,CAACwB,WADL,CAFJ,EAMGxB,CAAC,CAACvD,WAAF,iBACC,oBAAC,SAAD;AACE,MAAA,OAAO,EAAE,MAAM;AACb,cAAMgF,KAAK,GAAG9E,eAAe,CAACqD,CAAC,CAACzC,MAAH,CAA7B;AACAX,QAAAA,kBAAkB,CAAC,EACjB,GAAGD,eADc;AAEjB,WAACqD,CAAC,CAACzC,MAAH,GAAY,CAACkE;AAFI,SAAD,CAAlB;AAID,OAPH;AAQE,MAAA,SAAS,EAAEjH,MAAM,CAACmG,MARpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAUGX,CAAC,CAACwB,WAVL,CAPJ,CADF,EAsBG,EAACxB,CAAD,aAACA,CAAD,eAACA,CAAC,CAAEvD,WAAJ,kBACC;AACE,MAAA,SAAS,EAAEjC,MAAM,CAACmG,MADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,GAAEpF,IAAI,CAACqF,QAAS,IAAGZ,CAApB,aAAoBA,CAApB,mCAAoBA,CAAC,CAAE0B,KAAvB,6CAAoB,SAAUnD,OAAV,CAAkB,CAAlB,CAAqB,EAF5C,CAvBJ,EA4BG,CAAAyB,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEvD,WAAH,kBACC,oBAAC,SAAD;AACE,MAAA,OAAO,EAAE,MAAM;AACb,cAAMgF,KAAK,GAAG9E,eAAe,CAACqD,CAAC,CAACzC,MAAH,CAA7B;AACAX,QAAAA,kBAAkB,CAAC,EACjB,GAAGD,eADc;AAEjB,WAACqD,CAAC,CAACzC,MAAH,GAAY,CAACkE;AAFI,SAAD,CAAlB;AAID,OAPH;AAQE,MAAA,SAAS,EAAEjH,MAAM,CAACmG,MARpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAUE;AAAK,MAAA,GAAG,EAAEhE,eAAe,CAACqD,CAAC,CAACzC,MAAH,CAAf,GAA4BoE,UAA5B,GAAyCC,aAAnD;AAAkE,MAAA,GAAG,EAAC,EAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,CA7BJ,CADF,EA4CGnG,OAAO,IAAI,EAACuE,CAAD,aAACA,CAAD,eAACA,CAAC,CAAEvD,WAAJ,CAAX,iBACC;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,OAAO,EAAC,WAFV;AAGE,MAAA,SAAS,EAAEjC,MAAM,CAACsG,QAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAQE;AAAM,MAAA,SAAS,EAAEtG,MAAM,CAACuG,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEf,CAAC,CAACzC,MAAF,KAAatB,cAAb,GAA8B+E,UAA9B,GAA2CC,YAArD;AAAmE,MAAA,GAAG,EAAC,EAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CARF,CA7CJ,EA0DG,CAACxF,OAAD,iBACC;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,OAAO,EAAC,WAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGuE,CAAC,CAACuB,cAAF,IAAoB9F,OAApB,GACG,kBADH,GACwB,qBAL3B,CADF,CA3DJ,EAqEGkB,eAAe,CAACqD,CAAC,CAACzC,MAAH,CAAf,IAA6BuC,IAAI,CAACrD,WAAW,CAACuD,CAAC,CAACzC,MAAH,CAAX,IAAyB,EAA1B,EAA8ByC,CAAC,CAACzC,MAAhC,CArEpC,CAFF,CAbF,CADF,CADF,CAD6B;AAAA,GAAV,CAjBvB,EA+GG,CAAC9B,OAAD,IAAYoE,KAAK,CAAC3E,MAAN,GAAe,CAA3B,iBACC,0CACGiB,YAAY,iBACX;AAAK,IAAA,SAAS,EAAE3B,MAAM,CAACqH,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAErH,MAAM,CAACsH,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE;AAAK,IAAA,SAAS,EAAEtH,MAAM,CAACuH,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAMtC,WAAW,CAAC,KAAD,CAD5B;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,OAAO,EAAE,KAHX;AAIE,IAAA,KAAK,EAAC,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAMA,WAAW,CAAC,IAAD,CAD5B;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAC,KAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CAFF,CAFJ,EAmBG,CAACtD,YAAD,iBACC;AAAK,IAAA,SAAS,EAAE3B,MAAM,CAACwH,eAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAMvC,WAAW,CAAC,KAAD,CAD5B;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,SAAS,EAAE,IAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CApBJ,CAhHJ,EA+IGhE,OAAO,iBACN,0CACGoE,KAAK,CAAC3E,MAAN,GAAe,CAAf,iBACC;AAAK,IAAA,SAAS,EAAEV,MAAM,CAACwH,eAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE5E,QADX;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAC,SAHR;AAIE,IAAA,SAAS,EAAE,IAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFJ,CAhJJ,EA6JGyC,KAAK,CAAC3E,MAAN,KAAiB,CAAjB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbQ,MAAAA,OAAO,CAACoC,IAAR,CAAa,0BAAb;AACD,KAHH;AAIE,IAAA,KAAK,EAAC,0BAJR;AAKE,IAAA,SAAS,EAAE,IALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CA9JJ,eAwKE;AAAK,IAAA,SAAS,EAAEtD,MAAM,CAACyH,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxKF,EAyKGhF,eAAe,iBACd,oBAAC,KAAD;AACE,IAAA,IAAI,EAAG;AACjB,eAAe1B,IAAI,CAACqF,QAAS,IAAGvE,aAAa,CAACc,SAAU;AACxD,wBAHQ;AAIE,IAAA,OAAO,EAAG,OAAM5B,IAAI,CAACqF,QAAS,IAAGvE,aAAa,CAACa,QAAS,EAJ1D;AAKE,IAAA,SAAS,EAAE1C,MAAM,CAAC4G,SALpB;AAME,IAAA,OAAO,EAAErE,YANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1KJ,CADF;AAsLD;;GAndetC,K;UAMIhB,Q,EAOLQ,O,EACDT,S,EAEIM,U,EAOkBE,S;;;KAvBpBS,K;AAqdhBA,KAAK,CAACyH,SAAN,GAAkB;AAChBxH,EAAAA,UAAU,EAAEnB,SAAS,CAAC4I,IAAV,CAAeC,UADX;AAEhBxH,EAAAA,UAAU,EAAErB,SAAS,CAAC4I,IAAV,CAAeC,UAFX;AAGhBzH,EAAAA,OAAO,EAAEpB,SAAS,CAAC8I,MAHH;AAIhBxH,EAAAA,KAAK,EAAE;AAJS,CAAlB;AAOAJ,KAAK,CAAC6H,YAAN,GAAqB;AACnB3H,EAAAA,OAAO,EAAE,EADU;AAEnBE,EAAAA,KAAK,EAAE;AAFY,CAArB","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useGetIds, useOrder } from 'contexts/orderContext';\nimport { Factory } from 'api';\nimport Loader from 'services/loader';\nimport cx from 'classnames';\nimport SnackBar from 'services/snackbar';\nimport { useHistory } from 'react-router-dom';\nimport { isIND } from 'contexts/userContext';\nimport selectIcon from 'assets/v2/orders/select.svg';\nimport unselectIcon from 'assets/v2/orders/unselect.svg';\nimport chevronTop from 'assets/v2/common/chevronGreyTop.svg';\nimport chevronBottom from 'assets/v2/common/chevronGreyBottom.svg';\nimport { useToggle } from 'hooks/common';\nimport { useShop } from 'contexts';\nimport Alert from 'components/shared/alert/Alert';\nimport { Badge, Button, Clickable } from 'phoenix-components';\nimport { inParallelWithLimit } from 'utils/parallel';\nimport emptyShipping from 'assets/v2/orders/emptyShipping.svg';\nimport EventManager from 'utils/events';\nimport styles from './Step.module.css';\n\nexport function Step2({\n  handleNext,\n  groupId,\n  handleBack,\n  order,\n}) {\n  const rootOrder = useOrder();\n  const weight = order?.weight;\n  const height = order?.dimensions?.height;\n  const length = order?.dimensions?.length;\n  const width = order?.dimensions?.width;\n  const addressId = order?.addressId;\n  const codAmount = +order._shippingCodAmount || 0;\n  const shop = useShop();\n  const ids = useGetIds();\n  const isIndia = isIND();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [shippingRates, setShippingRates] = useState([]);\n  const [selectedRate, setSelectedRate] = useState(-1);\n  const [selectedVendor, setSelectedVendor] = useState('');\n  const [pickUpEnable, setPickUpEnable] = useState(false);\n  const [inSuffDetails, setInSufDetails] = useState({});\n  const [showError, setShowError] = useToggle(false);\n  const [subPartners, setSubPartners] = useState({});\n  const [subPartnersOpen, setSubPartnersOpen] = useState({});\n\n  console.log(subPartners);\n\n  const toggleWallet = () => history.replace('/payments?open=1&tab=wallet&type=cash&state=credits');\n\n  const showInSuffAlert = +inSuffDetails?.shortage > 0 && +inSuffDetails?.requested > 0;\n\n  const onSubmit = async () => {\n    if ((selectedRate === -1 && selectedVendor === 'shiprocket') || selectedVendor.length === 0) {\n      setShowError(true);\n      return;\n    }\n    try {\n      Loader.show();\n      const payload = {\n        addressId,\n        weight: +weight,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height,\n        },\n        vendor: selectedVendor,\n        type: 'windo',\n        partnerId: selectedRate,\n        ids,\n        codAmount,\n      };\n      const {\n        groupId: grpId,\n        orderId\n      } = await Factory.shipOrder(rootOrder._id, groupId, payload);\n      history.push({\n        pathname: `/orders/${orderId}/thankyou`,\n        state: {\n          groupId: grpId,\n          id: orderId\n        }\n      });\n      EventManager.emitEvent('order_shipped', {\n        type: payload.type,\n        id: orderId,\n        groupId: grpId || '',\n      });\n    } catch (e) {\n      if (e?.response?.status === 403) {\n        setInSufDetails({\n          shortage: e?.response?.data?.shortage?.toFixed(2),\n          requested: e?.response?.data?.requested?.toFixed(2)\n        });\n        return;\n      }\n      if (e?.response?.status === 412) {\n        SnackBar.show('Please add shop address to ship', 'error');\n        history.push('/manage/address', {\n          redirectTo: `/orders/${rootOrder._id}`,\n        });\n        return;\n      }\n      if (e?.response?.status === 422) {\n        SnackBar.showError(e);\n        return;\n      }\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const getShippingRates = async () => {\n    try {\n      setIsLoading(true);\n      Loader.show();\n      const payload = {\n        weight: +weight,\n        addressId,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height,\n        },\n        codAmount\n      };\n      const response = await Factory.getShippingRates(rootOrder._id, groupId, payload);\n      const filtered = response.filter(x => x.subPartners)\n        .map(x => ({ name: x.vendor }));\n\n      const subPartners1 = await inParallelWithLimit(filtered, 5, async vendor => {\n        try {\n          const res = await Factory.getPartnerShippingRates(rootOrder._id, groupId, vendor.name, payload);\n          return { [vendor.name]: res };\n        } catch (e) {\n          const message = e?.response?.data?.message || e?.message || 'Something went wrong';\n          SnackBar.showError(`unable to fetch ${vendor.name} shipping rates ${message}`);\n          return null;\n        }\n      });\n      setShippingRates(response);\n      const values = Object.assign({}, ...(subPartners1.filter(x => x)));\n      const transform = Object.keys(values)\n        .map(x => ({ [x]: false }));\n      setSubPartnersOpen(Object.assign({}, ...transform));\n      setSubPartners(values);\n    } catch (e) {\n      if (e?.response?.data?.message) {\n        SnackBar.show(e?.response?.data?.message, 'error');\n        return;\n      }\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n      setIsLoading(false);\n    }\n  };\n\n  const createOrder = async (scheduledRequire) => {\n    if (selectedRate === -1 || selectedVendor.length === 0) {\n      setShowError(true);\n      return;\n    }\n    try {\n      Loader.show();\n      const payload = {\n        addressId,\n        weight: +weight,\n        dimensions: {\n          length: +length,\n          width: +width,\n          height: +height,\n        },\n        vendor: selectedVendor,\n        type: 'windo',\n        partnerId: selectedRate,\n        ids,\n        codAmount,\n      };\n      const {\n        groupId: grpId,\n        orderId\n      } = await Factory.shipOrder(rootOrder._id, groupId, payload);\n      if (scheduledRequire) {\n        handleNext();\n      }\n      if (!scheduledRequire) {\n        history.push({\n          pathname: `/orders/${orderId}/thankyou`,\n          state: {\n            groupId: grpId,\n            id: orderId\n          }\n        });\n      }\n    } catch (e) {\n      if (e?.response?.status === 403) {\n        setInSufDetails({\n          shortage: e?.response?.data?.shortage?.toFixed(2),\n          requested: e?.response?.data?.requested?.toFixed(2)\n        });\n        return;\n      }\n      if (e?.response?.status === 412) {\n        SnackBar.show('Please add shop address to ship', 'error');\n        history.push('/manage/address', {\n          redirectTo: `/orders/${rootOrder._id}`,\n        });\n        return;\n      }\n      if (e?.response?.status === 422) {\n        SnackBar.showError(e);\n        return;\n      }\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    // others\n    if (!weight || !height || !width || !length) {\n      handleBack();\n      return;\n    }\n    getShippingRates();\n  }, [order?.dimensions]);\n\n  const onSelectVendor = (id) => setSelectedVendor(id);\n  const onSelectRate = (id) => setSelectedRate(id);\n\n  const rates = shippingRates;\n\n  const card = (items, vendor) => items.map(y => (\n    <div className=\"marginSTopBottom\">\n      <div className={styles.content}>\n        <div\n          className={cx(styles.courierSection,\n            { [styles.selected]: y.id === selectedRate })}\n          onClick={(e) => {\n            if (y.id === selectedRate) {\n              onSelectVendor('');\n              onSelectRate(-1);\n              setPickUpEnable(false);\n              return;\n            }\n            onSelectVendor(vendor);\n            onSelectRate(y.id);\n            setPickUpEnable(y.pickUpAvailable);\n            e.preventDefault();\n            e.stopPropagation();\n          }}\n        >\n          <div className={cx(styles.flex)}>\n            <div className={styles.courSection}>\n              <div className=\"flexBetween marginSTopBottom\">\n                <div className={styles.cName}>{y.provider}</div>\n                <div\n                  className={styles.cPrice}>\n                  {`${shop.currency} ${y?.amount?.toFixed(2)}`}\n                </div>\n              </div>\n              {isIndia && (\n                <div className=\"flexBetween marginSTopBottom\">\n                  <Badge\n                    size=\"small\"\n                    variant=\"secondary\"\n                    className={styles.doorStep}\n                  >\n                    Door-Step Pickup\n                  </Badge>\n                  <span className={styles.ratingContainer}>\n                    <img src={y.id === selectedRate ? selectIcon : unselectIcon} alt=\"\" />\n                  </span>\n                </div>\n              )}\n              {!isIndia && (\n                <div className=\"flexBetween marginSTopBottom\">\n                  <Badge\n                    size=\"small\"\n                    variant=\"secondary\"\n                  >\n                    {y.pickUpAvailable\n                      ? 'Door-Step Pickup' : 'No Door-Step Pickup'}\n                  </Badge>\n                  <span className={styles.ratingContainer}>\n                    <img src={y.id === selectedRate ? selectIcon : unselectIcon} alt=\"\" />\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ));\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <div className={cx(styles.couriersSection, pickUpEnable && styles.alterHeight)}>\n      {showError && (\n        <Alert\n          text=\"Please select provider\"\n          btnText=\"Ok\"\n          textClass={styles.textClass}\n          onClick={setShowError}\n        />\n      )}\n      {rates.length === 0 && (\n        <div className={styles.emptyCouriers}>\n          <img src={emptyShipping} alt=\"\" />\n          <div>\n            No Shipping Partners Connected\n          </div>\n        </div>\n      )}\n      {rates.length > 0 && rates.map((y) => (\n        <div className=\"marginSTopBottom\">\n          <div className={styles.content}>\n            <div\n              className={cx(styles.courierSection,\n                { [styles.selected]: y.vendor === selectedVendor && !y.subPartners })}\n              onClick={() => {\n                if (y.vendor === selectedVendor && !y.subPartners) {\n                  onSelectVendor('');\n                  setPickUpEnable(false);\n                  return;\n                }\n                onSelectVendor(y.vendor);\n                setPickUpEnable(y.schedulePickUp);\n              }}\n            >\n              <div className={cx(styles.flex)}>\n                {/* <img className={styles.courImg} src={x.providerImage} alt=\"\" /> */}\n                <div className={styles.courSection}>\n                  <div className=\"flexBetween marginSTopBottom\">\n                    <div className={styles.cName}>\n                      {!y.subPartners && (\n                        <>\n                          {y.displayName}\n                        </>\n                      )}\n                      {y.subPartners && (\n                        <Clickable\n                          onClick={() => {\n                            const value = subPartnersOpen[y.vendor];\n                            setSubPartnersOpen({\n                              ...subPartnersOpen,\n                              [y.vendor]: !value\n                            });\n                          }}\n                          className={styles.cPrice}\n                        >\n                          {y.displayName}\n                        </Clickable>\n                      )}\n                    </div>\n                    {!y?.subPartners && (\n                      <div\n                        className={styles.cPrice}>\n                        {`${shop.currency} ${y?.total?.toFixed(2)}`}\n                      </div>\n                    )}\n                    {y?.subPartners && (\n                      <Clickable\n                        onClick={() => {\n                          const value = subPartnersOpen[y.vendor];\n                          setSubPartnersOpen({\n                            ...subPartnersOpen,\n                            [y.vendor]: !value\n                          });\n                        }}\n                        className={styles.cPrice}\n                      >\n                        <img src={subPartnersOpen[y.vendor] ? chevronTop : chevronBottom} alt=\"\" />\n                      </Clickable>\n                    )}\n                  </div>\n                  {isIndia && !y?.subPartners && (\n                    <div className=\"flexBetween marginSTopBottom\">\n                      <Badge\n                        size=\"small\"\n                        variant=\"secondary\"\n                        className={styles.doorStep}\n                      >\n                        Door-Step Pickup\n                      </Badge>\n                      <span className={styles.ratingContainer}>\n                        <img src={y.vendor === selectedVendor ? selectIcon : unselectIcon} alt=\"\" />\n                      </span>\n                    </div>\n                  )}\n                  {!isIndia && (\n                    <div className=\"flexBetween marginSTopBottom\">\n                      <Badge\n                        size=\"small\"\n                        variant=\"secondary\"\n                      >\n                        {y.schedulePickUp || isIndia\n                          ? 'Door-Step Pickup' : 'No Door-Step Pickup'}\n                      </Badge>\n                    </div>\n                  )}\n                  {subPartnersOpen[y.vendor] && card(subPartners[y.vendor] || [], y.vendor)}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n      {!isIndia && rates.length > 0 && (\n        <>\n          {pickUpEnable && (\n            <div className={styles.actions}>\n              <div className={styles.label}> Need Doorstep Pickup?</div>\n              <div className={styles.buttons}>\n                <Button\n                  onClick={() => createOrder(false)}\n                  size=\"large\"\n                  primary={false}\n                  label=\"No\"\n                />\n                <Button\n                  onClick={() => createOrder(true)}\n                  size=\"large\"\n                  label=\"Yes\"\n                />\n              </div>\n            </div>\n          )}\n          {!pickUpEnable && (\n            <div className={styles.buttonContainer}>\n              <Button\n                onClick={() => createOrder(false)}\n                size=\"large\"\n                label=\"Next\"\n                fullWidth={true}\n              />\n            </div>\n          )}\n        </>\n      )}\n      {isIndia && (\n        <>\n          {rates.length > 0 && (\n            <div className={styles.buttonContainer}>\n              <Button\n                onClick={onSubmit}\n                size=\"large\"\n                label=\"Confirm\"\n                fullWidth={true}\n              />\n            </div>\n          )}\n        </>\n      )}\n      {rates.length === 0 && (\n        <div>\n          <Button\n            onClick={() => {\n              history.push('/manage/shippingPartners');\n            }}\n            label=\"Connect Shipping Partner\"\n            fullWidth={true}\n          />\n        </div>\n      )}\n      <div className={styles.spacer}></div>\n      {showInSuffAlert && (\n        <Alert\n          text={`Your estimated shipping charges are\n             ${shop.currency} ${inSuffDetails.requested}. Please add sufficient balance\n             to proceed`}\n          btnText={`Add ${shop.currency} ${inSuffDetails.shortage}`}\n          textClass={styles.textClass}\n          onClick={toggleWallet}\n        />\n      )}\n    </div>\n  );\n}\n\nStep2.propTypes = {\n  handleNext: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  groupId: PropTypes.string,\n  order: {},\n};\n\nStep2.defaultProps = {\n  groupId: '',\n  order: {},\n};\n"]},"metadata":{},"sourceType":"module"}