{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/coupons/Coupon.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport penIcon from \"../../assets/images/coupons/pen.svg\";\nimport expiry from \"../../assets/images/coupons/expiry.svg\";\nimport radioOff from \"../../assets/images/coupons/radioOff.svg\";\nimport radioOn from \"../../assets/images/coupons/radioOnYellow.svg\";\nimport shareIcon from \"../../assets/images/coupons/share.svg\";\nimport copyIcon from \"../../assets/images/coupons/copy.svg\";\nimport DeviceUtils from \"../../utils/deviceUtils\";\nimport { CouponLevel, CouponStatus, DiscountType } from \"../../constants/coupon\";\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from \"../../hooks\";\nimport { share } from \"../../utils\";\nimport SnackBar from \"../../services/snackbar\";\nimport Loader from \"../../services/loader\";\nimport { Snitch } from \"../../api\";\nimport { shareProduct, shareShop } from \"../../utils/share\";\nimport { useCustomDomain, useIsOnCustomDomain, useShop } from \"../../contexts/userContext\";\nimport moment from 'moment';\nimport { generateSlug } from \"../../utils/slug\"; // import { useDesktop } from 'contexts';\n// import { SideDrawer } from 'components/shared/SideDrawer';\n\nimport styles from \"./Coupon.module.css\";\nexport function Coupon({\n  coupon,\n  refresh\n}) {\n  _s();\n\n  const history = useHistory();\n  const shop = useShop();\n  const params = useQueryParams();\n  const isCustomDomain = useIsOnCustomDomain();\n  const domain = useCustomDomain();\n\n  const switchStatus = async e => {\n    e.stopPropagation();\n\n    try {\n      Loader.show();\n      const status = coupon.status === CouponStatus.ACTIVE ? CouponStatus.INACTIVE : CouponStatus.ACTIVE;\n      await Snitch.updateCouponStatus(coupon._id, status);\n      refresh();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const editCoupon = async () => {\n    params.set('coupon', coupon._id);\n    history.push({\n      search: params.toString()\n    });\n  };\n\n  const shareCoupon = type => e => {\n    e.stopPropagation();\n    const func = type === 'share' ? share : DeviceUtils.copy;\n    const discountText = coupon.type === DiscountType.FLAT ? `flat ${shop.currency}${coupon.value} off` : `${coupon.value}% off upto ${shop.currency}${coupon.maxValue}`;\n\n    if (coupon.level === CouponLevel.PRODUCT) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText}.\n\nYou can place the order for this product here ${shareProduct(generateSlug('product', coupon.products[0]), shop.slug, isCustomDomain, domain)}\n\nYou can chat with us on the same link if you need any help with this order\n\nP.S Please visit my Shop at\n${shareShop(shop.slug, isCustomDomain, domain)} to see the complete catalog and buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (coupon.level === CouponLevel.SHOP) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText} on all products of my shop.\n\nPlease visit my Shop at ${shareShop(shop.slug, isCustomDomain, domain)} to buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (type === 'copy') {\n      SnackBar.show('Copied to clipboard', 'success');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.main,\n    onClick: editCoupon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.leftTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, coupon.level === CouponLevel.PRODUCT ? 'Products' : 'Shop', /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ball1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.top,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.money,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, coupon.type === DiscountType.FLAT ? `${shop.currency} ${coupon.value}` : `${coupon.value}%`), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, coupon.code), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.radio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: coupon.status === CouponStatus.ACTIVE ? radioOn : radioOff,\n    alt: \"\",\n    onClick: switchStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dashedBorder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: expiry,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.expiry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, \"Validity\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.expiredText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, `${moment(coupon.createdAt).format('ll')} to \n                ${moment(coupon.expiresAt).format('LL')} | ${moment(coupon.expiresAt).format('LT')}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.shareContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.share,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: shareCoupon('share'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    className: styles.shareIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sharetext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, \"Share Coupon\")), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: shareCoupon('copy'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: copyIcon,\n    className: styles.copyIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.copytext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, \"Copy\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.pen,\n    src: penIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })))))));\n}\n\n_s(Coupon, \"EO9+w3SSytDsLArAtxE6OYH3Gf4=\", false, function () {\n  return [useHistory, useShop, useQueryParams, useIsOnCustomDomain, useCustomDomain];\n});\n\n_c = Coupon;\nCoupon.propTypes = {\n  coupon: PropTypes.object.isRequired,\n  refresh: PropTypes.func.isRequired\n};\nCoupon.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"Coupon\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/coupons/Coupon.jsx"],"names":["React","PropTypes","DeviceUtils","CouponLevel","CouponStatus","DiscountType","useHistory","useQueryParams","share","SnackBar","Loader","Snitch","shareProduct","shareShop","useCustomDomain","useIsOnCustomDomain","useShop","moment","generateSlug","styles","Coupon","coupon","refresh","history","shop","params","isCustomDomain","domain","switchStatus","e","stopPropagation","show","status","ACTIVE","INACTIVE","updateCouponStatus","_id","showError","hide","editCoupon","set","push","search","toString","shareCoupon","type","func","copy","discountText","FLAT","currency","value","maxValue","level","PRODUCT","code","products","slug","name","SHOP","main","container","leftTitle","ball1","right","top","money","radio","radioOn","radioOff","dashedBorder","bottom","expiry","expiredText","createdAt","format","expiresAt","shareContainer","shareIcon","sharetext","copyIcon","copytext","bottomRight","pen","penIcon","propTypes","object","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport penIcon from 'assets/images/coupons/pen.svg';\nimport expiry from 'assets/images/coupons/expiry.svg';\nimport radioOff from 'assets/images/coupons/radioOff.svg';\nimport radioOn from 'assets/images/coupons/radioOnYellow.svg';\nimport shareIcon from 'assets/images/coupons/share.svg';\nimport copyIcon from 'assets/images/coupons/copy.svg';\nimport DeviceUtils from 'utils/deviceUtils';\nimport { CouponLevel, CouponStatus, DiscountType } from 'constants/coupon';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from 'hooks';\nimport { share } from 'utils';\nimport SnackBar from 'services/snackbar';\nimport Loader from 'services/loader';\nimport { Snitch } from 'api';\nimport { shareProduct, shareShop } from 'utils/share';\nimport { useCustomDomain, useIsOnCustomDomain, useShop } from 'contexts/userContext';\nimport moment from 'moment';\nimport { generateSlug } from 'utils/slug';\n// import { useDesktop } from 'contexts';\n// import { SideDrawer } from 'components/shared/SideDrawer';\nimport styles from './Coupon.module.css';\n\nexport function Coupon({\n  coupon,\n  refresh\n}) {\n  const history = useHistory();\n  const shop = useShop();\n  const params = useQueryParams();\n\n  const isCustomDomain = useIsOnCustomDomain();\n  const domain = useCustomDomain();\n\n  const switchStatus = async (e) => {\n    e.stopPropagation();\n    try {\n      Loader.show();\n      const status = coupon.status === CouponStatus.ACTIVE ? CouponStatus.INACTIVE : CouponStatus.ACTIVE;\n      await Snitch.updateCouponStatus(coupon._id, status);\n      refresh();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const editCoupon = async () => {\n    params.set('coupon', coupon._id);\n    history.push({\n      search: params.toString(),\n    });\n  };\n\n  const shareCoupon = (type) => (e) => {\n    e.stopPropagation();\n    const func = type === 'share' ? share : DeviceUtils.copy;\n    const discountText = coupon.type === DiscountType.FLAT\n      ? `flat ${shop.currency}${coupon.value} off`\n      : `${coupon.value}% off upto ${shop.currency}${coupon.maxValue}`;\n\n    if (coupon.level === CouponLevel.PRODUCT) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText}.\n\nYou can place the order for this product here ${\n  shareProduct(generateSlug('product', coupon.products[0]), shop.slug, isCustomDomain, domain)\n}\n\nYou can chat with us on the same link if you need any help with this order\n\nP.S Please visit my Shop at\n${shareShop(shop.slug, isCustomDomain, domain)} to see the complete catalog and buy my products.\n\nThank you\n${shop.name}`);\n    }\n\n    if (coupon.level === CouponLevel.SHOP) {\n      func(`Hello\n\nUse coupon code ${coupon.code} and get ${discountText} on all products of my shop.\n\nPlease visit my Shop at ${shareShop(shop.slug, isCustomDomain, domain)} to buy my products.\n\nThank you\n${shop.name}`);\n    }\n    if (type === 'copy') {\n      SnackBar.show('Copied to clipboard', 'success');\n    }\n  };\n\n  return (\n    <div className={styles.main} onClick={editCoupon}>\n      <div className={styles.container}>\n        <div className={styles.leftTitle}>\n          {coupon.level === CouponLevel.PRODUCT ? 'Products' : 'Shop'}\n          <div className={styles.ball1}></div>\n        </div>\n        <div className={styles.right}>\n          <div className={styles.top}>\n            <div className={styles.money}>\n              {coupon.type === DiscountType.FLAT ? `${shop.currency} ${coupon.value}` : `${coupon.value}%`}\n            </div>\n            <div className={styles.code}>{coupon.code}</div>\n            <div className={styles.radio}>\n              <img src={coupon.status === CouponStatus.ACTIVE ? radioOn : radioOff} alt=\"\" onClick={switchStatus} />\n            </div>\n          </div>\n          <div className={styles.dashedBorder} />\n          <div className={styles.bottom}>\n            <img src={expiry} alt=\"\" />\n            <div className={styles.expiry}>\n              <span>Validity</span>\n              <div className={styles.expiredText}>\n                {`${moment(coupon.createdAt).format('ll')} to \n                ${moment(coupon.expiresAt).format('LL')} | ${moment(coupon.expiresAt).format('LT')}`}\n              </div>\n            </div>\n          </div>\n          <div className={styles.shareContainer}>\n            <div className={styles.share}>\n              <div onClick={shareCoupon('share')}>\n                <img src={shareIcon} className={styles.shareIcon} alt=\"\" />\n                <div className={styles.sharetext}>\n                  Share Coupon\n                </div>\n              </div>\n              <div onClick={shareCoupon('copy')}>\n                <img src={copyIcon} className={styles.copyIcon} alt=\"\" />\n                <div className={styles.copytext}>\n                  Copy\n                </div>\n              </div>\n            </div>\n            <div className={styles.bottomRight}>\n              <div>\n                <img className={styles.pen} src={penIcon} alt=\"\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nCoupon.propTypes = {\n  coupon: PropTypes.object.isRequired,\n  refresh: PropTypes.func.isRequired,\n};\n\nCoupon.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}