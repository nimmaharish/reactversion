{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/profile/helloBar/CustomImage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { Clickable } from 'phoenix-components';\nimport addIcon from \"../../../assets/overview/addIcon.svg\";\nimport DeleteIcon from \"../../../assets/images/socialMedia/delete.png\";\nimport editIcon from \"../../../assets/overview/edit.svg\";\nimport { MediaDrawer } from \"../../common/MediaDrawer\";\nimport { useToggle } from \"../../../hooks/common\";\nimport { usePostsMedia } from \"../../../hooks/posts\";\nimport { useField } from 'formik';\nimport Loader from \"../../../services/loader\";\nimport Snackbar from \"../../../services/snackbar\";\nimport { compressImages } from \"../../../utils/image\";\nimport { Becca } from \"../../../api\";\nimport styles from \"./CustomImage.module.css\";\nexport function CustomImage() {\n  _s();\n\n  const [open, toggleOpen] = useToggle();\n  const [posts] = usePostsMedia();\n  const [{\n    value = ''\n  },, {\n    setValue\n  }] = useField('background.imageValue');\n  const ref = useRef();\n\n  const onFileAdd = async e => {\n    Loader.show();\n\n    try {\n      const files = await compressImages([...e.target.files]);\n\n      if (files.length) {\n        const [file] = files;\n        const fileName = file === null || file === void 0 ? void 0 : file.name;\n        const payload = new FormData();\n        payload.append('name', fileName);\n        payload.append('purpose', 'shop');\n        payload.append('type', 'helloBar');\n        payload.append('file', file);\n        const {\n          url\n        } = await Becca.uploadAsset(payload);\n        setValue(url);\n      }\n    } catch (e) {\n      Snackbar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const onImageSelect = e => {\n    toggleOpen();\n    onFileAdd(e);\n  };\n\n  const onDrawerSelect = images => {\n    toggleOpen();\n\n    if (images.length > 0) {\n      setValue(images[0].url);\n    }\n  };\n\n  const onOpen = () => {\n    if (posts.length > 0) {\n      toggleOpen();\n      return;\n    }\n\n    if (ref !== null && ref !== void 0 && ref.current) {\n      ref.current.click();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, open && /*#__PURE__*/React.createElement(MediaDrawer, {\n    onChange: onDrawerSelect,\n    accept: \"image/*\",\n    isMulti: false,\n    onClose: toggleOpen,\n    posts: posts,\n    images: [],\n    onImageSelect: onImageSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: styles.input,\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: onFileAdd,\n    multiple: false,\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), (value === null || value === void 0 ? void 0 : value.length) === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.textColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Add Custom Banner Image\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Clickable, {\n    className: \"flexCenter\",\n    onClick: onOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: addIcon,\n    alt: \"\",\n    className: styles.imgA,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }), \"Add Image\"))), value.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.containerI,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.titleI,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"Selected Custom Banner Image\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.imgContainer,\n    style: {\n      backgroundImage: `url(${value})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.imgS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.delete,\n    onClick: () => setValue(''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: DeleteIcon,\n    alt: \"\",\n    className: styles.imgD,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.edit,\n    onClick: onOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: editIcon,\n    alt: \"\",\n    className: styles.imgE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }))))));\n}\n\n_s(CustomImage, \"Dwg7jxKTnH8zGgOoSZ+ckntfVCI=\", false, function () {\n  return [useToggle, usePostsMedia, useField];\n});\n\n_c = CustomImage;\nCustomImage.propTypes = {};\nCustomImage.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomImage\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/profile/helloBar/CustomImage.jsx"],"names":["React","useRef","Clickable","DeleteIcon","MediaDrawer","useToggle","usePostsMedia","useField","Loader","Snackbar","compressImages","Becca","styles","CustomImage","open","toggleOpen","posts","value","setValue","ref","onFileAdd","e","show","files","target","length","file","fileName","name","payload","FormData","append","url","uploadAsset","showError","hide","onImageSelect","onDrawerSelect","images","onOpen","current","click","input","textColor","title","addIcon","imgA","containerI","titleI","imgContainer","backgroundImage","imgS","delete","imgD","edit","editIcon","imgE","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport { Clickable } from 'phoenix-components';\nimport addIcon from 'assets/overview/addIcon.svg';\nimport DeleteIcon from 'assets/images/socialMedia/delete.png';\nimport editIcon from 'assets/overview/edit.svg';\nimport { MediaDrawer } from 'components/common/MediaDrawer';\nimport { useToggle } from 'hooks/common';\nimport { usePostsMedia } from 'hooks/posts';\nimport { useField } from 'formik';\nimport Loader from 'services/loader';\nimport Snackbar from 'services/snackbar';\nimport { compressImages } from 'utils/image';\nimport { Becca } from 'api';\nimport styles from './CustomImage.module.css';\n\nexport function CustomImage() {\n  const [open, toggleOpen] = useToggle();\n  const [posts] = usePostsMedia();\n  const [{ value = '' }, , { setValue }] = useField('background.imageValue');\n\n  const ref = useRef();\n\n  const onFileAdd = async (e) => {\n    Loader.show();\n    try {\n      const files = await compressImages([...e.target.files]);\n      if (files.length) {\n        const [file] = files;\n        const fileName = file?.name;\n        const payload = new FormData();\n        payload.append('name', fileName);\n        payload.append('purpose', 'shop');\n        payload.append('type', 'helloBar');\n        payload.append('file', file);\n        const { url } = await Becca.uploadAsset(payload);\n        setValue(url);\n      }\n    } catch (e) {\n      Snackbar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const onImageSelect = (e) => {\n    toggleOpen();\n    onFileAdd(e);\n  };\n\n  const onDrawerSelect = (images) => {\n    toggleOpen();\n    if (images.length > 0) {\n      setValue(images[0].url);\n    }\n  };\n\n  const onOpen = () => {\n    if (posts.length > 0) {\n      toggleOpen();\n      return;\n    }\n    if (ref?.current) {\n      ref.current.click();\n    }\n  };\n\n  return (\n    <>\n      {open && (\n        <MediaDrawer\n          onChange={onDrawerSelect}\n          accept=\"image/*\"\n          isMulti={false}\n          onClose={toggleOpen}\n          posts={posts}\n          images={[]}\n          onImageSelect={onImageSelect}\n        />\n      )}\n      <input\n        className={styles.input}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={onFileAdd}\n        multiple={false}\n        ref={ref}\n      />\n      {value?.length === 0 && (\n        <div className={styles.textColor}>\n          <div className={styles.title}>\n            Add Custom Banner Image\n          </div>\n          <div className=\"spacer\" />\n          <Clickable\n            className=\"flexCenter\"\n            onClick={onOpen}\n          >\n            <>\n              <img\n                src={addIcon}\n                alt=\"\"\n                className={styles.imgA} />\n              Add Image\n            </>\n          </Clickable>\n        </div>\n      )}\n\n      {value.length > 0 && (\n        <>\n          <div className={styles.containerI}>\n            <div className={styles.titleI}>\n              Selected Custom Banner Image\n            </div>\n            <div className={styles.imgContainer} style={{ backgroundImage: `url(${value})` }}>\n            </div>\n            <div className={styles.imgS}>\n              <Clickable\n                className={styles.delete}\n                onClick={() => setValue('')}\n              >\n                <img\n                  src={DeleteIcon}\n                  alt=\"\"\n                  className={styles.imgD}\n                />\n              </Clickable>\n              <Clickable\n                className={styles.edit}\n                onClick={onOpen}\n              >\n                <img\n                  src={editIcon}\n                  alt=\"\"\n                  className={styles.imgE}\n                />\n              </Clickable>\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n\nCustomImage.propTypes = {};\n\nCustomImage.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}