{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/analytics/Analytics.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Summary } from \"../../components/analytics/Summary\";\nimport { SummaryDesktop } from \"../../components/analytics/SummaryDesktop\";\nimport { Drawer } from \"../../components/shared/Drawer\";\nimport { useShopCohort } from \"../../hooks/analytics\";\nimport { OrdersChart } from \"../../components/analytics/OrdersChart\";\nimport { UsersChart } from \"../../components/analytics/UsersChart\";\nimport { ViewsChart } from \"../../components/analytics/ViewsChart\";\nimport moment from 'moment';\nimport { DurationChart } from \"../../components/analytics/DurationChart\";\nimport { Loading } from \"../../components/shared/Loading\";\nimport { useHistory } from 'react-router-dom';\nimport chevronLeftDesk from \"../../assets/v2/common/chevronPrimaryLeft.svg\";\nimport { useDesktop } from \"../../contexts\";\nimport { Clickable } from 'phoenix-components';\nimport { MenuItem, Select } from '@material-ui/core';\nimport { Grid } from '@material-ui/core';\nimport Kbc from \"../../components/knowBaseCards/KnowBaseCards\";\nimport styles from \"./Analytics.module.css\";\n\nfunction getFilters(type) {\n  switch (type) {\n    case 'week':\n      return {\n        date: {\n          $gte: moment().startOf('week'),\n          $lte: moment().endOf('day')\n        }\n      };\n\n    case 'month':\n      return {\n        date: {\n          $gte: moment().startOf('month'),\n          $lte: moment().endOf('day')\n        }\n      };\n\n    case 'lastWeek':\n      return {\n        date: {\n          $gte: moment().startOf('week').subtract(1, 'week'),\n          $lte: moment().startOf('week').subtract(1, 'week').endOf('week')\n        }\n      };\n\n    case 'lastMonth':\n      return {\n        date: {\n          $gte: moment().startOf('month').subtract(1, 'month'),\n          $lte: moment().startOf('month').subtract(1, 'month').endOf('month')\n        }\n      };\n\n    default:\n      return {\n        date: {\n          $gte: moment().startOf('day'),\n          $lte: moment().endOf('day')\n        }\n      };\n  }\n}\n\nconst getDates = filter => {\n  let start = moment(filter.$gte);\n  const end = filter.$lte;\n  const list = [];\n\n  while (start <= end) {\n    list.push(start.format('YYYY-MM-DD'));\n    start = start.add(1, 'day');\n  }\n\n  return list;\n};\n\nconst labels = [{\n  label: 'This Week',\n  value: 'week'\n}, {\n  label: 'Last Week',\n  value: 'lastWeek'\n}, {\n  label: 'This Month',\n  value: 'month'\n}, {\n  label: 'Last Month',\n  value: 'lastMonth'\n}];\n\nfunction Analytics() {\n  _s();\n\n  const isDesktop = useDesktop();\n  const history = useHistory();\n  const [duration, setDuration] = useState('month');\n  const filters = getFilters(duration);\n  const [summary] = useShopCohort(filters);\n  const dates = getDates(filters.date);\n\n  if (!summary) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.deskBackButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chevronLeftDesk,\n    alt: \"\",\n    onClick: history.goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.desktopHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"Your full report\")), /*#__PURE__*/React.createElement(SummaryDesktop, {\n    mini: true,\n    heading: \"Today\\u2019s Report\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, \"Orders\", /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    value: duration,\n    onChange: e => setDuration(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, labels.map(label => /*#__PURE__*/React.createElement(MenuItem, {\n    key: label.value,\n    value: label.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, label.label))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OrdersChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    orders: summary.orders || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"Total Users\", /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    value: duration,\n    onChange: e => setDuration(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, labels.map(label => /*#__PURE__*/React.createElement(MenuItem, {\n    key: label.value,\n    value: label.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, label.label))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(UsersChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"Product Views\", /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    value: duration,\n    onChange: e => setDuration(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, labels.map(label => /*#__PURE__*/React.createElement(MenuItem, {\n    key: label.value,\n    value: label.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, label.label))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ViewsChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"User Duration (minutes)\", /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    value: duration,\n    onChange: e => setDuration(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, labels.map(label => /*#__PURE__*/React.createElement(MenuItem, {\n    key: label.value,\n    value: label.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, label.label))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DurationChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexCenter fullWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Kbc, {\n    type: \"shopanalytics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }))), !isDesktop && /*#__PURE__*/React.createElement(Drawer, {\n    title: \"Shop Analytics\",\n    containerClass: styles.background,\n    topBarClass: styles.background,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Summary, {\n    mini: true,\n    heading: \"Summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.select,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    value: duration,\n    onChange: e => setDuration(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, labels.map(label => /*#__PURE__*/React.createElement(MenuItem, {\n    key: label.value,\n    value: label.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, label.label)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, \"Orders\"), /*#__PURE__*/React.createElement(OrdersChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    orders: summary.orders || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, \"Total Users\"), /*#__PURE__*/React.createElement(UsersChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, \"Views\"), /*#__PURE__*/React.createElement(ViewsChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, \"User Duration (minutes)\"), /*#__PURE__*/React.createElement(DurationChart, {\n    syncId: \"analytics\",\n    dates: dates,\n    users: summary.users || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.kbc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Kbc, {\n    type: \"shopanalytics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  })))));\n}\n\n_s(Analytics, \"YjFgvRCpGX4JvL2zOV8eDpFmtkE=\", false, function () {\n  return [useDesktop, useHistory, useShopCohort];\n});\n\n_c = Analytics;\nAnalytics.propTypes = {};\nAnalytics.defaultProps = {};\nexport default Analytics;\n\nvar _c;\n\n$RefreshReg$(_c, \"Analytics\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/analytics/Analytics.jsx"],"names":["React","useState","Summary","SummaryDesktop","Drawer","useShopCohort","OrdersChart","UsersChart","ViewsChart","moment","DurationChart","Loading","useHistory","useDesktop","Clickable","MenuItem","Select","Grid","Kbc","styles","getFilters","type","date","$gte","startOf","$lte","endOf","subtract","getDates","filter","start","end","list","push","format","add","labels","label","value","Analytics","isDesktop","history","duration","setDuration","filters","summary","dates","container","header","deskBackButton","chevronLeftDesk","goBack","desktopHeading","heading","e","target","map","chart","orders","users","background","select","kbc","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Summary } from 'components/analytics/Summary';\nimport { SummaryDesktop } from 'components/analytics/SummaryDesktop';\nimport { Drawer } from 'components/shared/Drawer';\nimport { useShopCohort } from 'hooks/analytics';\nimport { OrdersChart } from 'components/analytics/OrdersChart';\nimport { UsersChart } from 'components/analytics/UsersChart';\nimport { ViewsChart } from 'components/analytics/ViewsChart';\nimport moment from 'moment';\nimport { DurationChart } from 'components/analytics/DurationChart';\nimport { Loading } from 'components/shared/Loading';\nimport { useHistory } from 'react-router-dom';\nimport chevronLeftDesk from 'assets/v2/common/chevronPrimaryLeft.svg';\nimport { useDesktop } from 'contexts';\nimport { Clickable } from 'phoenix-components';\nimport { MenuItem, Select } from '@material-ui/core';\nimport { Grid } from '@material-ui/core';\nimport Kbc from 'components/knowBaseCards/KnowBaseCards';\nimport styles from './Analytics.module.css';\n\nfunction getFilters(type) {\n  switch (type) {\n    case 'week':\n      return {\n        date: {\n          $gte: moment()\n            .startOf('week'),\n          $lte: moment()\n            .endOf('day'),\n        }\n      };\n    case 'month':\n      return {\n        date: {\n          $gte: moment()\n            .startOf('month'),\n          $lte: moment()\n            .endOf('day'),\n        }\n      };\n    case 'lastWeek':\n      return {\n        date: {\n          $gte: moment()\n            .startOf('week')\n            .subtract(1, 'week'),\n          $lte: moment()\n            .startOf('week')\n            .subtract(1, 'week')\n            .endOf('week'),\n        }\n      };\n    case 'lastMonth':\n      return {\n        date: {\n          $gte: moment()\n            .startOf('month')\n            .subtract(1, 'month'),\n          $lte: moment()\n            .startOf('month')\n            .subtract(1, 'month')\n            .endOf('month'),\n        }\n      };\n    default:\n      return {\n        date: {\n          $gte: moment()\n            .startOf('day'),\n          $lte: moment()\n            .endOf('day'),\n        }\n      };\n  }\n}\nconst getDates = filter => {\n  let start = moment(filter.$gte);\n  const end = filter.$lte;\n  const list = [];\n  while (start <= end) {\n    list.push(start.format('YYYY-MM-DD'));\n    start = start.add(1, 'day');\n  }\n  return list;\n};\n\nconst labels = [\n  { label: 'This Week', value: 'week' },\n  { label: 'Last Week', value: 'lastWeek' },\n  { label: 'This Month', value: 'month' },\n  { label: 'Last Month', value: 'lastMonth' },\n];\n\nfunction Analytics() {\n  const isDesktop = useDesktop();\n  const history = useHistory();\n  const [duration, setDuration] = useState('month');\n  const filters = getFilters(duration);\n  const [summary] = useShopCohort(filters);\n  const dates = getDates(filters.date);\n  if (!summary) {\n    return <Loading />;\n  }\n  return (\n    <>\n      {isDesktop && (\n        <div className={styles.container}>\n          <div className={styles.header}>\n            <Clickable\n              className={styles.deskBackButton}>\n              <img src={chevronLeftDesk} alt=\"\" onClick={history.goBack} />\n            </Clickable>\n            <div className={styles.desktopHeading}>\n              Your full report\n            </div>\n          </div>\n          <SummaryDesktop mini={true} heading=\"Todayâ€™s Report\" />\n          <div className={styles.heading}>\n            Orders\n            <Grid item xs={2}>\n              <Select value={duration} onChange={e => setDuration(e.target.value)}>\n                {labels.map(label => (\n                  <MenuItem key={label.value} value={label.value}>{label.label}</MenuItem>\n                ))}\n              </Select>\n            </Grid>\n          </div>\n          <div className={styles.chart}>\n            <OrdersChart syncId=\"analytics\" dates={dates} orders={summary.orders || {}} />\n          </div>\n\n          <div className={styles.heading}>\n            Total Users\n            <Grid item xs={2}>\n              <Select value={duration} onChange={e => setDuration(e.target.value)}>\n                {labels.map(label => (\n                  <MenuItem key={label.value} value={label.value}>{label.label}</MenuItem>\n                ))}\n              </Select>\n            </Grid>\n          </div>\n          <div className={styles.chart}>\n            <UsersChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n          </div>\n          <div className={styles.heading}>\n            Product Views\n            <Grid item xs={2}>\n              <Select value={duration} onChange={e => setDuration(e.target.value)}>\n                {labels.map(label => (\n                  <MenuItem key={label.value} value={label.value}>{label.label}</MenuItem>\n                ))}\n              </Select>\n            </Grid>\n          </div>\n          <div className={styles.chart}>\n            <ViewsChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n          </div>\n          <div className={styles.heading}>\n            User Duration (minutes)\n            <Grid item xs={2}>\n              <Select value={duration} onChange={e => setDuration(e.target.value)}>\n                {labels.map(label => (\n                  <MenuItem key={label.value} value={label.value}>{label.label}</MenuItem>\n                ))}\n              </Select>\n            </Grid>\n          </div>\n          <div className={styles.chart}>\n            <div className={styles.heading}></div>\n            <DurationChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n          </div>\n          <div className=\"flexCenter fullWidth\">\n            <Kbc type=\"shopanalytics\" />\n          </div>\n        </div>\n      )}\n      {!isDesktop\n        && (\n          <Drawer title=\"Shop Analytics\" containerClass={styles.background} topBarClass={styles.background}>\n            <div className={styles.container}>\n              <Summary mini={true} heading=\"Summary\" />\n              <div className={styles.select}>\n                <Select value={duration} onChange={e => setDuration(e.target.value)}>\n                  {labels.map(label => (\n                    <MenuItem key={label.value} value={label.value}>{label.label}</MenuItem>\n                  ))}\n                </Select>\n              </div>\n              <div className={styles.chart}>\n                <div className={styles.heading}>Orders</div>\n                <OrdersChart syncId=\"analytics\" dates={dates} orders={summary.orders || {}} />\n              </div>\n              <div className={styles.chart}>\n                <div className={styles.heading}>Total Users</div>\n                <UsersChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n              </div>\n              <div className={styles.chart}>\n                <div className={styles.heading}>Views</div>\n                <ViewsChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n              </div>\n              <div className={styles.chart}>\n                <div className={styles.heading}>User Duration (minutes)</div>\n                <DurationChart syncId=\"analytics\" dates={dates} users={summary.users || {}} />\n              </div>\n              <div className={styles.kbc}>\n                <Kbc type=\"shopanalytics\" />\n              </div>\n            </div>\n          </Drawer>\n        )}\n    </>\n  );\n}\n\nAnalytics.propTypes = {};\n\nAnalytics.defaultProps = {};\n\nexport default Analytics;\n"]},"metadata":{},"sourceType":"module"}