{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/profile/shippingModes/Card.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Switch } from 'phoenix-components/lib/formik';\nimport { useField, useFormikContext } from 'formik';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport editIcon from \"../../../assets/overview/editIcon.svg\";\nimport deleteIcon from \"../../../assets/images/address/delete.svg\";\nimport SnackBar from \"../../../services/snackbar\";\nimport { useToggle } from \"../../../hooks/common\";\nimport { DeleteAlert } from \"../../../components/shared/DeleteAlert\";\nimport { useShop } from \"../../../contexts\";\nimport { useHistory } from 'react-router-dom';\nimport styles from \"./Card.module.css\";\nexport default function Card({\n  onEdit,\n  idx,\n  path,\n  type: itemType\n}) {\n  _s();\n\n  var _item$title, _item$type;\n\n  const [{\n    value: enabled\n  },, {\n    setValue\n  }] = useField(`${path}.enabled`);\n  const {\n    submitForm,\n    values,\n    setValues\n  } = useFormikContext();\n  const [{\n    value: item\n  }] = useField(path);\n  const title = (_item$title = item === null || item === void 0 ? void 0 : item.title) !== null && _item$title !== void 0 ? _item$title : 'No title';\n  const type = (_item$type = item === null || item === void 0 ? void 0 : item.type) !== null && _item$type !== void 0 ? _item$type : '';\n  const [openDel, toggleDel] = useToggle();\n  const history = useHistory();\n  const {\n    addresses = []\n  } = useShop();\n\n  const handleChange = () => {\n    if (enabled) {\n      var _values$delivery, _values$pickup, _values$custom;\n\n      const deliveryEnabled = values === null || values === void 0 ? void 0 : (_values$delivery = values.delivery) === null || _values$delivery === void 0 ? void 0 : _values$delivery.enabled;\n      const pickupEnabled = values === null || values === void 0 ? void 0 : (_values$pickup = values.pickup) === null || _values$pickup === void 0 ? void 0 : _values$pickup.enabled;\n      const customEnabled = values === null || values === void 0 ? void 0 : (_values$custom = values.custom) === null || _values$custom === void 0 ? void 0 : _values$custom.filter(item => item === null || item === void 0 ? void 0 : item.enabled);\n      const onlyOneEnabled = [deliveryEnabled, pickupEnabled, ...customEnabled].filter(Boolean).length <= 1;\n\n      if (onlyOneEnabled) {\n        SnackBar.showError('Atleast one shipping mode should be enabled');\n        return;\n      }\n    }\n\n    if (path === 'pickup' && !enabled && addresses.length === 0) {\n      SnackBar.show('please add shop address', 'error');\n      history.push('/manage/address', {\n        redirectTo: '/manage/shippingModes'\n      });\n    }\n\n    setValue(!enabled);\n    submitForm();\n  };\n\n  const deleteItem = () => {\n    var _values$custom2;\n\n    toggleDel();\n    setValues({ ...values,\n      custom: values === null || values === void 0 ? void 0 : (_values$custom2 = values.custom) === null || _values$custom2 === void 0 ? void 0 : _values$custom2.filter((a, i) => i !== idx)\n    });\n    submitForm();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, openDel && /*#__PURE__*/React.createElement(DeleteAlert, {\n    title: \"Are you sure you want to delete?\",\n    onCancel: toggleDel,\n    onDelete: deleteItem,\n    primary: \"Yes\",\n    secondary: \"No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.top, 'flexBetween'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.center,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, title), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('flexBetween'),\n    onClick: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: cx(enabled ? styles.activeText : styles.inActiveText),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, enabled ? 'Active' : 'Inactive'), /*#__PURE__*/React.createElement(Switch, {\n    name: `${path}.enabled`,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('flexBetween', styles.text),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.shippingText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Shipping Type\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.shippingTypeText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, (type === null || type === void 0 ? void 0 : type.charAt(0).toUpperCase()) + (type === null || type === void 0 ? void 0 : type.slice(1)))), itemType === 'custom' && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('flexEnd', styles.iconsContainer),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: deleteIcon,\n    alt: \"delete\",\n    onClick: toggleDel,\n    className: styles.deleteIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: editIcon,\n    alt: \"edit\",\n    onClick: () => onEdit(idx),\n    className: styles.editIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.line,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Card, \"SwsGNT+oTyGTcD71u7h20FrL60Y=\", false, function () {\n  return [useField, useFormikContext, useField, useToggle, useHistory, useShop];\n});\n\n_c = Card;\nCard.propTypes = {\n  idx: PropTypes.number,\n  path: PropTypes.string,\n  onEdit: PropTypes.func,\n  type: PropTypes.string\n};\nCard.defaultProps = {\n  idx: null,\n  path: '',\n  type: '',\n  onEdit: () => {}\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Card\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/profile/shippingModes/Card.jsx"],"names":["React","Switch","useField","useFormikContext","cx","PropTypes","SnackBar","useToggle","DeleteAlert","useShop","useHistory","styles","Card","onEdit","idx","path","type","itemType","value","enabled","setValue","submitForm","values","setValues","item","title","openDel","toggleDel","history","addresses","handleChange","deliveryEnabled","delivery","pickupEnabled","pickup","customEnabled","custom","filter","onlyOneEnabled","Boolean","length","showError","show","push","redirectTo","deleteItem","a","i","container","top","center","activeText","inActiveText","text","shippingText","shippingTypeText","charAt","toUpperCase","slice","iconsContainer","deleteIcon","editIcon","line","propTypes","number","string","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch } from 'phoenix-components/lib/formik';\nimport { useField, useFormikContext } from 'formik';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport editIcon from 'assets/overview/editIcon.svg';\nimport deleteIcon from 'assets/images/address/delete.svg';\nimport SnackBar from 'services/snackbar';\nimport { useToggle } from 'hooks/common';\nimport { DeleteAlert } from 'components/shared/DeleteAlert';\nimport { useShop } from 'contexts';\nimport { useHistory } from 'react-router-dom';\nimport styles from './Card.module.css';\n\nexport default function Card({\n  onEdit,\n  idx,\n  path,\n  type: itemType,\n}) {\n  const [{ value: enabled }, , { setValue }] = useField(`${path}.enabled`);\n  const { submitForm, values, setValues } = useFormikContext();\n  const [{ value: item }] = useField(path);\n  const title = item?.title ?? 'No title';\n  const type = item?.type ?? '';\n  const [openDel, toggleDel] = useToggle();\n  const history = useHistory();\n  const {\n    addresses = []\n  } = useShop();\n\n  const handleChange = () => {\n    if (enabled) {\n      const deliveryEnabled = values?.delivery?.enabled;\n      const pickupEnabled = values?.pickup?.enabled;\n      const customEnabled = values?.custom?.filter(item => item?.enabled);\n      const onlyOneEnabled = [deliveryEnabled, pickupEnabled, ...customEnabled]\n        .filter(Boolean).length <= 1;\n      if (onlyOneEnabled) {\n        SnackBar.showError('Atleast one shipping mode should be enabled');\n        return;\n      }\n    }\n    if (path === 'pickup' && !enabled && addresses.length === 0) {\n      SnackBar.show('please add shop address', 'error');\n      history.push('/manage/address', {\n        redirectTo: '/manage/shippingModes',\n      });\n    }\n    setValue(!enabled);\n    submitForm();\n  };\n\n  const deleteItem = () => {\n    toggleDel();\n    setValues({\n      ...values,\n      custom: values?.custom?.filter((a, i) => i !== idx),\n    });\n    submitForm();\n  };\n\n  return (\n    <div className={styles.container}>\n      {openDel && (\n        <DeleteAlert\n          title=\"Are you sure you want to delete?\"\n          onCancel={toggleDel}\n          onDelete={deleteItem}\n          primary=\"Yes\"\n          secondary=\"No\"\n        />\n      )}\n      <div className={cx(styles.top, 'flexBetween')}>\n        <div className={styles.center}>\n          {title}\n        </div>\n        <div\n          className={cx('flexBetween')}\n          onClick={handleChange}\n        >\n          <p className={cx(enabled ? styles.activeText : styles.inActiveText)}>{enabled ? 'Active' : 'Inactive'}</p>\n          <Switch\n            name={`${path}.enabled`}\n            onChange={handleChange}\n          />\n        </div>\n      </div>\n      <div>\n        <div className={cx('flexBetween', styles.text)}>\n          <p className={styles.shippingText}>Shipping Type</p>\n          <p className={styles.shippingTypeText}>{type?.charAt(0).toUpperCase() + type?.slice(1)}</p>\n        </div>\n        {itemType === 'custom' && (\n          <div className={cx('flexEnd', styles.iconsContainer)}>\n            <img\n              src={deleteIcon}\n              alt=\"delete\"\n              onClick={toggleDel}\n              className={styles.deleteIcon} />\n            <img\n              src={editIcon}\n              alt=\"edit\"\n              onClick={() => onEdit(idx)}\n              className={styles.editIcon}\n            />\n          </div>\n        )}\n      </div>\n      <div className={styles.line} />\n    </div>\n  );\n}\n\nCard.propTypes = {\n  idx: PropTypes.number,\n  path: PropTypes.string,\n  onEdit: PropTypes.func,\n  type: PropTypes.string,\n};\n\nCard.defaultProps = {\n  idx: null,\n  path: '',\n  type: '',\n  onEdit: () => { }\n};\n"]},"metadata":{},"sourceType":"module"}