{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/products/Catalog/Add.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from \"../Header\"; // import { ImagePicker } from 'components/common/ImagePicker';\n\nimport { Avatar, Drawer } from '@material-ui/core';\nimport AddIcon from \"../../../assets/images/products/catalog/add1.svg\";\nimport AddPrimary from \"../../../assets/images/products/catalog/addPrimary.svg\";\nimport { Becca } from \"../../../api\";\nimport { useDesktop } from \"../../../contexts\";\nimport chevronLeftDesk from \"../../../assets/v2/common/chevronPrimaryLeft.svg\";\nimport Icon from \"../../../assets/images/products/create/media-del.svg\";\nimport cx from 'classnames';\nimport { Button, ReactInput, Clickable } from 'phoenix-components';\nimport { isEmpty } from 'lodash';\nimport SnackBar from \"../../../services/snackbar\";\nimport Loader from \"../../../services/loader\";\nimport styles from \"./Add.module.css\";\nexport function Add({\n  url,\n  setUrl,\n  caption,\n  setCaption,\n  updateShop,\n  onBack,\n  type,\n  catalogs\n}) {\n  _s();\n\n  const isDesktop = useDesktop();\n  const [isTouched, setIsTouched] = useState(false);\n  const inputRef = useRef();\n  let err = 'catalog name exists';\n\n  if (isEmpty(catalogs.find(x => {\n    var _caption$trim;\n\n    return x.caption.toLowerCase() === (caption === null || caption === void 0 ? void 0 : (_caption$trim = caption.trim()) === null || _caption$trim === void 0 ? void 0 : _caption$trim.toLowerCase());\n  })) || !isTouched) {\n    err = '';\n  }\n\n  const uploadAsset = async e => {\n    try {\n      var _e$target;\n\n      Loader.show();\n      const files = e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.files;\n      const file = files && files[0];\n      const payload = new FormData();\n      payload.append('name', file.name);\n      payload.append('purpose', 'shop');\n      payload.append('type', 'image');\n      payload.append('file', file);\n      const {\n        url\n      } = await Becca.uploadAsset(payload);\n      setUrl(url);\n      SnackBar.show('upload success');\n    } catch (e) {\n      SnackBar.show('upload failed', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const getTitle = () => {\n    if (type === 'create') {\n      return 'Create Collection';\n    }\n\n    return 'Update Collection';\n  };\n\n  const getBtnTitle = () => {\n    if (type === 'create') {\n      return 'Add Collection';\n    }\n\n    return 'Update Collection';\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isDesktop && /*#__PURE__*/React.createElement(Drawer, {\n    anchor: \"bottom\",\n    open: true,\n    onClose: () => onBack(),\n    PaperProps: {\n      classes: {\n        root: styles.paper\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    onBack: () => onBack(),\n    title: getTitle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.padd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Add catalog image or icon\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('relative'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    // label=\"Upload high-resolution photos\n    //              and videos of your product\"\n    ref: inputRef,\n    accept: \"image/*\",\n    hidden: true,\n    id: \"icon-button-file\",\n    type: \"file\",\n    onChange: e => {\n      uploadAsset(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Avatar, {\n    onClick: () => {\n      var _inputRef$current;\n\n      // eslint-disable-next-line no-unused-expressions\n      inputRef === null || inputRef === void 0 ? void 0 : (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.click();\n    },\n    className: cx(styles.catalogImg, {\n      [styles.emptyImg]: !url\n    }),\n    variant: \"rounded\",\n    src: url || AddIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), url.length > 0 && /*#__PURE__*/React.createElement(\"img\", {\n    role: \"none\",\n    onClick: () => setUrl(''),\n    className: styles.del,\n    src: Icon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ReactInput, {\n    value: caption,\n    placeholder: \"Elevate your Collection with a stellar name\",\n    label: \"Collection Name\",\n    setValue: e => {\n      setIsTouched(true);\n      setCaption(e);\n    },\n    helperText: err,\n    helperTextClass: styles.error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('fullWidth', 'textCenter', styles.button),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    onClick: () => {\n      if (err.length > 0) {\n        onBack();\n        return;\n      }\n\n      updateShop();\n    },\n    label: getBtnTitle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  })))), isDesktop && /*#__PURE__*/React.createElement(Drawer, {\n    anchor: \"right\",\n    open: true,\n    onClose: () => onBack(),\n    PaperProps: {\n      classes: {\n        root: styles.paper\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.backIcon,\n    src: chevronLeftDesk,\n    alt: \"\",\n    onClick: () => onBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.containerText1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, \"Create Collection\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, \"Choose a cover image for your Collection\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.relative,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    accept: \"image/*\",\n    hidden: true,\n    id: \"icon-button-file\",\n    type: \"file\",\n    onChange: e => {\n      uploadAsset(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Avatar, {\n    onClick: () => {\n      var _inputRef$current2;\n\n      // eslint-disable-next-line no-unused-expressions\n      inputRef === null || inputRef === void 0 ? void 0 : (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.click();\n    },\n    className: cx(styles.catalogImg, {\n      [styles.emptyImg]: !url\n    }),\n    variant: \"rounded\",\n    src: url || AddPrimary,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), url.length > 0 && /*#__PURE__*/React.createElement(\"img\", {\n    role: \"none\",\n    onClick: () => setUrl(''),\n    className: styles.del1,\n    src: Icon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ReactInput, {\n    value: caption,\n    placeholder: \"Elevate your Collection with a stellar name\",\n    label: \"Collection Name\",\n    setValue: e => {\n      setIsTouched(true);\n      setCaption(e);\n    },\n    helperText: err,\n    helperTextClass: styles.error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('fullWidth', 'textCenter', styles.button1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      if (err.length > 0) {\n        onBack();\n        return;\n      }\n\n      updateShop();\n    },\n    label: getBtnTitle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  })))));\n}\n\n_s(Add, \"mtLYDgXHJ8/iL+dr7CuBQY7c0Fs=\", false, function () {\n  return [useDesktop];\n});\n\n_c = Add;\nAdd.propTypes = {\n  url: PropTypes.string.isRequired,\n  caption: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  setUrl: PropTypes.func.isRequired,\n  setCaption: PropTypes.func.isRequired,\n  updateShop: PropTypes.func.isRequired,\n  onBack: PropTypes.func.isRequired,\n  catalogs: PropTypes.array.isRequired\n};\nAdd.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"Add\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/products/Catalog/Add.jsx"],"names":["React","useState","useRef","PropTypes","Header","Avatar","Drawer","Becca","useDesktop","cx","Button","ReactInput","Clickable","isEmpty","SnackBar","Loader","styles","Add","url","setUrl","caption","setCaption","updateShop","onBack","type","catalogs","isDesktop","isTouched","setIsTouched","inputRef","err","find","x","toLowerCase","trim","uploadAsset","e","show","files","target","file","payload","FormData","append","name","hide","getTitle","getBtnTitle","classes","root","paper","padd","heading","current","click","catalogImg","emptyImg","AddIcon","length","del","Icon","error","button","container1","backIcon","chevronLeftDesk","containerText1","content","heading1","relative","AddPrimary","del1","button1","propTypes","string","isRequired","func","array","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from 'containers/products/Header';\n// import { ImagePicker } from 'components/common/ImagePicker';\nimport { Avatar, Drawer } from '@material-ui/core';\nimport AddIcon from 'assets/images/products/catalog/add1.svg';\nimport AddPrimary from 'assets/images/products/catalog/addPrimary.svg';\nimport { Becca } from 'api/index';\nimport { useDesktop } from 'contexts';\nimport chevronLeftDesk from 'assets/v2/common/chevronPrimaryLeft.svg';\nimport Icon from 'assets/images/products/create/media-del.svg';\nimport cx from 'classnames';\nimport { Button, ReactInput, Clickable } from 'phoenix-components';\nimport { isEmpty } from 'lodash';\nimport SnackBar from 'services/snackbar';\nimport Loader from 'services/loader';\nimport styles from './Add.module.css';\n\nexport function Add({\n  url,\n  setUrl,\n  caption,\n  setCaption,\n  updateShop,\n  onBack,\n  type,\n  catalogs\n}) {\n  const isDesktop = useDesktop();\n  const [isTouched, setIsTouched] = useState(false);\n  const inputRef = useRef();\n\n  let err = 'catalog name exists';\n  if (isEmpty(catalogs.find(x => x.caption.toLowerCase() === caption?.trim()?.toLowerCase())) || !isTouched) {\n    err = '';\n  }\n\n  const uploadAsset = async (e) => {\n    try {\n      Loader.show();\n      const files = e?.target?.files;\n      const file = files && files[0];\n      const payload = new FormData();\n      payload.append('name', file.name);\n      payload.append('purpose', 'shop');\n      payload.append('type', 'image');\n      payload.append('file', file);\n      const { url } = await Becca.uploadAsset(payload);\n      setUrl(url);\n      SnackBar.show('upload success');\n    } catch (e) {\n      SnackBar.show('upload failed', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const getTitle = () => {\n    if (type === 'create') {\n      return 'Create Collection';\n    }\n    return 'Update Collection';\n  };\n\n  const getBtnTitle = () => {\n    if (type === 'create') {\n      return 'Add Collection';\n    }\n    return 'Update Collection';\n  };\n\n  return (\n    <>\n      {!isDesktop\n    && (\n      <Drawer\n        anchor=\"bottom\"\n        open={true}\n        onClose={() => onBack()}\n        PaperProps={{\n          classes: {\n            root: styles.paper,\n          }\n        }}\n      >\n        <Header onBack={() => onBack()} title={getTitle()} />\n        <div className={styles.padd}>\n          <div className={styles.heading}>\n            Add catalog image or icon\n          </div>\n          <div\n            className={cx('relative')}\n          >\n            <input\n              // label=\"Upload high-resolution photos\n              //              and videos of your product\"\n              ref={inputRef}\n              accept=\"image/*\"\n              hidden\n              id=\"icon-button-file\"\n              type=\"file\"\n              onChange={(e) => {\n                uploadAsset(e);\n              }} />\n            <Avatar\n              onClick={() => {\n              // eslint-disable-next-line no-unused-expressions\n              inputRef?.current?.click();\n              }}\n              className={cx(styles.catalogImg, { [styles.emptyImg]: !url })}\n              variant=\"rounded\"\n              src={url || AddIcon}\n            />\n            {url.length > 0 && (\n              <img\n                role=\"none\"\n                onClick={() => setUrl('')}\n                className={styles.del}\n                src={Icon}\n                alt=\"\" />\n            )}\n          </div>\n          <ReactInput\n            value={caption}\n            placeholder=\"Elevate your Collection with a stellar name\"\n            label=\"Collection Name\"\n            setValue={(e) => {\n              setIsTouched(true);\n              setCaption(e);\n            }}\n            helperText={err}\n            helperTextClass={styles.error}\n          />\n          <div className={cx('fullWidth', 'textCenter', styles.button)}>\n            <Button\n              fullWidth\n              onClick={() => {\n                if (err.length > 0) {\n                  onBack();\n                  return;\n                }\n                updateShop();\n              }}\n              label={getBtnTitle()}\n            />\n          </div>\n        </div>\n      </Drawer>\n    )}\n      {isDesktop\n    && (\n      <Drawer\n        anchor=\"right\"\n        open={true}\n        onClose={() => onBack()}\n        PaperProps={{\n          classes: {\n            root: styles.paper,\n          }\n        }}\n      >\n        <div className={styles.container1}>\n          <Clickable>\n            <img className={styles.backIcon} src={chevronLeftDesk} alt=\"\" onClick={() => onBack()} />\n          </Clickable>\n          <div className={styles.containerText1}>\n            Create Collection\n          </div>\n        </div>\n        {/* <Header onBack={() => onBack()} title={getTitle()} /> */}\n        <div className={styles.content}>\n          <div className={styles.heading1}>\n            Choose a cover image for your Collection\n          </div>\n          <div\n            className={styles.relative}\n          >\n            <input\n              ref={inputRef}\n              accept=\"image/*\"\n              hidden\n              id=\"icon-button-file\"\n              type=\"file\"\n              onChange={(e) => {\n                uploadAsset(e);\n              }} />\n\n            <Avatar\n              onClick={() => {\n              // eslint-disable-next-line no-unused-expressions\n              inputRef?.current?.click();\n              }}\n              className={cx(styles.catalogImg, { [styles.emptyImg]: !url })}\n              variant=\"rounded\"\n              src={url || AddPrimary}\n            />\n            {url.length > 0 && (\n              <img\n                role=\"none\"\n                onClick={() => setUrl('')}\n                className={styles.del1}\n                src={Icon}\n                alt=\"\" />\n            )}\n          </div>\n          <ReactInput\n            value={caption}\n            placeholder=\"Elevate your Collection with a stellar name\"\n            label=\"Collection Name\"\n            setValue={(e) => {\n              setIsTouched(true);\n              setCaption(e);\n            }}\n            helperText={err}\n            helperTextClass={styles.error}\n          />\n          <div className={cx('fullWidth', 'textCenter', styles.button1)}>\n            <Button\n              onClick={() => {\n                if (err.length > 0) {\n                  onBack();\n                  return;\n                }\n                updateShop();\n              }}\n              label={getBtnTitle()}\n            />\n          </div>\n        </div>\n      </Drawer>\n    )}\n    </>\n  );\n}\n\nAdd.propTypes = {\n  url: PropTypes.string.isRequired,\n  caption: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  setUrl: PropTypes.func.isRequired,\n  setCaption: PropTypes.func.isRequired,\n  updateShop: PropTypes.func.isRequired,\n  onBack: PropTypes.func.isRequired,\n  catalogs: PropTypes.array.isRequired,\n};\n\nAdd.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}