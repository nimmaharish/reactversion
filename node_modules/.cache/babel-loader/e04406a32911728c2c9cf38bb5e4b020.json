{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from \"../../components/login/Slider\";\nimport { LoginButton } from 'phoenix-components/lib/containers';\nimport { Button, Clickable, FormikInput } from 'phoenix-components';\nimport emailIcon from \"../../assets/v2/login/buttons/email.svg\";\nimport googleIcon from \"../../assets/v2/login/buttons/google.svg\";\nimport facebookIcon from \"../../assets/v2/login/buttons/facebook.svg\";\nimport appleIcon from \"../../assets/v2/login/buttons/apple.svg\";\nimport guestIcon from \"../../assets/v2/login/buttons/guest.svg\";\nimport langIcon from \"../../assets/v2/login/buttons/lang.svg\";\nimport chevronLeft from \"../../assets/v2/common/chevronWhiteLeft.svg\";\nimport trustedLogo from \"../../assets/logos/trustedlogo.svg\";\nimport WebView from \"../../services/webview\";\nimport Storage from \"../../services/storage\";\nimport { User as UserApi, User } from \"../../api\";\nimport CONFIG from \"../../config\";\nimport { GoogleLogin } from 'react-google-login';\nimport SnackBar from \"../../services/snackbar\";\nimport * as Yup from 'yup';\nimport { useToggle } from \"../../hooks/common\";\nimport { Formik } from 'formik';\nimport cx from 'classnames';\nimport { useDesktop } from \"../../contexts\";\nimport _ from 'lodash';\nimport Loader from \"../../services/loader\";\nimport { LanguageDrawer } from \"../../components/common/LanguageDrawer.jsx\";\nimport { Guest } from \"../../components/login/Guest.jsx\";\nimport DesktopLogin from \"./DesktopLogin.jsx\";\nimport styles from \"./Login.module.css\";\nimport { useIos } from \"./ios\";\nconst emailValidation = Yup.object().shape({\n  email: Yup.string().required().email('Please enter a valid email id')\n});\n\nfunction Login({\n  onLogin\n}) {\n  _s();\n\n  const ios = useIos();\n  const [isEmail, setIsEmail] = useState(false);\n  const [email, setEmail] = useState('');\n  const [identifier, setIdentifier] = useState('');\n  const [showOtp, setShowOtp] = useState(false);\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const isWebView = WebView.isWebView();\n  const [err, setErr] = useState('');\n  const [seconds, setSeconds] = useState(0);\n  const isDesktop = useDesktop();\n  const [openGuest, toggleGuest] = useToggle(false);\n  const [openLanguage, toggleLanguage] = useToggle(false);\n\n  const refs = _.range(0, 6).map(() => /*#__PURE__*/createRef());\n\n  useEffect(() => {\n    if (seconds > 0) {\n      const timeout = setTimeout(() => {\n        setSeconds(seconds - 1);\n      }, 1000);\n      return () => {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n      };\n    }\n  }, [seconds]);\n\n  const onEmailContinue = async values => {\n    setEmail(values.email);\n    Loader.show();\n\n    try {\n      const {\n        identifier: id\n      } = await UserApi.sendOTC({\n        email: values.email\n      });\n      SnackBar.show(`OTP has been sent to ${values.email}`);\n      setIdentifier(id);\n      setShowOtp(true);\n      setSeconds(59);\n      setIsEmail(false);\n      setErr('');\n    } catch (e) {\n      var _e$response, _e$response$data;\n\n      if (e !== null && e !== void 0 && (_e$response = e.response) !== null && _e$response !== void 0 && (_e$response$data = _e$response.data) !== null && _e$response$data !== void 0 && _e$response$data.message) {\n        var _e$response2, _e$response2$data;\n\n        setErr(e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message);\n      }\n\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const otpGoBack = () => {\n    setShowOtp(false);\n    setIsEmail(true);\n    setIdentifier('');\n  };\n\n  const verifyOtp = async () => {\n    Loader.show();\n\n    try {\n      const {\n        token\n      } = await UserApi.validateEmail({\n        email,\n        code: otp.join('').toUpperCase(),\n        identifier\n      });\n      Storage.setItem('token', token);\n      onLogin();\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n\n      const error = e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message;\n\n      if (error) {\n        SnackBar.show(error, 'error');\n        return;\n      }\n\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const responseGoogle = async response => {\n    Storage.setItem('token', await User.register(response.tokenId, response.platform || 'web'));\n    onLogin(true);\n  };\n\n  const responseFailGoogle = err => {\n    SnackBar.showError(err !== null && err !== void 0 ? err : 'Unable to login, try again later!', 'error');\n  };\n\n  const onAppleButtonClick = async () => {\n    try {\n      const data = await WebView.appleLogin();\n      await responseGoogle({ ...data,\n        platform: 'apple'\n      });\n    } catch (error) {\n      responseFailGoogle(error);\n    }\n  };\n\n  const onFacebookLogin = async () => {\n    try {\n      const data = await WebView.facebookLogin();\n      await responseGoogle({ ...data,\n        platform: 'facebook'\n      });\n    } catch (error) {\n      responseFailGoogle(error);\n    }\n  };\n\n  const onButtonClick = webCallback => {\n    if (isWebView) {\n      return async () => {\n        try {\n          const data = await WebView.login();\n          await responseGoogle(data);\n        } catch (error) {\n          responseFailGoogle(error);\n        }\n      };\n    }\n\n    return webCallback;\n  };\n\n  const setOtpCh = (e, idx) => {\n    const {\n      value\n    } = e.target;\n\n    if (/^[0-9]{6}$/.test(value)) {\n      e.stopPropagation();\n      e.preventDefault();\n      setOtp([...value]);\n      return;\n    }\n\n    if (idx + 1 < 6 && e.target.value !== '') {\n      var _refs;\n\n      if ((_refs = refs[idx + 1]) !== null && _refs !== void 0 && _refs.current) {\n        refs[idx + 1].current.focus();\n      }\n    }\n\n    [otp[idx]] = e.target.value;\n    setOtp([...otp]);\n  };\n\n  const onKeyDown = idx => e => {\n    if (e.keyCode === 8 && idx > 0) {\n      var _refs2, _refs2$current;\n\n      if ((_refs2 = refs[idx - 1]) !== null && _refs2 !== void 0 && (_refs2$current = _refs2.current) !== null && _refs2$current !== void 0 && _refs2$current.focus) {\n        refs[idx - 1].current.focus();\n\n        if (idx === 5 && otp[idx]) {\n          otp[5] = '';\n          setOtp([...otp]);\n          return;\n        }\n\n        if (otp[idx] === '' || otp[idx] === null) {\n          otp[idx - 1] = '';\n          setOtp([...otp]);\n        }\n      }\n    }\n  };\n\n  const onOtpPaste = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    let value = (e.clipboardData || window.clipboardData).getData('text');\n    value = value.trim();\n\n    if (/^[0-9]{6}$/.test(value)) {\n      setOtp([...value]);\n    }\n  };\n\n  const openLink = url => {\n    if (WebView.isWebView()) {\n      WebView.openUrl(url);\n      return;\n    }\n\n    window.open(url);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isDesktop && /*#__PURE__*/React.createElement(DesktopLogin, {\n    onLogin: onLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 21\n    }\n  }), !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.slider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.trustedLogo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: trustedLogo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.trustedTxt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, \"Trusted by 350,000+ Sellers, 140+ Countries,\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }), \"1Million+ Orders Processed\")), showOtp && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.loginContainer, styles.otpScreen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.otpHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: otpGoBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chevronLeft,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.continueWith,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, \"Verify Email\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, \"\\xA0\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 15\n    }\n  }, \"Please enter the OTP sent via\", ' ', email, ' '), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }, \"Please check your Spam if not received\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.otpContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, _.range(0, 6).map(i => /*#__PURE__*/React.createElement(\"input\", {\n    ref: refs[i],\n    key: i,\n    autoFocus: i === 0,\n    onChange: e => setOtpCh(e, i),\n    type: \"number\",\n    minLength: 1,\n    maxLength: 1,\n    value: otp[i] || '',\n    onKeyDown: onKeyDown(i),\n    onPaste: onOtpPaste,\n    autoComplete: \"one-time-code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.timerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, \"Please enter valid 6 digit code\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, \"00:\", seconds.toString().padStart(2, '0'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.resendCode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }, \"Didn't received code?\"), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.resendCodeButton,\n    onClick: () => {\n      if (seconds > 0) {\n        SnackBar.show(`Wait for ${seconds} seconds before retrying`, 'warning');\n        return;\n      }\n\n      onEmailContinue({\n        email\n      });\n      setOtp(['', '', '', '', '', '']);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }, \"Resend Code\")), err.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  }, err), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    label: \"Submit\",\n    fullWidth: true,\n    primary: false,\n    disabled: otp.length !== 6,\n    onClick: verifyOtp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  })), isEmail && /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      email\n    },\n    validationSchema: emailValidation,\n    onSubmit: onEmailContinue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }\n  }, ({\n    isValid,\n    submitForm\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loginContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.back,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => {\n      setIsEmail(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chevronLeft,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.continue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 21\n    }\n  }, \"Continue with\")), /*#__PURE__*/React.createElement(FormikInput, {\n    name: \"email\",\n    label: \"Enter Email ID\",\n    placeholder: \"Enter your mail ID\",\n    errorTextClass: styles.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Buttonon, {\n    size: \"large\",\n    label: \"Continue\",\n    primary: false,\n    disabled: !isValid,\n    onClick: submitForm,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 19\n    }\n  }))), !isEmail && !showOtp && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loginContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.head,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.continueWith1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }\n  }, \"Continue with\"), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.selectLang,\n    onClick: toggleLanguage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: langIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lang,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 19\n    }\n  }, \"Change Language\"))), openLanguage && /*#__PURE__*/React.createElement(LanguageDrawer, {\n    onBack: toggleLanguage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 32\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LoginButton, {\n    onClick: () => setIsEmail(true),\n    icon: emailIcon,\n    name: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: CONFIG.GAUTH.CLIENT_ID,\n    render: renderProps => /*#__PURE__*/React.createElement(LoginButton, {\n      icon: googleIcon,\n      name: \"Google\",\n      onClick: onButtonClick(renderProps.onClick),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 21\n      }\n    }),\n    onSuccess: responseGoogle,\n    onFailure: responseFailGoogle,\n    fetchBasicProfile: true,\n    isSignedIn: false,\n    cookiePolicy: \"single_host_origin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 17\n    }\n  }), isWebView && /*#__PURE__*/React.createElement(LoginButton, {\n    onClick: onFacebookLogin,\n    icon: facebookIcon,\n    name: \"Facebook\",\n    bgColor: \"#1B5AA5\",\n    color: \"var(--white)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 19\n    }\n  }), ios && /*#__PURE__*/React.createElement(LoginButton, {\n    onClick: onAppleButtonClick,\n    icon: appleIcon,\n    name: \"Sign in with Apple\",\n    bgColor: \"var(--black)\",\n    color: \"var(--white)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(LoginButton, {\n    onClick: toggleGuest,\n    icon: guestIcon,\n    name: \"Continue as Guest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 17\n    }\n  })), openGuest && /*#__PURE__*/React.createElement(Guest, {\n    onBack: toggleGuest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.agree,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 15\n    }\n  }, \"By Signing up, you agree to our\", /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.textLink,\n    onClick: () => {\n      openLink('https://www.getwindo.shop/terms-and-conditions');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 17\n    }\n  }, ' ', \"terms of use\", ' '), \"and\", /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.textLink,\n    onClick: () => {\n      openLink('https://www.getwindo.shop/privacy-policy');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 17\n    }\n  }, ' ', \"privacy policy\", ' '), \".\"))));\n}\n\n_s(Login, \"ldfixF+tyVUd60OjiPvdVXYhzJA=\", false, function () {\n  return [useIos, useDesktop, useToggle, useToggle];\n});\n\n_c = Login;\nLogin.propTypes = {\n  onLogin: PropTypes.func.isRequired\n};\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/login/Login.jsx"],"names":["React","createRef","useEffect","useState","PropTypes","Slider","LoginButton","Button","Clickable","FormikInput","WebView","Storage","User","UserApi","CONFIG","GoogleLogin","SnackBar","Yup","useToggle","Formik","cx","useDesktop","_","Loader","LanguageDrawer","Guest","DesktopLogin","styles","useIos","emailValidation","object","shape","email","string","required","Login","onLogin","ios","isEmail","setIsEmail","setEmail","identifier","setIdentifier","showOtp","setShowOtp","otp","setOtp","isWebView","err","setErr","seconds","setSeconds","isDesktop","openGuest","toggleGuest","openLanguage","toggleLanguage","refs","range","map","timeout","setTimeout","clearTimeout","onEmailContinue","values","show","id","sendOTC","e","response","data","message","showError","hide","otpGoBack","verifyOtp","token","validateEmail","code","join","toUpperCase","setItem","error","responseGoogle","register","tokenId","platform","responseFailGoogle","onAppleButtonClick","appleLogin","onFacebookLogin","facebookLogin","onButtonClick","webCallback","login","setOtpCh","idx","value","target","test","stopPropagation","preventDefault","current","focus","onKeyDown","keyCode","onOtpPaste","clipboardData","window","getData","trim","openLink","url","openUrl","open","container","slider","trustedLogo","trustedTxt","loginContainer","otpScreen","otpHeader","chevronLeft","continueWith","otpContainer","i","timerContainer","toString","padStart","resendCode","resendCodeButton","length","isValid","submitForm","back","continue","errorText","head","continueWith1","selectLang","langIcon","lang","buttonContainer","emailIcon","GAUTH","CLIENT_ID","renderProps","googleIcon","onClick","facebookIcon","appleIcon","guestIcon","agree","textLink","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React, {\n  createRef, useEffect, useState\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { Slider } from 'components/login/Slider';\nimport { LoginButton } from 'phoenix-components/lib/containers';\nimport { Button, Clickable, FormikInput } from 'phoenix-components';\nimport emailIcon from 'assets/v2/login/buttons/email.svg';\nimport googleIcon from 'assets/v2/login/buttons/google.svg';\nimport facebookIcon from 'assets/v2/login/buttons/facebook.svg';\nimport appleIcon from 'assets/v2/login/buttons/apple.svg';\nimport guestIcon from 'assets/v2/login/buttons/guest.svg';\nimport langIcon from 'assets/v2/login/buttons/lang.svg';\nimport chevronLeft from 'assets/v2/common/chevronWhiteLeft.svg';\nimport trustedLogo from 'assets/logos/trustedlogo.svg';\nimport WebView from 'services/webview';\nimport Storage from 'services/storage';\nimport { User as UserApi, User } from 'api';\nimport CONFIG from 'config';\nimport { GoogleLogin } from 'react-google-login';\nimport SnackBar from 'services/snackbar';\nimport * as Yup from 'yup';\nimport { useToggle } from 'hooks/common';\nimport { Formik } from 'formik';\nimport cx from 'classnames';\nimport { useDesktop } from 'contexts';\nimport _ from 'lodash';\nimport Loader from 'services/loader';\nimport { LanguageDrawer } from '../../components/common/LanguageDrawer.jsx';\nimport { Guest } from '../../components/login/Guest.jsx';\nimport DesktopLogin from './DesktopLogin.jsx';\nimport styles from './Login.module.css';\nimport { useIos } from './ios';\n\nconst emailValidation = Yup.object()\n  .shape({\n    email: Yup.string()\n      .required()\n      .email('Please enter a valid email id'),\n  });\n\nfunction Login({ onLogin }) {\n  const ios = useIos();\n  const [isEmail, setIsEmail] = useState(false);\n  const [email, setEmail] = useState('');\n  const [identifier, setIdentifier] = useState('');\n  const [showOtp, setShowOtp] = useState(false);\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const isWebView = WebView.isWebView();\n  const [err, setErr] = useState('');\n  const [seconds, setSeconds] = useState(0);\n  const isDesktop = useDesktop();\n  const [openGuest, toggleGuest] = useToggle(false);\n  const [openLanguage, toggleLanguage] = useToggle(false);\n\n  const refs = _.range(0, 6)\n    .map(() => createRef());\n\n  useEffect(() => {\n    if (seconds > 0) {\n      const timeout = setTimeout(() => {\n        setSeconds(seconds - 1);\n      }, 1000);\n      return () => {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n      };\n    }\n  }, [seconds]);\n\n  const onEmailContinue = async (values) => {\n    setEmail(values.email);\n    Loader.show();\n    try {\n      const { identifier: id } = await UserApi.sendOTC({ email: values.email });\n      SnackBar.show(`OTP has been sent to ${values.email}`);\n      setIdentifier(id);\n      setShowOtp(true);\n      setSeconds(59);\n      setIsEmail(false);\n      setErr('');\n    } catch (e) {\n      if (e?.response?.data?.message) {\n        setErr(e?.response?.data?.message);\n      }\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const otpGoBack = () => {\n    setShowOtp(false);\n    setIsEmail(true);\n    setIdentifier('');\n  };\n\n  const verifyOtp = async () => {\n    Loader.show();\n    try {\n      const { token } = await UserApi.validateEmail({\n        email,\n        code: otp.join('')\n          .toUpperCase(),\n        identifier\n      });\n      Storage.setItem('token', token);\n      onLogin();\n    } catch (e) {\n      const error = e?.response?.data?.message;\n      if (error) {\n        SnackBar.show(error, 'error');\n        return;\n      }\n      SnackBar.show('Something went wrong', 'error');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const responseGoogle = async (response) => {\n    Storage.setItem('token', await User.register(response.tokenId, response.platform || 'web'));\n    onLogin(true);\n  };\n\n  const responseFailGoogle = (err) => {\n    SnackBar.showError(err ?? 'Unable to login, try again later!', 'error');\n  };\n\n  const onAppleButtonClick = async () => {\n    try {\n      const data = await WebView.appleLogin();\n      await responseGoogle({\n        ...data,\n        platform: 'apple'\n      });\n    } catch (error) {\n      responseFailGoogle(error);\n    }\n  };\n\n  const onFacebookLogin = async () => {\n    try {\n      const data = await WebView.facebookLogin();\n      await responseGoogle({\n        ...data,\n        platform: 'facebook'\n      });\n    } catch (error) {\n      responseFailGoogle(error);\n    }\n  };\n\n  const onButtonClick = (webCallback) => {\n    if (isWebView) {\n      return async () => {\n        try {\n          const data = await WebView.login();\n          await responseGoogle(data);\n        } catch (error) {\n          responseFailGoogle(error);\n        }\n      };\n    }\n    return webCallback;\n  };\n\n  const setOtpCh = (e, idx) => {\n    const { value } = e.target;\n    if (/^[0-9]{6}$/.test(value)) {\n      e.stopPropagation();\n      e.preventDefault();\n      setOtp([...value]);\n      return;\n    }\n    if (idx + 1 < 6 && e.target.value !== '') {\n      if (refs[idx + 1]?.current) {\n        refs[idx + 1].current.focus();\n      }\n    }\n    [otp[idx]] = e.target.value;\n    setOtp([...otp]);\n  };\n\n  const onKeyDown = (idx) => (e) => {\n    if (e.keyCode === 8 && idx > 0) {\n      if (refs[idx - 1]?.current?.focus) {\n        refs[idx - 1].current.focus();\n        if (idx === 5 && otp[idx]) {\n          otp[5] = '';\n          setOtp([...otp]);\n          return;\n        }\n        if (otp[idx] === '' || otp[idx] === null) {\n          otp[idx - 1] = '';\n          setOtp([...otp]);\n        }\n      }\n    }\n  };\n\n  const onOtpPaste = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let value = (e.clipboardData || window.clipboardData).getData('text');\n    value = value.trim();\n    if (/^[0-9]{6}$/.test(value)) {\n      setOtp([...value]);\n    }\n  };\n\n  const openLink = (url) => {\n    if (WebView.isWebView()) {\n      WebView.openUrl(url);\n      return;\n    }\n    window.open(url);\n  };\n\n  return (\n    <>\n      {isDesktop && <DesktopLogin onLogin={onLogin} />}\n      {!isDesktop && (\n        <div className={styles.container}>\n          <div className={styles.slider}>\n            <Slider />\n          </div>\n          <div className={styles.trustedLogo}>\n            <img src={trustedLogo} alt=\"\" />\n            <div className={styles.trustedTxt}>\n              Trusted by 350,000+ Sellers, 140+ Countries,\n              <br />\n              1Million+ Orders Processed\n            </div>\n          </div>\n          {showOtp && (\n            <div\n              className={cx(styles.loginContainer, styles.otpScreen)}>\n              <div className={styles.otpHeader}>\n                <Clickable onClick={otpGoBack}>\n                  <img src={chevronLeft} alt=\"\" />\n                </Clickable>\n                <div className={styles.continueWith}>Verify Email</div>\n                <div>&nbsp;</div>\n              </div>\n              <div>\n                Please enter the OTP sent via\n                {' '}\n                {email}\n                {' '}\n              </div>\n              <div>\n                Please check your Spam if not received\n              </div>\n              <div className={styles.otpContainer}>\n                {_.range(0, 6)\n                  .map((i) => (\n                    <input\n                      ref={refs[i]}\n                      key={i}\n                      autoFocus={i === 0}\n                      onChange={(e) => setOtpCh(e, i)}\n                      type=\"number\"\n                      minLength={1}\n                      maxLength={1}\n                      value={otp[i] || ''}\n                      onKeyDown={onKeyDown(i)}\n                      onPaste={onOtpPaste}\n                      autoComplete=\"one-time-code\"\n                    />\n                  ))}\n              </div>\n              <div className={styles.timerContainer}>\n                <div>Please enter valid 6 digit code</div>\n                <div>\n                  00:\n                  {seconds.toString()\n                    .padStart(2, '0')}\n                </div>\n              </div>\n              <div className={styles.resendCode}>\n                <div>Didn't received code?</div>\n                <Clickable\n                  className={styles.resendCodeButton}\n                  onClick={() => {\n                    if (seconds > 0) {\n                      SnackBar.show(`Wait for ${seconds} seconds before retrying`, 'warning');\n                      return;\n                    }\n                    onEmailContinue({ email });\n                    setOtp(['', '', '', '', '', '']);\n                  }}\n                >\n                  Resend Code\n                </Clickable>\n              </div>\n              {err.length > 0 && (\n                <div className={styles.error}>\n                  {err}\n                </div>\n              )}\n              <div className=\"spacer\" />\n              <Button\n                size=\"large\"\n                label=\"Submit\"\n                fullWidth\n                primary={false}\n                disabled={otp.length !== 6}\n                onClick={verifyOtp}\n              />\n            </div>\n          )}\n          {isEmail && (\n            <Formik\n              initialValues={{ email }}\n              validationSchema={emailValidation}\n              onSubmit={onEmailContinue}\n            >\n              {({\n                isValid,\n                submitForm\n              }) => (\n                <div className={styles.loginContainer}>\n                  <div className={styles.back}>\n                    <Clickable\n                      onClick={() => {\n                        setIsEmail(false);\n                      }}>\n                      <img src={chevronLeft} alt=\"\" />\n                    </Clickable>\n                    <div className={styles.continue}>Continue with</div>\n                  </div>\n                  <FormikInput\n                    name=\"email\"\n                    label=\"Enter Email ID\"\n                    placeholder=\"Enter your mail ID\"\n                    errorTextClass={styles.errorText}\n\n                  />\n                  <div className=\"spacer\" />\n                  <Buttonon\n                    size=\"large\"\n                    label=\"Continue\"\n                    primary={false}\n                    disabled={!isValid}\n                    onClick={submitForm}\n                    fullWidth\n                  />\n                </div>\n              )}\n            </Formik>\n          )}\n          {!isEmail && !showOtp && (\n            <div className={styles.loginContainer}>\n              <div className={styles.head}>\n                <div className={styles.continueWith1}>\n                  Continue with\n                </div>\n                <Clickable\n                  className={styles.selectLang}\n                  onClick={toggleLanguage}\n                >\n                  <img src={langIcon} alt=\"\" />\n                  <div className={styles.lang}>\n                    Change Language\n                  </div>\n                </Clickable>\n              </div>\n              {openLanguage && <LanguageDrawer onBack={toggleLanguage} />}\n              <div className={styles.buttonContainer}>\n                <LoginButton\n                  onClick={() => setIsEmail(true)}\n                  icon={emailIcon}\n                  name=\"Email\"\n                />\n                <GoogleLogin\n                  clientId={CONFIG.GAUTH.CLIENT_ID}\n                  render={renderProps => (\n                    <LoginButton\n                      icon={googleIcon}\n                      name=\"Google\"\n                      onClick={onButtonClick(renderProps.onClick)}\n                    />\n                  )}\n                  onSuccess={responseGoogle}\n                  onFailure={responseFailGoogle}\n                  fetchBasicProfile={true}\n                  isSignedIn={false}\n                  cookiePolicy=\"single_host_origin\"\n                />\n                {isWebView && (\n                  <LoginButton\n                    onClick={onFacebookLogin}\n                    icon={facebookIcon}\n                    name=\"Facebook\"\n                    bgColor=\"#1B5AA5\"\n                    color=\"var(--white)\"\n                  />\n                )}\n                {ios && (\n                  <LoginButton\n                    onClick={onAppleButtonClick}\n                    icon={appleIcon}\n                    name=\"Sign in with Apple\"\n                    bgColor=\"var(--black)\"\n                    color=\"var(--white)\"\n                  />\n                )}\n                <LoginButton\n                  onClick={toggleGuest}\n                  icon={guestIcon}\n                  name=\"Continue as Guest\"\n                />\n              </div>\n              {openGuest && <Guest onBack={toggleGuest} /> }\n              <Clickable className={styles.agree}>\n                By Signing up, you agree to our\n                <Clickable\n                  className={styles.textLink}\n                  onClick={() => {\n                    openLink('https://www.getwindo.shop/terms-and-conditions');\n                  }}\n                >\n                  {' '}\n                  terms of use\n                  {' '}\n                </Clickable>\n                and\n                <Clickable\n                  className={styles.textLink}\n                  onClick={() => {\n                    openLink('https://www.getwindo.shop/privacy-policy');\n                  }}\n                >\n                  {' '}\n                  privacy policy\n                  {' '}\n                </Clickable>\n                .\n              </Clickable>\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n}\n\nLogin.propTypes = {\n  onLogin: PropTypes.func.isRequired,\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}