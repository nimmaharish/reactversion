{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/products/RatingCard.jsx\",\n    _s = $RefreshSig$();\n\n// import star from 'assets/images/ratings/star-white.svg';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport star from \"../../assets/images/products/star.svg\";\nimport { Switch, Button } from 'phoenix-components';\nimport Loader from \"../../services/loader\";\nimport { get } from 'lodash';\nimport emptyuser from \"../../assets/images/products/emptyuser.svg\";\nimport moment from 'moment';\nimport { useDesktop } from \"../../contexts\";\nimport ShowMoreText from 'react-show-more-text';\nimport { useHistory } from 'react-router-dom';\nimport styles from \"./RatingCard.module.css\";\nimport Factory from \"../../api/factory\";\nexport function RatingCard({\n  rating,\n  i,\n  showBorder,\n  showProduct,\n  measure,\n  showReviewsLink,\n  refresh\n}) {\n  _s();\n\n  var _rating$product, _rating$order;\n\n  const [status, setStatus] = useState(rating.status);\n  const history = useHistory();\n  const [more, setMore] = useState(false);\n  const isDesktop = useDesktop();\n  const width = isDesktop ? window.screen.width - 400 : window.screen.width - 32;\n  const userPic = (rating === null || rating === void 0 ? void 0 : rating.picture) || '';\n  const image = get(rating, 'product.images[0].url', 'https://becca-cdn.windo.live/misc/no_image.png');\n\n  const executeOnClick = value => {\n    setMore(value);\n  };\n\n  const onUnlive = async () => {\n    Loader.show();\n    const newStatus = status === 'live' ? 'unlive' : 'live';\n    await Factory.updateRating(rating.identifier, {\n      status: newStatus\n    });\n    setStatus(newStatus);\n    refresh();\n    Loader.hide();\n  };\n\n  const handleClick = () => {\n    history.push(`/products/rating/${rating.entityId}`);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: cx(styles.ratingBox, {\n      [styles.noPadding]: !showBorder,\n      [styles.noBorder]: !showBorder,\n      [styles.border]: showBorder\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, !userPic ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.empty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyuser,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.userPic,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: userPic,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, rating.name || rating.userName || 'Anonymous'), rating.order && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, moment(rating.order.orderedOn).format('DD MMMM YYYY, h:mm'))))), showProduct && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.left, styles.bottom),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.productIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, rating === null || rating === void 0 ? void 0 : (_rating$product = rating.product) === null || _rating$product === void 0 ? void 0 : _rating$product.title), (rating === null || rating === void 0 ? void 0 : (_rating$order = rating.order) === null || _rating$order === void 0 ? void 0 : _rating$order.orderedOn) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingBoxDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, `Ordered on ${moment(rating.order.orderedOn).format('DD MMMM YYYY')}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.reviewHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, \"Rating\", /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ratingView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, rating === null || rating === void 0 ? void 0 : rating.rating), /*#__PURE__*/React.createElement(\"img\", {\n    src: star,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Switch, {\n    active: status === 'live',\n    onChange: onUnlive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  })), rating.title && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, rating.title), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.twoLines,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ShowMoreText\n  /* Default options */\n  , {\n    lines: 2,\n    more: \"More\",\n    less: \"Less\",\n    anchorClass: styles.more,\n    onClick: e => {\n      executeOnClick(e);\n      measure();\n    },\n    expanded: more,\n    width: width,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    measure: measure,\n    className: cx('fs12', styles.ratingBoxReview),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, rating.review))), showReviewsLink && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    label: \"View all reviews\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }))));\n}\n\n_s(RatingCard, \"z/mztLjhJ9VIc09981F+1QaLiAo=\", false, function () {\n  return [useHistory, useDesktop];\n});\n\n_c = RatingCard;\nRatingCard.propTypes = {\n  rating: PropTypes.object.isRequired,\n  showBorder: PropTypes.bool,\n  showProduct: PropTypes.bool,\n  i: PropTypes.any.isRequired,\n  measure: PropTypes.any.isRequired,\n  showReviewsLink: PropTypes.bool,\n  refresh: PropTypes.func.isRequired\n};\nRatingCard.defaultProps = {\n  showBorder: true,\n  showProduct: false,\n  showReviewsLink: false\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"RatingCard\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/products/RatingCard.jsx"],"names":["React","useState","PropTypes","cx","Switch","Button","Loader","get","moment","useDesktop","ShowMoreText","useHistory","styles","Factory","RatingCard","rating","i","showBorder","showProduct","measure","showReviewsLink","refresh","status","setStatus","history","more","setMore","isDesktop","width","window","screen","userPic","picture","image","executeOnClick","value","onUnlive","show","newStatus","updateRating","identifier","hide","handleClick","push","entityId","ratingBox","noPadding","noBorder","border","user","left","empty","emptyuser","ratingBoxRight","ratingBoxName","name","userName","order","ratingBoxDate","orderedOn","format","bottom","productIcon","product","title","flex","reviewHead","ratingView","star","twoLines","e","ratingBoxReview","review","footer","propTypes","object","isRequired","bool","any","func","defaultProps"],"mappings":"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","sourcesContent":["// import star from 'assets/images/ratings/star-white.svg';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport star from 'assets/images/products/star.svg';\nimport {\n  Switch, Button\n} from 'phoenix-components';\nimport Loader from 'services/loader';\nimport { get } from 'lodash';\nimport emptyuser from 'assets/images/products/emptyuser.svg';\nimport moment from 'moment';\nimport { useDesktop } from 'contexts';\nimport ShowMoreText from 'react-show-more-text';\nimport { useHistory } from 'react-router-dom';\nimport styles from './RatingCard.module.css';\nimport Factory from '../../api/factory';\n\nexport function RatingCard({\n  rating, i, showBorder, showProduct, measure, showReviewsLink, refresh\n}) {\n  const [status, setStatus] = useState(rating.status);\n  const history = useHistory();\n  const [more, setMore] = useState(false);\n  const isDesktop = useDesktop();\n  const width = isDesktop ? window.screen.width - 400 : window.screen.width - 32;\n\n  const userPic = rating?.picture || '';\n  const image = get(rating, 'product.images[0].url', 'https://becca-cdn.windo.live/misc/no_image.png');\n\n  const executeOnClick = (value) => {\n    setMore(value);\n  };\n\n  const onUnlive = async () => {\n    Loader.show();\n    const newStatus = status === 'live' ? 'unlive' : 'live';\n    await Factory.updateRating(rating.identifier, { status: newStatus });\n    setStatus(newStatus);\n    refresh();\n    Loader.hide();\n  };\n\n  const handleClick = () => {\n    history.push(`/products/rating/${rating.entityId}`);\n  };\n\n  return (\n    <div\n      key={i}\n      className={cx(\n        styles.ratingBox,\n        {\n          [styles.noPadding]: !showBorder,\n          [styles.noBorder]: !showBorder,\n          [styles.border]: showBorder,\n        }\n      )}\n    >\n      <div className={styles.user}>\n        <div className={styles.left}>\n          {!userPic ? (\n            <div className={styles.empty}>\n              <img src={emptyuser} alt=\"\" />\n            </div>\n          ) : (\n            <div className={styles.userPic}>\n              <img src={userPic} alt=\"\" />\n            </div>\n          )}\n          <div className={styles.ratingBoxRight}>\n            <div className={styles.ratingBoxName}>\n              {rating.name || rating.userName || 'Anonymous'}\n            </div>\n            {rating.order && (\n              <div className={styles.ratingBoxDate}>{moment(rating.order.orderedOn).format('DD MMMM YYYY, h:mm')}</div>\n            )}\n          </div>\n        </div>\n      </div>\n      {showProduct && (\n        <div className={cx(styles.left, styles.bottom)}>\n          <div className={styles.productIcon}>\n            <img src={image} alt=\"\" />\n          </div>\n          <div className={styles.ratingBoxRight}>\n            <div className={styles.ratingBoxName}>\n              {rating?.product?.title}\n            </div>\n            {rating?.order?.orderedOn && (\n              <div className={styles.ratingBoxDate}>\n                {`Ordered on ${moment(rating.order.orderedOn).format('DD MMMM YYYY')}`}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      <div className={styles.flex}>\n        <div className={styles.reviewHead}>\n          Rating\n          <div className={styles.ratingView}>\n            <div>{rating?.rating}</div>\n            <img src={star} alt=\"\" />\n          </div>\n        </div>\n        <Switch active={status === 'live'} onChange={onUnlive} />\n      </div>\n      {rating.title && (\n        <div className={styles.title}>\n          {rating.title}\n        </div>\n      )}\n      <div className={styles.twoLines}>\n        <ShowMoreText\n          /* Default options */\n          lines={2}\n          more=\"More\"\n          less=\"Less\"\n          anchorClass={styles.more}\n          onClick={(e) => {\n            executeOnClick(e);\n            measure();\n          }}\n          expanded={more}\n          width={width}\n        >\n          <div\n            measure={measure}\n            className={cx('fs12', styles.ratingBoxReview)}\n          >\n            {rating.review}\n          </div>\n        </ShowMoreText>\n      </div>\n      {showReviewsLink && (\n        <>\n          <div className={styles.footer}>\n            <Button\n              size=\"small\"\n              label=\"View all reviews\"\n              onClick={handleClick}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nRatingCard.propTypes = {\n  rating: PropTypes.object.isRequired,\n  showBorder: PropTypes.bool,\n  showProduct: PropTypes.bool,\n  i: PropTypes.any.isRequired,\n  measure: PropTypes.any.isRequired,\n  showReviewsLink: PropTypes.bool,\n  refresh: PropTypes.func.isRequired,\n};\n\nRatingCard.defaultProps = {\n  showBorder: true,\n  showProduct: false,\n  showReviewsLink: false,\n};\n"]},"metadata":{},"sourceType":"module"}