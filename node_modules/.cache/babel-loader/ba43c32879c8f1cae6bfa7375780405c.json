{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/profile/otpBox/Alert.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dialog } from '@material-ui/core';\nimport { useDesktop } from \"../../../contexts\";\nimport _ from 'lodash';\nimport closeIcon from \"../../../assets/images/orders/list/close.svg\";\nimport { Button, Clickable } from 'phoenix-components';\nimport cx from 'classnames';\nimport styles from \"./Alert.module.css\";\nexport function Alert({\n  onDelete,\n  onCancel\n}) {\n  _s();\n\n  const isDesktop = useDesktop();\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n\n  const refs = _.range(0, 6).map(() => /*#__PURE__*/createRef());\n\n  const setOtpCh = (e, idx) => {\n    const {\n      value\n    } = e.target;\n\n    if (/^[0-9]{6}$/.test(value)) {\n      e.stopPropagation();\n      e.preventDefault();\n      setOtp([...value]);\n      return;\n    }\n\n    if (idx + 1 < 6 && e.target.value !== '') {\n      var _refs;\n\n      if ((_refs = refs[idx + 1]) !== null && _refs !== void 0 && _refs.current) {\n        refs[idx + 1].current.focus();\n      }\n    }\n\n    [otp[idx]] = e.target.value;\n    setOtp([...otp]);\n  };\n\n  const onDeleteClick = () => {\n    onDelete(otp.join(''));\n  };\n\n  const onKeyDown = idx => e => {\n    if (e.keyCode === 8 && idx > 0) {\n      var _refs2, _refs2$current;\n\n      if ((_refs2 = refs[idx - 1]) !== null && _refs2 !== void 0 && (_refs2$current = _refs2.current) !== null && _refs2$current !== void 0 && _refs2$current.focus) {\n        refs[idx - 1].current.focus();\n\n        if (idx === 5 && otp[idx]) {\n          otp[5] = '';\n          setOtp([...otp]);\n          return;\n        }\n\n        if (otp[idx] === '' || otp[idx] === null) {\n          otp[idx - 1] = '';\n          setOtp([...otp]);\n        }\n      }\n    }\n  };\n\n  const onOtpPaste = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    let value = (e.clipboardData || window.clipboardData).getData('text');\n    value = value.trim();\n\n    if (/^[0-9]{6}$/.test(value)) {\n      setOtp([...value]);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Dialog // className={styles.dialog}\n  , {\n    PaperProps: {\n      classes: {\n        root: styles.dialog\n      }\n    },\n    maxWidth: isDesktop ? 'xs' : 'md',\n    open: true,\n    onClose: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('flexEnd', styles.padding),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: closeIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Verify OTP\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"To delete the account please enter the OTP sent to your email associated with this account.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.otpScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, _.range(0, 6).map(i => /*#__PURE__*/React.createElement(\"input\", {\n    ref: refs[i],\n    key: i,\n    autoFocus: i === 0,\n    onChange: e => setOtpCh(e, i),\n    type: \"number\",\n    minLength: 1,\n    maxLength: 1,\n    value: otp[i] || '',\n    onKeyDown: onKeyDown(i),\n    onPaste: onOtpPaste,\n    autoComplete: \"one-time-code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"medium\",\n    onClick: onDeleteClick,\n    label: \"DELETE ACCOUNT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(Alert, \"4z3zazi0rWy8DIMoluYCAaJtd5I=\", false, function () {\n  return [useDesktop];\n});\n\n_c = Alert;\nAlert.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nAlert.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"Alert\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/profile/otpBox/Alert.jsx"],"names":["React","useState","createRef","PropTypes","Dialog","useDesktop","_","Button","Clickable","cx","styles","Alert","onDelete","onCancel","isDesktop","otp","setOtp","refs","range","map","setOtpCh","e","idx","value","target","test","stopPropagation","preventDefault","current","focus","onDeleteClick","join","onKeyDown","keyCode","onOtpPaste","clipboardData","window","getData","trim","classes","root","dialog","padding","closeIcon","title","subTitle","otpScreen","i","buttons","propTypes","func","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dialog } from '@material-ui/core';\nimport { useDesktop } from 'contexts';\nimport _ from 'lodash';\nimport closeIcon from 'assets/images/orders/list/close.svg';\nimport { Button, Clickable } from 'phoenix-components';\nimport cx from 'classnames';\nimport styles from './Alert.module.css';\n\nexport function Alert({\n  onDelete, onCancel\n}) {\n  const isDesktop = useDesktop();\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const refs = _.range(0, 6)\n    .map(() => createRef());\n\n  const setOtpCh = (e, idx) => {\n    const { value } = e.target;\n    if (/^[0-9]{6}$/.test(value)) {\n      e.stopPropagation();\n      e.preventDefault();\n      setOtp([...value]);\n      return;\n    }\n    if (idx + 1 < 6 && e.target.value !== '') {\n      if (refs[idx + 1]?.current) {\n        refs[idx + 1].current.focus();\n      }\n    }\n    [otp[idx]] = e.target.value;\n    setOtp([...otp]);\n  };\n\n  const onDeleteClick = () => {\n    onDelete(otp.join(''));\n  };\n\n  const onKeyDown = (idx) => (e) => {\n    if (e.keyCode === 8 && idx > 0) {\n      if (refs[idx - 1]?.current?.focus) {\n        refs[idx - 1].current.focus();\n        if (idx === 5 && otp[idx]) {\n          otp[5] = '';\n          setOtp([...otp]);\n          return;\n        }\n        if (otp[idx] === '' || otp[idx] === null) {\n          otp[idx - 1] = '';\n          setOtp([...otp]);\n        }\n      }\n    }\n  };\n\n  const onOtpPaste = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let value = (e.clipboardData || window.clipboardData).getData('text');\n    value = value.trim();\n    if (/^[0-9]{6}$/.test(value)) {\n      setOtp([...value]);\n    }\n  };\n\n  return (\n    <Dialog\n      // className={styles.dialog}\n      PaperProps={{\n        classes: {\n          root: styles.dialog,\n        }\n      }}\n      maxWidth={isDesktop ? 'xs' : 'md'}\n      open={true}\n      onClose={onCancel}\n    >\n      {isDesktop && (\n        <div className={cx('flexEnd', styles.padding)}>\n          <Clickable\n            onClick={onCancel}>\n            <img src={closeIcon} alt=\"\" />\n          </Clickable>\n        </div>\n      )}\n      <div className={styles.title}>Verify OTP</div>\n      <div className={styles.subTitle}>\n        To delete the account please enter the OTP\n        sent to your email associated with this\n        account.\n      </div>\n      <div className={styles.otpScreen}>\n        {_.range(0, 6)\n          .map((i) => (\n            <input\n              ref={refs[i]}\n              key={i}\n              autoFocus={i === 0}\n              onChange={(e) => setOtpCh(e, i)}\n              type=\"number\"\n              minLength={1}\n              maxLength={1}\n              value={otp[i] || ''}\n              onKeyDown={onKeyDown(i)}\n              onPaste={onOtpPaste}\n              autoComplete=\"one-time-code\"\n            />\n          ))}\n      </div>\n      <div className={styles.buttons}>\n        <Button size=\"medium\" onClick={onDeleteClick} label=\"DELETE ACCOUNT\" />\n      </div>\n    </Dialog>\n  );\n}\n\nAlert.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n};\n\nAlert.defaultProps = {\n};\n"]},"metadata":{},"sourceType":"module"}