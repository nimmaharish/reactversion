{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/products/CustomVariant.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useField } from 'formik';\nimport { Card, Clickable, FormikInput, Switch } from 'phoenix-components';\nimport { Radio } from 'phoenix-components/lib/formik';\nimport { Grid } from '@material-ui/core';\nimport deleteIcon from \"../../assets/v2/products/delete.svg\";\nimport styles from \"./Variant.module.css\";\nimport cx from 'classnames';\nimport _ from 'lodash';\nimport { ImageDrawer } from \"./ImageDrawer\";\nimport { getVideosAndImages } from \"./variantUtils\";\nimport { useImagesLength, useIsFreePlan } from \"../../contexts\";\nexport function CustomVariant({\n  index\n}) {\n  _s();\n\n  var _variant$info, _variant$info2, _variant$info3, _variant$info4, _variant$_id, _variant$info5, _variant$info6;\n\n  const prefix = `variants[${index}]`;\n  const [{\n    value: variant\n  },, {\n    setValue\n  }] = useField(prefix);\n  const [{\n    value: variants\n  },, {\n    setValue: setVariants\n  }] = useField('variants');\n  const fileLength = useImagesLength(true);\n  const isFree = useIsFreePlan();\n\n  const onUnlive = () => {\n    setValue({ ...variant,\n      status: variant.status === 'live' ? 'unlive' : 'live'\n    });\n  };\n\n  const onDelete = () => {\n    setVariants(variants.filter((_v, idx) => idx !== index));\n  };\n\n  const setVariantTitle = e => {\n    e.stopPropagation();\n    const {\n      value\n    } = e.target;\n    setVariants(variants.map(v => {\n      _.set(v, 'info.name', value);\n\n      return v;\n    }));\n  };\n\n  const onChangeImages = files => {\n    const {\n      videos,\n      images\n    } = getVideosAndImages(files);\n    setValue({ ...variant,\n      images,\n      videos\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.colorV,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, _.isEmpty(variant === null || variant === void 0 ? void 0 : (_variant$info = variant.info) === null || _variant$info === void 0 ? void 0 : _variant$info.name) ? 'Variant' : variant === null || variant === void 0 ? void 0 : (_variant$info2 = variant.info) === null || _variant$info2 === void 0 ? void 0 : _variant$info2.name, ' ', _.isEmpty(variant === null || variant === void 0 ? void 0 : (_variant$info3 = variant.info) === null || _variant$info3 === void 0 ? void 0 : _variant$info3.value) ? index + 1 : variant === null || variant === void 0 ? void 0 : (_variant$info4 = variant.info) === null || _variant$info4 === void 0 ? void 0 : _variant$info4.value), /*#__PURE__*/React.createElement(Card, {\n    className: styles.desktopCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, (variant === null || variant === void 0 ? void 0 : (_variant$_id = variant._id) === null || _variant$_id === void 0 ? void 0 : _variant$_id.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.switch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.status, {\n      [styles.statusLive]: variant.status === 'live',\n      [styles.statusUnlive]: variant.status !== 'live'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }), ' ', variant.status), /*#__PURE__*/React.createElement(Switch, {\n    active: variant.status === 'live',\n    onChange: onUnlive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormikInput, {\n    label: \"Variant Title\",\n    placeholder: \"Enter Variant Title\",\n    name: `${prefix}.info.name`,\n    readonly: index !== 0,\n    inputProps: {\n      onChange: setVariantTitle\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormikInput, {\n    label: variant !== null && variant !== void 0 && (_variant$info5 = variant.info) !== null && _variant$info5 !== void 0 && _variant$info5.name ? `${variant.info.name} Type` : 'Variant Type',\n    placeholder: variant !== null && variant !== void 0 && (_variant$info6 = variant.info) !== null && _variant$info6 !== void 0 && _variant$info6.name ? `Enter ${variant.info.name} Type` : 'Enter Variant Type',\n    name: `${prefix}.info.value`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Product Price\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormikInput, {\n    label: \"Price\",\n    placeholder: \"e.g. 160\",\n    name: `${prefix}.discountedAmount`,\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormikInput, {\n    label: \"Strike-off Price\",\n    placeholder: \"e.g. 200\",\n    name: `${prefix}.amount`,\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Availability\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    name: `${prefix}.availableType`,\n    value: \"infinite\",\n    label: \"Always in Stock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    name: `${prefix}.availableType`,\n    value: \"finite\",\n    label: \"Limited Stock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  })))), (variant === null || variant === void 0 ? void 0 : variant.availableType) === 'finite' && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormikInput, {\n    label: \"Availability\",\n    name: `${prefix}.available`,\n    placeholder: \"0\",\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(ImageDrawer, {\n    onChange: onChangeImages,\n    isMulti: true,\n    images: [...variant.images, ...variant.videos],\n    accept: \"image/*,video/mp4,video/x-m4v,video/*\",\n    size: fileLength,\n    videos: !isFree,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }), !variant._id && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.delete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: onDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: deleteIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  })))));\n}\n\n_s(CustomVariant, \"BUoEcKeF09nDtlkSSWLp89Y3/LM=\", false, function () {\n  return [useField, useField, useImagesLength, useIsFreePlan];\n});\n\n_c = CustomVariant;\nCustomVariant.propTypes = {\n  index: PropTypes.number.isRequired\n};\nCustomVariant.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomVariant\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/products/CustomVariant.jsx"],"names":["React","PropTypes","useField","Card","Clickable","FormikInput","Switch","Radio","Grid","styles","cx","_","ImageDrawer","getVideosAndImages","useImagesLength","useIsFreePlan","CustomVariant","index","prefix","value","variant","setValue","variants","setVariants","fileLength","isFree","onUnlive","status","onDelete","filter","_v","idx","setVariantTitle","e","stopPropagation","target","map","v","set","onChangeImages","files","videos","images","colorV","title","isEmpty","info","name","desktopCard","_id","length","switch","statusLive","statusUnlive","onChange","heading","availableType","delete","deleteIcon","propTypes","number","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useField } from 'formik';\nimport {\n  Card, Clickable, FormikInput, Switch\n} from 'phoenix-components';\nimport { Radio } from 'phoenix-components/lib/formik';\nimport { Grid } from '@material-ui/core';\nimport deleteIcon from 'assets/v2/products/delete.svg';\nimport styles from 'components/products/Variant.module.css';\nimport cx from 'classnames';\nimport _ from 'lodash';\nimport { ImageDrawer } from 'components/products/ImageDrawer';\nimport { getVideosAndImages } from 'components/products/variantUtils';\nimport { useImagesLength, useIsFreePlan } from 'contexts';\n\nexport function CustomVariant({ index }) {\n  const prefix = `variants[${index}]`;\n  const [{ value: variant }, , { setValue }] = useField(prefix);\n  const [{ value: variants }, , { setValue: setVariants }] = useField('variants');\n  const fileLength = useImagesLength(true);\n  const isFree = useIsFreePlan();\n\n  const onUnlive = () => {\n    setValue({\n      ...variant,\n      status: variant.status === 'live' ? 'unlive' : 'live',\n    });\n  };\n\n  const onDelete = () => {\n    setVariants(variants.filter((_v, idx) => idx !== index));\n  };\n\n  const setVariantTitle = (e) => {\n    e.stopPropagation();\n    const { value } = e.target;\n    setVariants(variants.map(v => {\n      _.set(v, 'info.name', value);\n      return v;\n    }));\n  };\n\n  const onChangeImages = (files) => {\n    const {\n      videos,\n      images\n    } = getVideosAndImages(files);\n    setValue({\n      ...variant,\n      images,\n      videos,\n    });\n  };\n\n  return (\n    <div className={styles.colorV}>\n      <div className={styles.title}>\n        {_.isEmpty(variant?.info?.name) ? 'Variant' : variant?.info?.name}\n        {' '}\n        {_.isEmpty(variant?.info?.value) ? index + 1 : variant?.info?.value}\n      </div>\n      <Card className={styles.desktopCard}>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            {variant?._id?.length > 0 && (\n              <div className={styles.switch}>\n                <div\n                  className={cx(styles.status, {\n                    [styles.statusLive]: variant.status === 'live',\n                    [styles.statusUnlive]: variant.status !== 'live',\n                  })}\n                >\n                  <span />\n                  {' '}\n                  {variant.status}\n                </div>\n                <Switch active={variant.status === 'live'} onChange={onUnlive} />\n              </div>\n            )}\n          </Grid>\n          <Grid item xs={12}>\n            <FormikInput\n              label=\"Variant Title\"\n              placeholder=\"Enter Variant Title\"\n              name={`${prefix}.info.name`}\n              readonly={index !== 0}\n              inputProps={{\n                onChange: setVariantTitle,\n              }}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <FormikInput\n              label={variant?.info?.name ? `${variant.info.name} Type` : 'Variant Type'}\n              placeholder={variant?.info?.name ? `Enter ${variant.info.name} Type` : 'Enter Variant Type'}\n              name={`${prefix}.info.value`}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <div className={styles.heading}>Product Price</div>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <FormikInput\n                  label=\"Price\"\n                  placeholder=\"e.g. 160\"\n                  name={`${prefix}.discountedAmount`}\n                  type=\"number\"\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <FormikInput\n                  label=\"Strike-off Price\"\n                  placeholder=\"e.g. 200\"\n                  name={`${prefix}.amount`}\n                  type=\"number\"\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={12}>\n            <div className={styles.heading}>Availability</div>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <Radio name={`${prefix}.availableType`} value=\"infinite\" label=\"Always in Stock\" />\n              </Grid>\n              <Grid item xs={6}>\n                <Radio name={`${prefix}.availableType`} value=\"finite\" label=\"Limited Stock\" />\n              </Grid>\n            </Grid>\n          </Grid>\n          {variant?.availableType === 'finite' && (\n            <Grid item xs={12}>\n              <FormikInput\n                label=\"Availability\"\n                name={`${prefix}.available`}\n                placeholder=\"0\"\n                type=\"number\"\n              />\n            </Grid>\n          )}\n        </Grid>\n        <ImageDrawer\n          onChange={onChangeImages}\n          isMulti={true}\n          images={[...variant.images, ...variant.videos]}\n          accept=\"image/*,video/mp4,video/x-m4v,video/*\"\n          size={fileLength}\n          videos={!isFree}\n        />\n        {!variant._id && (\n          <div className={styles.delete}>\n            <Clickable onClick={onDelete}>\n              <img src={deleteIcon} alt=\"\" />\n            </Clickable>\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n}\n\nCustomVariant.propTypes = {\n  index: PropTypes.number.isRequired,\n};\n\nCustomVariant.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}