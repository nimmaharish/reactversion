{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/stepper/Stepper.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport { Step1 } from \"./Step1\";\nimport { Step2 } from \"./Step2\";\nimport { Step3 } from \"./Step3\";\nimport Loader from \"../../../services/loader\";\nimport PropTypes from 'prop-types';\nimport { Factory } from \"../../../api\";\nimport SnackBar from \"../../../services/snackbar\";\nimport { isIND } from \"../../../contexts/userContext\";\nimport backIcon from \"../../../assets/images/orders/details/back.svg\";\nimport { useOrder, useGetIds } from \"../../../contexts/orderContext\";\nimport { useDesktop } from \"../../../contexts\";\nimport styles from \"./Stepper.module.css\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    height: 'calc(80vh - 136px)'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }\n}));\nexport default function HorizontalLinearStepper({\n  groupId,\n  order,\n  onClose\n}) {\n  _s();\n\n  const classes = useStyles();\n  const isDesktop = useDesktop();\n  const [skipped, setSkipped] = React.useState(new Set());\n  const [resGrpId, setResGrpId] = React.useState(null);\n  const rootOrder = useOrder();\n  const ids = useGetIds(); // const webview = useIsWebView();\n  // const [meta, setMeta] = React.useState({});\n\n  const [activeStep, setActiveStep] = useState(0);\n  const [addressId, setAddressId] = useState(null);\n  const isIndia = isIND();\n\n  function getSteps() {\n    if (isIndia) {\n      return ['Shipping Box Details', 'Courier Selection'];\n    }\n\n    return ['Shipping Box Details', 'Courier Selection', 'Pickup Time'];\n  }\n\n  const steps = getSteps();\n  useEffect(() => {\n    function handleResize() {\n      const container = document.getElementById('resize');\n\n      if (container) {\n        container.style.height = `${window.screen.height - container.getBoundingClientRect().top - 68}px`;\n        container.style.overflowY = 'auto';\n      }\n    }\n\n    window.addEventListener('resize', handleResize);\n    handleResize();\n  });\n  useEffect(() => {\n    if (rootOrder !== null && rootOrder !== void 0 && rootOrder._id) {\n      Loader.show();\n\n      if (groupId.length > 0) {\n        Factory.getShippingMetaWithGroup(rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder._id, groupId, {\n          ids\n        }).then(res => {\n          // setMeta(res);\n          // const index = 1;\n          setResGrpId(res.groupId);\n          const index = !(res !== null && res !== void 0 && res.details) ? 0 : !(res !== null && res !== void 0 && res.pricing) ? 1 : !(res !== null && res !== void 0 && res.pickup) ? 2 : 0;\n          setActiveStep(index);\n          Loader.hide();\n        }).catch(() => {\n          SnackBar.show('something went wrong', 'error');\n          Loader.hide();\n        });\n      } else {\n        Factory.getShippingMeta(rootOrder === null || rootOrder === void 0 ? void 0 : rootOrder._id, {\n          ids\n        }).then(res => {\n          // setMeta(res);\n          // const index = 1;\n          setResGrpId(res.groupId);\n          const index = !(res !== null && res !== void 0 && res.details) ? 0 : !(res !== null && res !== void 0 && res.pricing) ? 1 : !(res !== null && res !== void 0 && res.pickup) ? 2 : 0;\n          setActiveStep(index);\n          Loader.hide();\n        }).catch(() => {\n          SnackBar.show('something went wrong', 'error');\n          Loader.hide();\n        });\n      }\n    }\n  }, [order]);\n\n  const isStepSkipped = step => skipped.has(step);\n\n  const handleNext = () => {\n    if (activeStep === 0) {\n      if (!(order !== null && order !== void 0 && order.addressId)) {\n        SnackBar.show('Please Select Address', 'error');\n        return;\n      }\n    }\n\n    setAddressId(order === null || order === void 0 ? void 0 : order.addressId);\n    let newSkipped = skipped;\n\n    if (isStepSkipped(activeStep)) {\n      newSkipped = new Set(newSkipped.values());\n      newSkipped.delete(activeStep);\n    }\n\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n    setSkipped(newSkipped);\n  };\n\n  const handleBack = () => {\n    if (activeStep === 0) {\n      onClose();\n      return;\n    }\n\n    setActiveStep(prevActiveStep => prevActiveStep === 0 ? 0 : prevActiveStep - 1);\n  };\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/React.createElement(Step1, {\n          groupId: groupId || resGrpId,\n          order: order,\n          handleNext: handleNext,\n          handleBack: handleBack,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(Step2, {\n          groupId: groupId || resGrpId,\n          order: { ...order,\n            addressId\n          },\n          handleNext: handleNext,\n          handleBack: handleBack,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(Step3, {\n          groupId: groupId || resGrpId,\n          order: order,\n          handleBack: handleBack,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 11\n          }\n        });\n\n      default:\n        return 'Unknown step';\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, !isDesktop && /*#__PURE__*/React.createElement(React.Fragment, null, activeStep !== 0 && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.back,\n    src: backIcon,\n    alt: \"\",\n    onClick: handleBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 32\n    }\n  })), /*#__PURE__*/React.createElement(Stepper, {\n    className: styles.stepper,\n    activeStep: activeStep,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, steps.map((label, index) => /*#__PURE__*/React.createElement(Step, {\n    key: index,\n    alternativeLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    classes: {\n      active: styles.stepLabelActive,\n      label: styles.stepLabelActive\n    },\n    StepIconProps: {\n      classes: {\n        root: styles.stepRoot,\n        active: styles.stepActive,\n        completed: styles.stepActive\n      }\n    },\n    className: styles.stepLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, label)))), getStepContent(activeStep));\n}\n\n_s(HorizontalLinearStepper, \"ajdEmQaM8Gmg7hdacODVw31RiyU=\", false, function () {\n  return [useStyles, useDesktop, useOrder, useGetIds];\n});\n\n_c = HorizontalLinearStepper;\nHorizontalLinearStepper.propTypes = {\n  groupId: PropTypes.string,\n  order: PropTypes.any,\n  onClose: PropTypes.func\n};\nHorizontalLinearStepper.defaultProps = {\n  groupId: '',\n  order: {},\n  onClose: () => {}\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"HorizontalLinearStepper\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/stepper/Stepper.jsx"],"names":["React","useEffect","useState","makeStyles","Stepper","Step","StepLabel","Step1","Step2","Step3","Loader","PropTypes","Factory","SnackBar","isIND","useOrder","useGetIds","useDesktop","styles","useStyles","theme","root","width","height","button","marginRight","spacing","instructions","marginTop","marginBottom","HorizontalLinearStepper","groupId","order","onClose","classes","isDesktop","skipped","setSkipped","Set","resGrpId","setResGrpId","rootOrder","ids","activeStep","setActiveStep","addressId","setAddressId","isIndia","getSteps","steps","handleResize","container","document","getElementById","style","window","screen","getBoundingClientRect","top","overflowY","addEventListener","_id","show","length","getShippingMetaWithGroup","then","res","index","details","pricing","pickup","hide","catch","getShippingMeta","isStepSkipped","step","has","handleNext","newSkipped","values","delete","prevActiveStep","handleBack","getStepContent","back","backIcon","stepper","map","label","active","stepLabelActive","stepRoot","stepActive","completed","stepLabel","propTypes","string","any","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport { Step1 } from 'components/orders/stepper/Step1';\nimport { Step2 } from 'components/orders/stepper/Step2';\nimport { Step3 } from 'components/orders/stepper/Step3';\nimport Loader from 'services/loader';\nimport PropTypes from 'prop-types';\nimport { Factory } from 'api';\nimport SnackBar from 'services/snackbar';\nimport { isIND } from 'contexts/userContext';\nimport backIcon from 'assets/images/orders/details/back.svg';\nimport {\n  useOrder,\n  useGetIds\n} from 'contexts/orderContext';\nimport { useDesktop } from 'contexts';\nimport styles from './Stepper.module.css';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    height: 'calc(80vh - 136px)'\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport default function HorizontalLinearStepper({ groupId, order, onClose }) {\n  const classes = useStyles();\n  const isDesktop = useDesktop();\n  const [skipped, setSkipped] = React.useState(new Set());\n  const [resGrpId, setResGrpId] = React.useState(null);\n  const rootOrder = useOrder();\n  const ids = useGetIds();\n  // const webview = useIsWebView();\n  // const [meta, setMeta] = React.useState({});\n  const [activeStep, setActiveStep] = useState(0);\n  const [addressId, setAddressId] = useState(null);\n  const isIndia = isIND();\n\n  function getSteps() {\n    if (isIndia) {\n      return ['Shipping Box Details', 'Courier Selection'];\n    }\n    return ['Shipping Box Details', 'Courier Selection', 'Pickup Time'];\n  }\n\n  const steps = getSteps();\n\n  useEffect(() => {\n    function handleResize() {\n      const container = document.getElementById('resize');\n      if (container) {\n        container.style.height = `${window.screen.height - container.getBoundingClientRect().top - 68}px`;\n        container.style.overflowY = 'auto';\n      }\n    }\n\n    window.addEventListener('resize', handleResize);\n    handleResize();\n  });\n\n  useEffect(() => {\n    if (rootOrder?._id) {\n      Loader.show();\n      if (groupId.length > 0) {\n        Factory.getShippingMetaWithGroup(rootOrder?._id, groupId, { ids })\n          .then((res) => {\n          // setMeta(res);\n          // const index = 1;\n            setResGrpId(res.groupId);\n            const index = !res?.details\n              ? 0 : (!res?.pricing ? 1 : (!res?.pickup ? 2 : 0));\n            setActiveStep(index);\n            Loader.hide();\n          })\n          .catch(() => {\n            SnackBar.show('something went wrong', 'error');\n            Loader.hide();\n          });\n      } else {\n        Factory.getShippingMeta(rootOrder?._id, { ids })\n          .then((res) => {\n          // setMeta(res);\n          // const index = 1;\n            setResGrpId(res.groupId);\n            const index = !res?.details\n              ? 0 : (!res?.pricing ? 1 : (!res?.pickup ? 2 : 0));\n            setActiveStep(index);\n            Loader.hide();\n          })\n          .catch(() => {\n            SnackBar.show('something went wrong', 'error');\n            Loader.hide();\n          });\n      }\n    }\n  }, [order]);\n\n  const isStepSkipped = (step) => skipped.has(step);\n\n  const handleNext = () => {\n    if (activeStep === 0) {\n      if (!order?.addressId) {\n        SnackBar.show('Please Select Address', 'error');\n        return;\n      }\n    }\n    setAddressId(order?.addressId);\n    let newSkipped = skipped;\n    if (isStepSkipped(activeStep)) {\n      newSkipped = new Set(newSkipped.values());\n      newSkipped.delete(activeStep);\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped(newSkipped);\n  };\n\n  const handleBack = () => {\n    if (activeStep === 0) {\n      onClose();\n      return;\n    }\n    setActiveStep((prevActiveStep) => (prevActiveStep === 0 ? 0 : prevActiveStep - 1));\n  };\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return (\n          <Step1\n            groupId={groupId || resGrpId}\n            order={order}\n            handleNext={handleNext}\n            handleBack={handleBack}\n          />\n        );\n      case 1:\n        return (\n          <Step2\n            groupId={groupId || resGrpId}\n            order={{ ...order, addressId }}\n            handleNext={handleNext}\n            handleBack={handleBack}\n          />\n        );\n      case 2:\n        return (\n          <Step3\n            groupId={groupId || resGrpId}\n            order={order}\n            handleBack={handleBack}\n          />\n        );\n      default:\n        return 'Unknown step';\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      {!isDesktop && (\n        <>\n          {activeStep !== 0 && <img className={styles.back} src={backIcon} alt=\"\" onClick={handleBack} />}\n        </>\n      )}\n      <Stepper\n        className={styles.stepper}\n        activeStep={activeStep}\n      >\n        {steps.map((label, index) => (\n          <Step\n            key={index}\n            alternativeLabel\n          >\n            <StepLabel\n              classes={{\n                active: styles.stepLabelActive,\n                label: styles.stepLabelActive\n              }}\n              StepIconProps={{\n                classes: {\n                  root: styles.stepRoot,\n                  active: styles.stepActive,\n                  completed: styles.stepActive\n                }\n              }}\n              className={styles.stepLabel}\n            >\n              {label}\n            </StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      {getStepContent(activeStep)}\n    </div>\n  );\n}\n\nHorizontalLinearStepper.propTypes = {\n  groupId: PropTypes.string,\n  order: PropTypes.any,\n  onClose: PropTypes.func,\n};\n\nHorizontalLinearStepper.defaultProps = {\n  groupId: '',\n  order: {},\n  onClose: () => {},\n};\n"]},"metadata":{},"sourceType":"module"}