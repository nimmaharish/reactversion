{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/PriceDetails.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useConfirmedAmount, useNonConfirmedAmount, useOrder, usePendingPricing } from \"../../contexts/orderContext\";\nimport { useShop } from \"../../contexts/userContext\";\nimport cx from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport infoIcon from \"../../assets/images/orders/list/info.svg\";\nimport { LightBlueTile } from \"../cards\";\nimport { useDesktop } from \"../../contexts\";\nimport _ from 'lodash';\nimport InfoIcon from \"../../assets/v2/subscriptions/info.svg\";\nimport { Clickable } from 'phoenix-components';\nimport { TaxPopOver } from \"./v2/TaxPopOver\";\nimport styles from \"./PriceDetails.module.css\";\nexport function PriceDetails() {\n  _s();\n\n  var _order$coupon;\n\n  const {\n    pricing,\n    total,\n    taxes\n  } = usePendingPricing();\n  const adds = pricing.filter(x => x.split === 1);\n  const subs = pricing.filter(x => x.split === 2);\n  const [tooltipIsOpen, setTooltipIsOpen] = useState(false);\n  const [openTax, toggleTax] = useState(false);\n  const shop = useShop();\n  const confirmedAmount = useConfirmedAmount();\n  const due = useNonConfirmedAmount();\n  const order = useOrder();\n\n  const codAmount = _.sumBy((order.paymentList || []).filter(x => x.mode === 'cod'), 'amount');\n\n  const isDesktop = useDesktop();\n  const LightTooltip = withStyles(theme => ({\n    tooltip: {\n      backgroundColor: 'rgba(255, 255, 255)',\n      color: 'rgba(33, 33, 33, 0.6)',\n      boxShadow: theme.shadows[1],\n      fontSize: 10,\n      marginTop: 2\n    }\n  }))(Tooltip);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, openTax && /*#__PURE__*/React.createElement(TaxPopOver, {\n    value: taxes,\n    onClose: () => toggleTax(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: isDesktop ? styles.desktopBox : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, \"Payment Details\"), /*#__PURE__*/React.createElement(LightBlueTile, {\n    className: styles.breakup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, adds.map(p => /*#__PURE__*/React.createElement(\"div\", {\n    key: p.name,\n    className: styles.row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.black50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, p.name, ' '), p.name.toLowerCase() === 'tax' && Object.keys(taxes).length > 0 && /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => toggleTax(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: InfoIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.rupee,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }, shop.currency, \"\\xA0\"), p.value.toFixed(2)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.borderTop1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, subs.map(p => /*#__PURE__*/React.createElement(\"div\", {\n    key: p.name,\n    className: styles.row,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.black50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, p.name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.rupee1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, `- ${shop.currency} ${p.value.toFixed(2)}`))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, styles.borderTop),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.total, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, \"Total Amount Payable\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.rupee, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, `${shop.currency} ${total.toFixed(2)}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, styles.borderTop),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.total, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, \"Total Amount Paid\", /*#__PURE__*/React.createElement(LightTooltip, {\n    title: \"Does not include Direct Cash Payment\",\n    placement: \"top\",\n    open: tooltipIsOpen,\n    onClose: () => setTooltipIsOpen(null),\n    leaveDelay: 200,\n    arrow: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.marginTop,\n    onClick: () => {\n      if (tooltipIsOpen) {\n        setTooltipIsOpen(null);\n      } else {\n        setTooltipIsOpen(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.infoIcon,\n    src: infoIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.rupee, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, `${shop.currency} ${(order.paid - codAmount + ((order === null || order === void 0 ? void 0 : (_order$coupon = order.coupon) === null || _order$coupon === void 0 ? void 0 : _order$coupon.amount) || 0)).toFixed(2)}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, styles.borderTop2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.rupee, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, \"Confirmed Amount\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.rupee, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, `${shop.currency} ${confirmedAmount.toFixed(2)}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, styles.borderTop2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.rupee1, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, \"Payment Due\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.rupee1, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, `${shop.currency} ${due.toFixed(2)}`))), (order === null || order === void 0 ? void 0 : order.refunded) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.row, styles.borderTop1, styles.padding),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.total, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"Refunded Amount\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.rupee, 'bold'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, `${shop.currency} ${order === null || order === void 0 ? void 0 : order.refunded.toFixed(2)}`)))))));\n}\n\n_s(PriceDetails, \"quX7CbUPXXt/+L3agESUFfjd2fg=\", false, function () {\n  return [usePendingPricing, useShop, useConfirmedAmount, useNonConfirmedAmount, useOrder, useDesktop];\n});\n\n_c = PriceDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"PriceDetails\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/PriceDetails.jsx"],"names":["React","useState","useConfirmedAmount","useNonConfirmedAmount","useOrder","usePendingPricing","useShop","cx","withStyles","Tooltip","LightBlueTile","useDesktop","_","Clickable","TaxPopOver","styles","PriceDetails","pricing","total","taxes","adds","filter","x","split","subs","tooltipIsOpen","setTooltipIsOpen","openTax","toggleTax","shop","confirmedAmount","due","order","codAmount","sumBy","paymentList","mode","isDesktop","LightTooltip","theme","tooltip","backgroundColor","color","boxShadow","shadows","fontSize","marginTop","container","desktopBox","title","breakup","map","p","name","row","black50","toLowerCase","Object","keys","length","InfoIcon","rupee","currency","value","toFixed","borderTop1","rupee1","borderTop","infoIcon","paid","coupon","amount","borderTop2","refunded","padding"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  useConfirmedAmount,\n  useNonConfirmedAmount,\n  useOrder,\n  usePendingPricing,\n} from 'contexts/orderContext';\nimport { useShop } from 'contexts/userContext';\nimport cx from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport infoIcon from 'assets/images/orders/list/info.svg';\nimport { LightBlueTile } from 'components/cards';\nimport { useDesktop } from 'contexts';\nimport _ from 'lodash';\nimport InfoIcon from 'assets/v2/subscriptions/info.svg';\nimport { Clickable } from 'phoenix-components';\nimport { TaxPopOver } from 'components/orders/v2/TaxPopOver';\nimport styles from './PriceDetails.module.css';\n\nexport function PriceDetails() {\n  const {\n    pricing,\n    total,\n    taxes\n  } = usePendingPricing();\n  const adds = pricing.filter(x => x.split === 1);\n  const subs = pricing.filter(x => x.split === 2);\n  const [tooltipIsOpen, setTooltipIsOpen] = useState(false);\n  const [openTax, toggleTax] = useState(false);\n  const shop = useShop();\n  const confirmedAmount = useConfirmedAmount();\n  const due = useNonConfirmedAmount();\n  const order = useOrder();\n  const codAmount = _.sumBy((order.paymentList || []).filter(x => x.mode === 'cod'), 'amount');\n\n  const isDesktop = useDesktop();\n  const LightTooltip = withStyles((theme) => ({\n    tooltip: {\n      backgroundColor: 'rgba(255, 255, 255)',\n      color: 'rgba(33, 33, 33, 0.6)',\n      boxShadow: theme.shadows[1],\n      fontSize: 10,\n      marginTop: 2\n    },\n  }))(Tooltip);\n\n  return (\n    <>\n      <div className={styles.container}>\n        {openTax && (\n          <TaxPopOver value={taxes} onClose={() => toggleTax(false)} />\n        )}\n        <div className={isDesktop ? styles.desktopBox : null}>\n          <div className={styles.title}>Payment Details</div>\n          <LightBlueTile className={styles.breakup}>\n            {adds.map(p => (\n              <div key={p.name} className={styles.row}>\n                <div className={styles.black50}>\n                  <span>\n                    {p.name}\n                    {' '}\n                  </span>\n                  {p.name.toLowerCase() === 'tax' && Object.keys(taxes).length > 0 && (\n                    <Clickable onClick={() => toggleTax(true)}>\n                      <img src={InfoIcon} alt=\"\" />\n                    </Clickable>\n                  )}\n                </div>\n                <div>\n                  <span className={styles.rupee}>\n                    {shop.currency}\n                    &nbsp;\n                  </span>\n                  {p.value.toFixed(2)}\n                </div>\n              </div>\n            ))}\n            <div className={cx(styles.borderTop1)}>\n              {subs.map(p => (\n                <div key={p.name} className={styles.row}>\n                  <div className={styles.black50}>{p.name}</div>\n                  <div>\n                    <span className={styles.rupee1}>\n                      {`- ${shop.currency} ${p.value.toFixed(2)}`}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n            <div className={cx(styles.row, styles.borderTop)}>\n              <div className={cx(styles.total, 'bold')}>\n                Total Amount Payable\n              </div>\n              <div>\n                <span className={cx(styles.rupee, 'bold')}>\n                  {`${shop.currency} ${total.toFixed(2)}`}\n                </span>\n              </div>\n            </div>\n            <div className={cx(styles.row, styles.borderTop)}>\n              <div className={cx(styles.total, 'bold')}>\n                Total Amount Paid\n                <LightTooltip\n                  title=\"Does not include Direct Cash Payment\"\n                  placement=\"top\"\n                  open={tooltipIsOpen}\n                  onClose={() => setTooltipIsOpen(null)}\n                  leaveDelay={200}\n                  arrow\n                >\n                  <span\n                    className={styles.marginTop}\n                    onClick={() => {\n                      if (tooltipIsOpen) { setTooltipIsOpen(null); } else { setTooltipIsOpen(true); }\n                    }}>\n                    <img className={styles.infoIcon} src={infoIcon} alt=\"\" />\n                  </span>\n                </LightTooltip>\n              </div>\n              <div>\n                <span className={cx(styles.rupee, 'bold')}>\n                  {`${shop.currency} ${(order.paid - codAmount + (order?.coupon?.amount || 0)).toFixed(2)}`}\n                </span>\n              </div>\n            </div>\n            <div className={cx(styles.row, styles.borderTop2)}>\n              <div className={cx(styles.rupee, 'bold')}>\n                Confirmed Amount\n              </div>\n              <div>\n                <span className={cx(styles.rupee, 'bold')}>\n                  {`${shop.currency} ${confirmedAmount.toFixed(2)}`}\n                </span>\n              </div>\n            </div>\n            <div className={cx(styles.row, styles.borderTop2)}>\n              <div className={cx(styles.rupee1, 'bold')}>\n                Payment Due\n              </div>\n              <div>\n                <span className={cx(styles.rupee1, 'bold')}>\n                  {`${shop.currency} ${due.toFixed(2)}`}\n                </span>\n              </div>\n            </div>\n            {order?.refunded > 0 && (\n              <div className={cx(styles.row, styles.borderTop1, styles.padding)}>\n                <div className={cx(styles.total, 'bold')}>\n                  Refunded Amount\n                </div>\n                <div>\n                  <span className={cx(styles.rupee, 'bold')}>\n                    {`${shop.currency} ${order?.refunded.toFixed(2)}`}\n                  </span>\n                </div>\n              </div>\n            )}\n          </LightBlueTile>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}