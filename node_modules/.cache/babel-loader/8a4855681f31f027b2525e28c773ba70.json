{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/Instagram.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Loading } from \"../components/shared/Loading\";\nimport Loader from \"../services/loader\";\nimport EventManager from \"../utils/events\";\nimport { Nikon } from \"../api\";\nimport SnackBar from \"../services/snackbar\";\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from \"../hooks\";\nimport { Dialog, DialogContent } from '@material-ui/core';\nimport instagramLinkIcon from \"../assets/overview/instagramLink.svg\";\nimport { Button } from 'phoenix-components';\nimport styles from \"./Instagram.module.css\";\n\nfunction Instagram() {\n  _s();\n\n  const history = useHistory();\n  const [openPopup, setOpenPopup] = useState(false);\n  const params = useQueryParams();\n\n  const syncCode = async code => {\n    try {\n      Loader.show();\n      EventManager.emitEvent('instagram_account_synced');\n      await Nikon.syncInstagramProfile(code, `${document.location.protocol}//${document.location.host}/instagram`);\n      setOpenPopup(true);\n    } catch (e) {\n      SnackBar.showError(e);\n      history.replace('/overview');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    if (params.has('code')) {\n      syncCode(params.get('code'));\n    }\n  }, [params.has('code')]);\n\n  const closeSyncPopup = () => {\n    setOpenPopup(false);\n    history.replace('/overview');\n  };\n\n  if (openPopup) {\n    return /*#__PURE__*/React.createElement(Dialog, {\n      open: true,\n      fullWidth: true,\n      onClose: closeSyncPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DialogContent, {\n      className: styles.gridContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.syncIcon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: instagramLinkIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.instaSyncHeading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, \"Yay! Your Instagram is successfully linked to your WINDO shop.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.instaSyncSubHeading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }, \"We'll notify you once your posts are imported.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.instaSyncBody,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, \"You can then convert your posts as products instantly. This might take upto 5 min to complete the import\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: styles.okButton,\n      onClick: closeSyncPopup,\n      label: \"OK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n  return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  });\n}\n\n_s(Instagram, \"wQqk+WVLBBg3J+Zehu9Z7toZLmg=\", false, function () {\n  return [useHistory, useQueryParams];\n});\n\n_c = Instagram;\nInstagram.propTypes = {};\nInstagram.defaultProps = {};\nexport default Instagram;\n\nvar _c;\n\n$RefreshReg$(_c, \"Instagram\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/Instagram.jsx"],"names":["React","useEffect","useState","Loading","Loader","EventManager","Nikon","SnackBar","useHistory","useQueryParams","Dialog","DialogContent","Button","styles","Instagram","history","openPopup","setOpenPopup","params","syncCode","code","show","emitEvent","syncInstagramProfile","document","location","protocol","host","e","showError","replace","hide","has","get","closeSyncPopup","gridContent","syncIcon","instagramLinkIcon","instaSyncHeading","instaSyncSubHeading","instaSyncBody","okButton","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Loading } from 'components/shared/Loading';\nimport Loader from 'services/loader';\nimport EventManager from 'utils/events';\nimport { Nikon } from 'api';\nimport SnackBar from 'services/snackbar';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParams } from 'hooks';\nimport { Dialog, DialogContent } from '@material-ui/core';\nimport instagramLinkIcon from 'assets/overview/instagramLink.svg';\nimport { Button } from 'phoenix-components';\nimport styles from './Instagram.module.css';\n\nfunction Instagram() {\n  const history = useHistory();\n  const [openPopup, setOpenPopup] = useState(false);\n  const params = useQueryParams();\n\n  const syncCode = async code => {\n    try {\n      Loader.show();\n      EventManager.emitEvent('instagram_account_synced');\n      await Nikon.syncInstagramProfile(code, `${document.location.protocol}//${document.location.host}/instagram`);\n      setOpenPopup(true);\n    } catch (e) {\n      SnackBar.showError(e);\n      history.replace('/overview');\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  useEffect(() => {\n    if (params.has('code')) {\n      syncCode(params.get('code'));\n    }\n  }, [params.has('code')]);\n\n  const closeSyncPopup = () => {\n    setOpenPopup(false);\n    history.replace('/overview');\n  };\n\n  if (openPopup) {\n    return (\n      <Dialog open={true} fullWidth onClose={closeSyncPopup}>\n        <DialogContent className={styles.gridContent}>\n          <div className={styles.syncIcon}>\n            <img src={instagramLinkIcon} alt=\"\" />\n          </div>\n          <div className={styles.instaSyncHeading}>\n            Yay! Your Instagram is successfully linked to your WINDO shop.\n          </div>\n          <div className={styles.instaSyncSubHeading}>\n            We'll notify you once your posts are imported.\n          </div>\n          <div className={styles.instaSyncBody}>\n            You can then convert your posts as products instantly.\n            This might take upto 5 min to complete the import\n          </div>\n          <div className=\"flexCenter\">\n            <Button\n              className={styles.okButton}\n              onClick={closeSyncPopup}\n              label=\"OK\"\n            />\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Loading />\n  );\n}\n\nInstagram.propTypes = {};\n\nInstagram.defaultProps = {};\n\nexport default Instagram;\n"]},"metadata":{},"sourceType":"module"}