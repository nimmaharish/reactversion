{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/customerCampaign/UserDetailsCard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport unchecked from \"../../assets/images/payments/unselect.svg\";\nimport checked from \"../../assets/v2/products/checked.svg\";\nimport CallLogo from \"../../assets/logos/call.svg\";\nimport CallDisLogo from \"../../assets/logos/callDis.svg\";\nimport MailLogo from \"../../assets/logos/mail.svg\";\nimport MailDisLogo from \"../../assets/logos/mailDis.svg\";\nimport MessageLogo from \"../../assets/logos/message.svg\";\nimport MessageDisLogo from \"../../assets/logos/messageDis.svg\";\nimport WhatsappLogo from \"../../assets/logos/whatsapp.svg\";\nimport WhatsappDisLogo from \"../../assets/logos/whatsappDis.svg\";\nimport { Clickable } from 'phoenix-components';\nimport { useToggle } from \"../../hooks/common\";\nimport Loader from \"../../services/loader\";\nimport Avatar from '@material-ui/core/Avatar';\nimport WebView from \"../../services/webview\";\nimport { useIsCustomerCampaignEnabled } from \"../../contexts/userContext\";\nimport Snackbar from \"../../services/snackbar\";\nimport { useOpenPlans } from \"../../contexts\";\nimport chevronTop from \"../../assets/v2/common/chevronGreyTop.svg\";\nimport chevronBottom from \"../../assets/v2/common/chevronGreyBottom.svg\";\nimport styles from \"./UserDetailsCard.module.css\";\n\nfunction UserDetailsCard({\n  details,\n  trackCheckedIds,\n  index,\n  getAddressReq\n}) {\n  _s();\n\n  const [po, setPo] = useToggle(false);\n  const [checkedId, setChecked] = useState(null);\n  const isCustomerCampaignEnabled = useIsCustomerCampaignEnabled();\n  const openPlans = useOpenPlans(false, 'generic', 'premium');\n  const [address, setAddress] = useState({\n    id: -1,\n    value: ''\n  });\n\n  const getAddress = async id => {\n    if (id === address.id) {\n      return;\n    }\n\n    try {\n      Loader.show();\n      const data = await getAddressReq(id);\n      const res = {\n        id,\n        value: data\n      };\n      setAddress(res);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const openField = () => {\n    if (!isCustomerCampaignEnabled) {\n      openPlans();\n      return;\n    }\n\n    setPo();\n  };\n\n  useEffect(() => {\n    if (po) {\n      getAddress(details.id);\n    }\n  }, [po]);\n\n  const handleChecks = id => {\n    if (checkedId === null) {\n      setChecked(true);\n    }\n\n    if (checkedId !== null) {\n      setChecked(null);\n    }\n\n    trackCheckedIds(id);\n  };\n\n  const getCheckStatus = () => {\n    if (checkedId === null) {\n      return false;\n    }\n\n    if (checkedId !== null) {\n      return true;\n    }\n  };\n\n  const open = url => {\n    if (!isCustomerCampaignEnabled) {\n      openPlans();\n      return;\n    }\n\n    if (WebView.isWebView()) {\n      WebView.openUrl(url);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n\n  const openWhatsapp = phone => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n\n    const url = `https://wa.me/${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  const openEmail = email => {\n    if (!email) {\n      Snackbar.show('email not available', 'error');\n      return;\n    }\n\n    const url = `mailto:${email}`;\n    open(url);\n  };\n\n  const openPhone = phone => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n\n    const url = `tel:${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  const openMsg = phone => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n\n    const url = `sms:${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  if (!details) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: styles.userDetailsTileCon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fullWidth flexBetween\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.con1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.profilePic,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, ((details === null || details === void 0 ? void 0 : details.name) || 'Guest').charAt(0))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.line1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, (details === null || details === void 0 ? void 0 : details.name) || 'Guest')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.con2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.checkedIcon, {\n      [styles.opacity]: !(details !== null && details !== void 0 && details.email)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: getCheckStatus() ? checked : unchecked,\n    alt: \"\",\n    onClick: () => {\n      if (details !== null && details !== void 0 && details.email) {\n        handleChecks(index);\n      } else {\n        Snackbar.show('email not available', 'error');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.threeDotsIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: po ? chevronTop : chevronBottom,\n    alt: \"\",\n    onClick: openField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  })))), po && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popover,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.head,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, \"Customer Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.aHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.aContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, address === null || address === void 0 ? void 0 : address.value)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fullWidth flexBetween\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.IconDiv, styles.NoBorder, {\n      [styles.opacity]: !(details !== null && details !== void 0 && details.email)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => {\n      openEmail(details === null || details === void 0 ? void 0 : details.email);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: !(details !== null && details !== void 0 && details.email) ? MailDisLogo : MailLogo,\n    alt: \"\",\n    className: styles.emailIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconTexts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"Email\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.IconDiv, {\n      [styles.opacity]: !(details !== null && details !== void 0 && details.phone)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => {\n      openMsg(details === null || details === void 0 ? void 0 : details.phone);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: !(details !== null && details !== void 0 && details.phone) ? MessageDisLogo : MessageLogo,\n    alt: \"\",\n    className: styles.msgIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconTexts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"Message\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.IconDiv, {\n      [styles.opacity]: !(details !== null && details !== void 0 && details.phone)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => {\n      openPhone(details === null || details === void 0 ? void 0 : details.phone);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: !(details !== null && details !== void 0 && details.phone) ? CallDisLogo : CallLogo,\n    alt: \"\",\n    className: styles.callIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconTexts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \"Call\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.IconDiv, {\n      [styles.opacity]: !(details !== null && details !== void 0 && details.phone)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: () => {\n      openWhatsapp(details === null || details === void 0 ? void 0 : details.phone);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: !(details !== null && details !== void 0 && details.phone) ? WhatsappDisLogo : WhatsappLogo,\n    alt: \"\",\n    className: styles.whatsappIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.iconTexts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"Whatsapp\"))))));\n}\n\n_s(UserDetailsCard, \"2T4SKacBs/Jb2FEhOqSz4lpJCq4=\", false, function () {\n  return [useToggle, useIsCustomerCampaignEnabled, useOpenPlans];\n});\n\n_c = UserDetailsCard;\nUserDetailsCard.propTypes = {\n  details: PropTypes.object.isRequired,\n  trackCheckedIds: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  getAddressReq: PropTypes.func.isRequired\n};\nexport default UserDetailsCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserDetailsCard\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/customerCampaign/UserDetailsCard.jsx"],"names":["React","useEffect","useState","PropTypes","cx","Clickable","useToggle","Loader","Avatar","WebView","useIsCustomerCampaignEnabled","Snackbar","useOpenPlans","styles","UserDetailsCard","details","trackCheckedIds","index","getAddressReq","po","setPo","checkedId","setChecked","isCustomerCampaignEnabled","openPlans","address","setAddress","id","value","getAddress","show","data","res","hide","openField","handleChecks","getCheckStatus","open","url","isWebView","openUrl","window","openWhatsapp","phone","replace","openEmail","email","openPhone","openMsg","userDetailsTileCon","con1","profilePic","name","charAt","line1","con2","checkedIcon","opacity","checked","unchecked","threeDotsIcon","chevronTop","chevronBottom","popover","head","aHead","aContent","IconDiv","NoBorder","MailDisLogo","MailLogo","emailIcon","iconTexts","MessageDisLogo","MessageLogo","msgIcon","CallDisLogo","CallLogo","callIcon","WhatsappDisLogo","WhatsappLogo","whatsappIcon","propTypes","object","isRequired","number","func"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,EAAP,MAAe,YAAf;;;;;;;;;;;AAWA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,SAAT;AACA,OAAOC,MAAP;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP;AACA,SACEC,4BADF;AAGA,OAAOC,QAAP;AACA,SAASC,YAAT;;;AAGA,OAAOC,MAAP;;AAEA,SAASC,eAAT,CAAyB;AACvBC,EAAAA,OADuB;AACdC,EAAAA,eADc;AACGC,EAAAA,KADH;AACUC,EAAAA;AADV,CAAzB,EAEG;AAAA;;AACD,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcd,SAAS,CAAC,KAAD,CAA7B;AACA,QAAM,CAACe,SAAD,EAAYC,UAAZ,IAA0BpB,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAMqB,yBAAyB,GAAGb,4BAA4B,EAA9D;AACA,QAAMc,SAAS,GAAGZ,YAAY,CAAC,KAAD,EAAQ,SAAR,EAAmB,SAAnB,CAA9B;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBxB,QAAQ,CAAC;AAAEyB,IAAAA,EAAE,EAAE,CAAC,CAAP;AAAUC,IAAAA,KAAK,EAAE;AAAjB,GAAD,CAAtC;;AAEA,QAAMC,UAAU,GAAG,MAAOF,EAAP,IAAc;AAC/B,QAAIA,EAAE,KAAKF,OAAO,CAACE,EAAnB,EAAuB;AACrB;AACD;;AACD,QAAI;AACFpB,MAAAA,MAAM,CAACuB,IAAP;AACA,YAAMC,IAAI,GAAG,MAAMb,aAAa,CAACS,EAAD,CAAhC;AACA,YAAMK,GAAG,GAAG;AAAEL,QAAAA,EAAF;AAAMC,QAAAA,KAAK,EAAEG;AAAb,OAAZ;AACAL,MAAAA,UAAU,CAACM,GAAD,CAAV;AACD,KALD,SAKU;AACRzB,MAAAA,MAAM,CAAC0B,IAAP;AACD;AACF,GAZD;;AAcA,QAAMC,SAAS,GAAG,MAAM;AACtB,QAAI,CAACX,yBAAL,EAAgC;AAC9BC,MAAAA,SAAS;AACT;AACD;;AACDJ,IAAAA,KAAK;AACN,GAND;;AAQAnB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIkB,EAAJ,EAAQ;AACNU,MAAAA,UAAU,CAACd,OAAO,CAACY,EAAT,CAAV;AACD;AACF,GAJQ,EAIN,CAACR,EAAD,CAJM,CAAT;;AAMA,QAAMgB,YAAY,GAAIR,EAAD,IAAQ;AAC3B,QAAIN,SAAS,KAAK,IAAlB,EAAwB;AACtBC,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AACD,QAAID,SAAS,KAAK,IAAlB,EAAwB;AACtBC,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AACDN,IAAAA,eAAe,CAACW,EAAD,CAAf;AACD,GARD;;AAUA,QAAMS,cAAc,GAAG,MAAM;AAC3B,QAAIf,SAAS,KAAK,IAAlB,EAAwB;AACtB,aAAO,KAAP;AACD;;AACD,QAAIA,SAAS,KAAK,IAAlB,EAAwB;AACtB,aAAO,IAAP;AACD;AACF,GAPD;;AASA,QAAMgB,IAAI,GAAIC,GAAD,IAAS;AACpB,QAAI,CAACf,yBAAL,EAAgC;AAC9BC,MAAAA,SAAS;AACT;AACD;;AACD,QAAIf,OAAO,CAAC8B,SAAR,EAAJ,EAAyB;AACvB9B,MAAAA,OAAO,CAAC+B,OAAR,CAAgBF,GAAhB;AACD,KAFD,MAEO;AACLG,MAAAA,MAAM,CAACJ,IAAP,CAAYC,GAAZ,EAAiB,QAAjB;AACD;AACF,GAVD;;AAYA,QAAMI,YAAY,GAAIC,KAAD,IAAW;AAC9B,QAAI,CAACA,KAAL,EAAY;AACVhC,MAAAA,QAAQ,CAACmB,IAAT,CAAc,qBAAd,EAAqC,OAArC;AACA;AACD;;AACD,UAAMQ,GAAG,GAAI,iBAAgBK,KAAK,CAACC,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAyB,EAAtD;AACAP,IAAAA,IAAI,CAACC,GAAD,CAAJ;AACD,GAPD;;AASA,QAAMO,SAAS,GAAIC,KAAD,IAAW;AAC3B,QAAI,CAACA,KAAL,EAAY;AACVnC,MAAAA,QAAQ,CAACmB,IAAT,CAAc,qBAAd,EAAqC,OAArC;AACA;AACD;;AACD,UAAMQ,GAAG,GAAI,UAASQ,KAAM,EAA5B;AACAT,IAAAA,IAAI,CAACC,GAAD,CAAJ;AACD,GAPD;;AASA,QAAMS,SAAS,GAAIJ,KAAD,IAAW;AAC3B,QAAI,CAACA,KAAL,EAAY;AACVhC,MAAAA,QAAQ,CAACmB,IAAT,CAAc,qBAAd,EAAqC,OAArC;AACA;AACD;;AACD,UAAMQ,GAAG,GAAI,OAAMK,KAAK,CAACC,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAyB,EAA5C;AACAP,IAAAA,IAAI,CAACC,GAAD,CAAJ;AACD,GAPD;;AASA,QAAMU,OAAO,GAAIL,KAAD,IAAW;AACzB,QAAI,CAACA,KAAL,EAAY;AACVhC,MAAAA,QAAQ,CAACmB,IAAT,CAAc,qBAAd,EAAqC,OAArC;AACA;AACD;;AACD,UAAMQ,GAAG,GAAI,OAAMK,KAAK,CAACC,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAyB,EAA5C;AACAP,IAAAA,IAAI,CAACC,GAAD,CAAJ;AACD,GAPD;;AASA,MAAI,CAACvB,OAAL,EAAc;AACZ,WAAO,IAAP;AACD;;AAED,sBACE;AAAK,IAAA,GAAG,EAAEE,KAAV;AAAiB,IAAA,SAAS,EAAEJ,MAAM,CAACoC,kBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEpC,MAAM,CAACqC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAErC,MAAM,CAACsC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAS,CAAC,CAAApC,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEqC,IAAT,KAAiB,OAAlB,EAA2BC,MAA3B,CAAkC,CAAlC,CAAT,CADF,CADF,eAIE;AACE,IAAA,SAAS,EAAEjD,EAAE,CAACS,MAAM,CAACyC,KAAR,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEG,CAAAvC,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEqC,IAAT,KAAiB,OAFpB,CAJF,CADF,eAUE;AAAK,IAAA,SAAS,EAAEvC,MAAM,CAAC0C,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAEnD,EAAE,CAACS,MAAM,CAAC2C,WAAR,EAAqB;AAAE,OAAC3C,MAAM,CAAC4C,OAAR,GAAkB,EAAC1C,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE+B,KAAV;AAApB,KAArB,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE;AACE,IAAA,GAAG,EAAEV,cAAc,KAAKsB,OAAL,GAAeC,SADpC;AAEE,IAAA,GAAG,EAAC,EAFN;AAGE,IAAA,OAAO,EAAE,MAAM;AACb,UAAI5C,OAAJ,aAAIA,OAAJ,eAAIA,OAAO,CAAE+B,KAAb,EAAoB;AAClBX,QAAAA,YAAY,CAAClB,KAAD,CAAZ;AACD,OAFD,MAEO;AACLN,QAAAA,QAAQ,CAACmB,IAAT,CAAc,qBAAd,EAAqC,OAArC;AACD;AACF,KATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,eAgBE;AAAK,IAAA,SAAS,EAAEjB,MAAM,CAAC+C,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,GAAG,EAAEzC,EAAE,GAAG0C,UAAH,GAAgBC,aADzB;AAEE,IAAA,GAAG,EAAC,EAFN;AAGE,IAAA,OAAO,EAAE5B,SAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhBF,CAVF,CADF,EAoCGf,EAAE,iBACD;AAAK,IAAA,SAAS,EAAEN,MAAM,CAACkD,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAElD,MAAM,CAACmD,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEnD,MAAM,CAACoD,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAK,IAAA,SAAS,EAAEpD,MAAM,CAACqD,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGzC,OADH,aACGA,OADH,uBACGA,OAAO,CAAEG,KADZ,CAFF,CAJF,eAUE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAExB,EAAE,CAACS,MAAM,CAACsD,OAAR,EAAiBtD,MAAM,CAACuD,QAAxB,EAAkC;AAAE,OAACvD,MAAM,CAAC4C,OAAR,GAAkB,EAAC1C,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE+B,KAAV;AAApB,KAAlC,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,SAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbD,MAAAA,SAAS,CAAC9B,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAE+B,KAAV,CAAT;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AAAK,IAAA,GAAG,EAAE,EAAC/B,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE+B,KAAV,IAAkBuB,WAAlB,GAAgCC,QAA1C;AAAoD,IAAA,GAAG,EAAC,EAAxD;AAA2D,IAAA,SAAS,EAAEzD,MAAM,CAAC0D,SAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAME;AAAK,IAAA,SAAS,EAAE1D,MAAM,CAAC2D,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aANF,CAFF,CADF,eAYE;AACE,IAAA,SAAS,EAAEpE,EAAE,CAACS,MAAM,CAACsD,OAAR,EAAiB;AAAE,OAACtD,MAAM,CAAC4C,OAAR,GAAkB,EAAC1C,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV;AAApB,KAAjB,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,SAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbK,MAAAA,OAAO,CAACjC,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAE4B,KAAV,CAAP;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAK,IAAA,GAAG,EAAE,EAAC5B,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV,IAAkB8B,cAAlB,GAAmCC,WAA7C;AAA0D,IAAA,GAAG,EAAC,EAA9D;AAAiE,IAAA,SAAS,EAAE7D,MAAM,CAAC8D,OAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE;AAAK,IAAA,SAAS,EAAE9D,MAAM,CAAC2D,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALF,CAFF,CAZF,eAsBE;AACE,IAAA,SAAS,EAAEpE,EAAE,CAACS,MAAM,CAACsD,OAAR,EAAiB;AAAE,OAACtD,MAAM,CAAC4C,OAAR,GAAkB,EAAC1C,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV;AAApB,KAAjB,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,SAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbI,MAAAA,SAAS,CAAChC,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAE4B,KAAV,CAAT;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAK,IAAA,GAAG,EAAE,EAAC5B,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV,IAAkBiC,WAAlB,GAAgCC,QAA1C;AAAoD,IAAA,GAAG,EAAC,EAAxD;AAA2D,IAAA,SAAS,EAAEhE,MAAM,CAACiE,QAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE;AAAK,IAAA,SAAS,EAAEjE,MAAM,CAAC2D,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,CAFF,CAtBF,eAgCE;AACE,IAAA,SAAS,EAAEpE,EAAE,CAACS,MAAM,CAACsD,OAAR,EAAiB;AAAE,OAACtD,MAAM,CAAC4C,OAAR,GAAkB,EAAC1C,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV;AAApB,KAAjB,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE,oBAAC,SAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbD,MAAAA,YAAY,CAAC3B,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAE4B,KAAV,CAAZ;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAK,IAAA,GAAG,EAAE,EAAC5B,OAAD,aAACA,OAAD,eAACA,OAAO,CAAE4B,KAAV,IAAkBoC,eAAlB,GAAoCC,YAA9C;AAA4D,IAAA,GAAG,EAAC,EAAhE;AAAmE,IAAA,SAAS,EAAEnE,MAAM,CAACoE,YAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE;AAAK,IAAA,SAAS,EAAEpE,MAAM,CAAC2D,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,CAHF,CAhCF,CAVF,CArCJ,CADF;AAgGD;;GA5MQ1D,e;UAGaR,S,EAEcI,4B,EAChBE,Y;;;KANXE,e;AA8MTA,eAAe,CAACoE,SAAhB,GAA4B;AAC1BnE,EAAAA,OAAO,EAAEZ,SAAS,CAACgF,MAAV,CAAiBC,UADA;AAE1BpE,EAAAA,eAAe,EAAEb,SAAS,CAACgF,MAAV,CAAiBC,UAFR;AAG1BnE,EAAAA,KAAK,EAAEd,SAAS,CAACkF,MAAV,CAAiBD,UAHE;AAI1BlE,EAAAA,aAAa,EAAEf,SAAS,CAACmF,IAAV,CAAeF;AAJJ,CAA5B;AAOA,eAAetE,eAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport unchecked from 'assets/images/payments/unselect.svg';\nimport checked from 'assets/v2/products/checked.svg';\nimport CallLogo from 'assets/logos/call.svg';\nimport CallDisLogo from 'assets/logos/callDis.svg';\nimport MailLogo from 'assets/logos/mail.svg';\nimport MailDisLogo from 'assets/logos/mailDis.svg';\nimport MessageLogo from 'assets/logos/message.svg';\nimport MessageDisLogo from 'assets/logos/messageDis.svg';\nimport WhatsappLogo from 'assets/logos/whatsapp.svg';\nimport WhatsappDisLogo from 'assets/logos/whatsappDis.svg';\nimport { Clickable } from 'phoenix-components';\nimport { useToggle } from 'hooks/common';\nimport Loader from 'services/loader';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebView from 'services/webview';\nimport {\n  useIsCustomerCampaignEnabled,\n} from 'contexts/userContext';\nimport Snackbar from 'services/snackbar';\nimport { useOpenPlans } from 'contexts';\nimport chevronTop from 'assets/v2/common/chevronGreyTop.svg';\nimport chevronBottom from 'assets/v2/common/chevronGreyBottom.svg';\nimport styles from './UserDetailsCard.module.css';\n\nfunction UserDetailsCard({\n  details, trackCheckedIds, index, getAddressReq\n}) {\n  const [po, setPo] = useToggle(false);\n  const [checkedId, setChecked] = useState(null);\n  const isCustomerCampaignEnabled = useIsCustomerCampaignEnabled();\n  const openPlans = useOpenPlans(false, 'generic', 'premium');\n  const [address, setAddress] = useState({ id: -1, value: '' });\n\n  const getAddress = async (id) => {\n    if (id === address.id) {\n      return;\n    }\n    try {\n      Loader.show();\n      const data = await getAddressReq(id);\n      const res = { id, value: data };\n      setAddress(res);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const openField = () => {\n    if (!isCustomerCampaignEnabled) {\n      openPlans();\n      return;\n    }\n    setPo();\n  };\n\n  useEffect(() => {\n    if (po) {\n      getAddress(details.id);\n    }\n  }, [po]);\n\n  const handleChecks = (id) => {\n    if (checkedId === null) {\n      setChecked(true);\n    }\n    if (checkedId !== null) {\n      setChecked(null);\n    }\n    trackCheckedIds(id);\n  };\n\n  const getCheckStatus = () => {\n    if (checkedId === null) {\n      return false;\n    }\n    if (checkedId !== null) {\n      return true;\n    }\n  };\n\n  const open = (url) => {\n    if (!isCustomerCampaignEnabled) {\n      openPlans();\n      return;\n    }\n    if (WebView.isWebView()) {\n      WebView.openUrl(url);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n\n  const openWhatsapp = (phone) => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n    const url = `https://wa.me/${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  const openEmail = (email) => {\n    if (!email) {\n      Snackbar.show('email not available', 'error');\n      return;\n    }\n    const url = `mailto:${email}`;\n    open(url);\n  };\n\n  const openPhone = (phone) => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n    const url = `tel:${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  const openMsg = (phone) => {\n    if (!phone) {\n      Snackbar.show('phone not available', 'error');\n      return;\n    }\n    const url = `sms:${phone.replace(/\\s/g, '')}`;\n    open(url);\n  };\n\n  if (!details) {\n    return null;\n  }\n\n  return (\n    <div key={index} className={styles.userDetailsTileCon}>\n      <div className=\"fullWidth flexBetween\">\n        <div className={styles.con1}>\n          <div className={styles.profilePic}>\n            <Avatar>{(details?.name || 'Guest').charAt(0)}</Avatar>\n          </div>\n          <div\n            className={cx(styles.line1)}>\n            {details?.name || 'Guest'}\n          </div>\n        </div>\n        <div className={styles.con2}>\n          <div\n            className={cx(styles.checkedIcon, { [styles.opacity]: !details?.email })}\n          >\n            <img\n              src={getCheckStatus() ? checked : unchecked}\n              alt=\"\"\n              onClick={() => {\n                if (details?.email) {\n                  handleChecks(index);\n                } else {\n                  Snackbar.show('email not available', 'error');\n                }\n              }}\n            />\n          </div>\n          <div className={styles.threeDotsIcon}>\n            <img\n              src={po ? chevronTop : chevronBottom}\n              alt=\"\"\n              onClick={openField}\n            />\n          </div>\n        </div>\n      </div>\n      {po && (\n        <div className={styles.popover}>\n          <div className={styles.head}>\n            Customer Details\n          </div>\n          <div>\n            <div className={styles.aHead}>Address</div>\n            <div className={styles.aContent}>\n              {address?.value}\n            </div>\n          </div>\n          <div className=\"fullWidth flexBetween\">\n            <div\n              className={cx(styles.IconDiv, styles.NoBorder, { [styles.opacity]: !details?.email })}>\n              <Clickable\n                onClick={() => {\n                  openEmail(details?.email);\n                }}\n              >\n                <img src={!details?.email ? MailDisLogo : MailLogo} alt=\"\" className={styles.emailIcon} />\n                <div className={styles.iconTexts}>Email</div>\n              </Clickable>\n            </div>\n            <div\n              className={cx(styles.IconDiv, { [styles.opacity]: !details?.phone })}>\n              <Clickable\n                onClick={() => {\n                  openMsg(details?.phone);\n                }}>\n                <img src={!details?.phone ? MessageDisLogo : MessageLogo} alt=\"\" className={styles.msgIcon} />\n                <div className={styles.iconTexts}>Message</div>\n              </Clickable>\n            </div>\n            <div\n              className={cx(styles.IconDiv, { [styles.opacity]: !details?.phone })}>\n              <Clickable\n                onClick={() => {\n                  openPhone(details?.phone);\n                }}>\n                <img src={!details?.phone ? CallDisLogo : CallLogo} alt=\"\" className={styles.callIcon} />\n                <div className={styles.iconTexts}>Call</div>\n              </Clickable>\n            </div>\n            <div\n              className={cx(styles.IconDiv, { [styles.opacity]: !details?.phone })}\n            >\n              <Clickable\n                onClick={() => {\n                  openWhatsapp(details?.phone);\n                }}>\n                <img src={!details?.phone ? WhatsappDisLogo : WhatsappLogo} alt=\"\" className={styles.whatsappIcon} />\n                <div className={styles.iconTexts}>Whatsapp</div>\n              </Clickable>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nUserDetailsCard.propTypes = {\n  details: PropTypes.object.isRequired,\n  trackCheckedIds: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  getAddressReq: PropTypes.func.isRequired\n};\n\nexport default UserDetailsCard;\n"]},"metadata":{},"sourceType":"module"}