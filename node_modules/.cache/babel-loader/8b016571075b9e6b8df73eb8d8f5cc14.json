{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/OrderDetail.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { isOnlyPending, useEnableMarkAsPaid, useIsCod, useOrder, usePendingOrders, useRefresh, useSetIds, useEnableCustomization, useEnableAccept } from \"../../contexts/orderContext\";\nimport Multi from \"../../containers/orders/Multi/View\";\nimport checkedIcon from \"../../assets/images/orders/multi/check.svg\";\nimport unCheckedIcon from \"../../assets/images/orders/multi/uncheck.svg\";\nimport { OrderCard } from \"./multi/OrderCard\";\nimport { SettlementAndShippingDetails } from \"./SettlementAndShippingDetails\";\nimport { CustomizationForm } from \"./CustomizationForm\"; // import { CustomizationFormForDesktop } from 'components/orders/CustomizationFormForDesktop';\n\nimport { PriceDetails } from \"./PriceDetails\";\nimport closeIcon from \"../../assets/images/orders/list/close.svg\";\nimport cx from 'classnames';\nimport { Button } from 'phoenix-components';\nimport SnackBar from \"../../services/snackbar\";\nimport { Factory } from \"../../api\";\nimport Loader from \"../../services/loader\";\nimport { useToggle } from \"../../hooks/common\";\nimport { useShop } from \"../../contexts/userContext\";\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport { useDesktop } from \"../../contexts\";\nimport { Tabs } from 'phoenix-components/lib/containers';\nimport { Clickable } from 'phoenix-components';\nimport styles from \"./OrderDetail.module.css\";\nimport { CenterButton } from \"./CenterButton\";\nimport { OrderFrom } from \"./OrderFrom\";\nimport { CustomerDetails } from \"./CustomerDetails\";\nexport function OrderDetail() {\n  _s();\n\n  const order = useOrder();\n  const shop = useShop();\n  const [openCodAlert, toggleCodAlert] = useToggle(false);\n  const refreshOrder = useRefresh();\n  const isPendingOnly = isOnlyPending();\n  const pendingOrders = isPendingOnly ? usePendingOrders() : [];\n  const [checkedPenOrders, setCheckedPenOrders] = useState([]);\n  const [enable, setEnable] = useToggle(false);\n  const setIds = useSetIds();\n  const enableMarkAsPaid = useEnableMarkAsPaid();\n  const enableConfirm = useEnableAccept();\n  const enableCustomization = useEnableCustomization();\n  const isCod = useIsCod();\n  const isDesktop = useDesktop();\n  const [tabValue, setTabValue] = useState('Products');\n\n  const markPayment = async () => {\n    Loader.show();\n    toggleCodAlert();\n\n    try {\n      await Factory.markAsPaid(order._id);\n      refreshOrder();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const HeaderList = [{\n    label: 'Products',\n    value: 'Products',\n    id: 1\n  }, {\n    label: 'Payment Settlement',\n    value: 'Payment Settlement',\n    id: 2\n  }, {\n    label: 'Customer Details',\n    value: 'Customer Details',\n    id: 3\n  }];\n\n  const isCheckedPen = id => checkedPenOrders.includes(id);\n\n  const updatePenSelections = id => {\n    if (isCheckedPen(id)) {\n      setCheckedPenOrders(checkedPenOrders.filter(x => x !== id));\n      setIds(checkedPenOrders.filter(x => x !== id));\n      return;\n    }\n\n    setCheckedPenOrders(checkedPenOrders.concat(id));\n    setIds(checkedPenOrders.concat(id));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(OrderFrom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }), isDesktop ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    items: HeaderList,\n    onChange: e => {\n      const tab = HeaderList.find(x => x.label === e);\n      const container = document.getElementById(`scroll${tab.id}`);\n      window.scrollTo({\n        top: container.getBoundingClientRect().top,\n        behavior: 'smooth'\n      });\n      setTabValue(e);\n    },\n    className: styles.tabHeader,\n    value: tabValue,\n    size: \"small\",\n    separator: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  })) : null, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"scroll1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }), isPendingOnly && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.desktopOrders,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, ' ', \"Products\", /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.nesHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, `(${pendingOrders.length} items)`)), pendingOrders.map((x, i) => /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.flex, {\n      [styles.noBorder]: i === pendingOrders.length - 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.checkBox,\n    onClick: () => updatePenSelections(x._id),\n    src: isCheckedPen(x._id) ? checkedIcon : unCheckedIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(OrderCard, {\n    order: x,\n    type: \"pending\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }))))), !isPendingOnly && /*#__PURE__*/React.createElement(Multi, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 26\n    }\n  }), isDesktop && enableCustomization && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"Have\", /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.green,\n    onClick: setEnable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, \"Customization Charges?\")), /*#__PURE__*/React.createElement(PriceDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }), enableMarkAsPaid && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paidButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    label: \"Mark as paid\",\n    onClick: toggleCodAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"scroll2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), !isCod && /*#__PURE__*/React.createElement(SettlementAndShippingDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"scroll3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomerDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }), !isDesktop && enableCustomization && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, \"Have\", /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.green,\n    onClick: setEnable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, \"Customization Charges?\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '150px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }), (enableCustomization || enableConfirm) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, enable && enableCustomization && /*#__PURE__*/React.createElement(CustomizationForm, {\n    onBack: setEnable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 45\n    }\n  }), isPendingOnly && order.status !== 'cancelled' && !enable && /*#__PURE__*/React.createElement(CenterButton, {\n    groupId: order.groupId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 72\n    }\n  })), openCodAlert && /*#__PURE__*/React.createElement(Dialog, {\n    open: true,\n    onClose: toggleCodAlert,\n    maxWidth: isDesktop ? 'xs' : 'md',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexEnd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: toggleCodAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: closeIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.codHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, \"A little birdie tells us you've received your payment.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.codAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, shop.currency, ' ', (order.codBalance || order.customPaymentBalance).toFixed(2))), /*#__PURE__*/React.createElement(DialogActions, {\n    className: styles.codActButtons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    label: \"No\",\n    onClick: toggleCodAlert,\n    primary: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Yes\",\n    onClick: markPayment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }))));\n}\n\n_s(OrderDetail, \"U6A8cgIb7DyOitRwFVVr5qAEq0U=\", false, function () {\n  return [useOrder, useShop, useToggle, useRefresh, usePendingOrders, useToggle, useSetIds, useEnableMarkAsPaid, useEnableAccept, useEnableCustomization, useIsCod, useDesktop];\n});\n\n_c = OrderDetail;\nOrderDetail.propTypes = {};\nOrderDetail.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetail\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/OrderDetail.jsx"],"names":["React","useState","isOnlyPending","useEnableMarkAsPaid","useIsCod","useOrder","usePendingOrders","useRefresh","useSetIds","useEnableCustomization","useEnableAccept","Multi","OrderCard","SettlementAndShippingDetails","CustomizationForm","PriceDetails","cx","Button","SnackBar","Factory","Loader","useToggle","useShop","Dialog","DialogActions","DialogContent","useDesktop","Tabs","Clickable","styles","CenterButton","OrderFrom","CustomerDetails","OrderDetail","order","shop","openCodAlert","toggleCodAlert","refreshOrder","isPendingOnly","pendingOrders","checkedPenOrders","setCheckedPenOrders","enable","setEnable","setIds","enableMarkAsPaid","enableConfirm","enableCustomization","isCod","isDesktop","tabValue","setTabValue","markPayment","show","markAsPaid","_id","e","showError","hide","HeaderList","label","value","id","isCheckedPen","includes","updatePenSelections","filter","x","concat","container","tab","find","document","getElementById","window","scrollTo","top","getBoundingClientRect","behavior","tabHeader","desktopOrders","header","nesHeader","length","map","i","flex","noBorder","checkBox","checkedIcon","unCheckedIcon","title","green","paidButton","height","footer","status","groupId","closeIcon","codHeading","codAmount","currency","codBalance","customPaymentBalance","toFixed","codActButtons","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  isOnlyPending,\n  useEnableMarkAsPaid, useIsCod,\n  useOrder,\n  usePendingOrders,\n  useRefresh,\n  useSetIds,\n  useEnableCustomization,\n  useEnableAccept\n} from 'contexts/orderContext';\nimport Multi from 'containers/orders/Multi/View';\nimport checkedIcon from 'assets/images/orders/multi/check.svg';\nimport unCheckedIcon from 'assets/images/orders/multi/uncheck.svg';\nimport { OrderCard } from 'components/orders/multi/OrderCard';\nimport { SettlementAndShippingDetails } from 'components/orders/SettlementAndShippingDetails';\nimport { CustomizationForm } from 'components/orders/CustomizationForm';\n// import { CustomizationFormForDesktop } from 'components/orders/CustomizationFormForDesktop';\nimport { PriceDetails } from 'components/orders/PriceDetails';\nimport closeIcon from 'assets/images/orders/list/close.svg';\nimport cx from 'classnames';\nimport { Button } from 'phoenix-components';\nimport SnackBar from 'services/snackbar';\nimport { Factory } from 'api';\nimport Loader from 'services/loader';\nimport { useToggle } from 'hooks/common';\nimport { useShop } from 'contexts/userContext';\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport { useDesktop } from 'contexts';\nimport { Tabs } from 'phoenix-components/lib/containers';\nimport { Clickable } from 'phoenix-components';\nimport styles from './OrderDetail.module.css';\nimport { CenterButton } from './CenterButton';\nimport { OrderFrom } from './OrderFrom';\nimport { CustomerDetails } from './CustomerDetails';\n\nexport function OrderDetail() {\n  const order = useOrder();\n  const shop = useShop();\n  const [openCodAlert, toggleCodAlert] = useToggle(false);\n  const refreshOrder = useRefresh();\n  const isPendingOnly = isOnlyPending();\n  const pendingOrders = isPendingOnly ? usePendingOrders() : [];\n  const [checkedPenOrders, setCheckedPenOrders] = useState([]);\n\n  const [enable, setEnable] = useToggle(false);\n\n  const setIds = useSetIds();\n  const enableMarkAsPaid = useEnableMarkAsPaid();\n  const enableConfirm = useEnableAccept();\n  const enableCustomization = useEnableCustomization();\n  const isCod = useIsCod();\n  const isDesktop = useDesktop();\n  const [tabValue, setTabValue] = useState('Products');\n\n  const markPayment = async () => {\n    Loader.show();\n    toggleCodAlert();\n    try {\n      await Factory.markAsPaid(order._id);\n      refreshOrder();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const HeaderList = [\n    {\n      label: 'Products',\n      value: 'Products',\n      id: 1\n    },\n    {\n      label: 'Payment Settlement',\n      value: 'Payment Settlement',\n      id: 2\n    },\n    {\n      label: 'Customer Details',\n      value: 'Customer Details',\n      id: 3\n    },\n  ];\n\n  const isCheckedPen = (id) => checkedPenOrders.includes(id);\n\n  const updatePenSelections = (id) => {\n    if (isCheckedPen(id)) {\n      setCheckedPenOrders(checkedPenOrders.filter(x => x !== id));\n      setIds(checkedPenOrders.filter(x => x !== id));\n      return;\n    }\n    setCheckedPenOrders(checkedPenOrders.concat(id));\n    setIds(checkedPenOrders.concat(id));\n  };\n\n  return (\n    <div className={styles.container}>\n      <OrderFrom />\n      {isDesktop ? (\n        <div className={styles.tab}>\n          <Tabs\n            items={HeaderList}\n            onChange={(e) => {\n              const tab = HeaderList.find(x => x.label === e);\n              const container = document.getElementById(`scroll${tab.id}`);\n              window.scrollTo({\n                top: container.getBoundingClientRect().top,\n                behavior: 'smooth'\n              });\n              setTabValue(e);\n            }}\n            className={styles.tabHeader}\n            value={tabValue}\n            size=\"small\"\n            separator={true}\n          />\n        </div>\n      ) : null}\n      <div id=\"scroll1\"></div>\n      {isPendingOnly && (\n        <div className={styles.desktopOrders}>\n          <div className={styles.header}>\n            {' '}\n            Products\n            <span className={styles.nesHeader}>{`(${pendingOrders.length} items)`}</span>\n          </div>\n          {pendingOrders.map((x, i) => (\n            <div className={cx(styles.flex, { [styles.noBorder]: i === pendingOrders.length - 1 })}>\n              <img\n                className={styles.checkBox}\n                onClick={() => updatePenSelections(x._id)}\n                src={isCheckedPen(x._id) ? checkedIcon : unCheckedIcon}\n                alt=\"\"\n              />\n              <div>\n                <OrderCard order={x} type=\"pending\" />\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      {!isPendingOnly && <Multi />}\n      {isDesktop && enableCustomization && (\n        <div className={styles.title}>\n          Have\n          <Clickable className={styles.green} onClick={setEnable}>\n            Customization Charges?\n          </Clickable>\n        </div>\n      )}\n      <PriceDetails />\n      {enableMarkAsPaid && (\n        <div className={styles.paidButton}>\n          <Button\n            size=\"small\"\n            label=\"Mark as paid\"\n            onClick={toggleCodAlert}\n          />\n        </div>\n      )}\n      <div id=\"scroll2\"></div>\n      {!isCod && <SettlementAndShippingDetails />}\n      <div id=\"scroll3\"></div>\n      <CustomerDetails />\n      {!isDesktop && enableCustomization && (\n        <div className={styles.title}>\n          Have\n          <Clickable className={styles.green} onClick={setEnable}>\n            Customization Charges?\n          </Clickable>\n        </div>\n      )}\n      <div style={{ height: '150px' }} />\n      {(enableCustomization || enableConfirm) && (\n        <div className={styles.footer}>\n          {enable && enableCustomization && <CustomizationForm onBack={setEnable} />}\n          {isPendingOnly && order.status !== 'cancelled' && !enable && <CenterButton groupId={order.groupId} />}\n        </div>\n      )}\n      {openCodAlert && (\n        <Dialog\n          open={true}\n          onClose={toggleCodAlert}\n          maxWidth={isDesktop ? 'xs' : 'md'}\n        >\n          <DialogContent>\n            {isDesktop && (\n              <div className=\"flexEnd\">\n                <Clickable\n                  onClick={toggleCodAlert}>\n                  <img src={closeIcon} alt=\"\" />\n                </Clickable>\n              </div>\n            )}\n            <div className={styles.codHeading}>A little birdie tells us you've received your payment.</div>\n            <div className={styles.codAmount}>\n              {shop.currency}\n              {' '}\n              {(order.codBalance || order.customPaymentBalance).toFixed(2)}\n            </div>\n          </DialogContent>\n          <DialogActions className={styles.codActButtons}>\n            <Button\n              label=\"No\"\n              onClick={toggleCodAlert}\n              primary={false}\n            />\n            <Button\n              label=\"Yes\"\n              onClick={markPayment}\n            />\n          </DialogActions>\n        </Dialog>\n      )}\n    </div>\n  );\n}\n\nOrderDetail.propTypes = {};\n\nOrderDetail.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}