{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/wallet/WalletLog.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { InfiniteLoader, List } from 'react-virtualized';\nimport { useWalletLogs } from \"../../hooks/wallet\";\nimport { Loading } from \"../../components/shared/Loading\";\nimport PropTypes from 'prop-types';\nimport { getText, customDateFilters } from \"../utils\";\nimport { Picker } from \"../../components/shared/dateRangePicker/Picker\";\nimport { WalletBlock } from \"../../components/wallet/WalletBlock\";\nimport { useQueryParams } from \"../../hooks\";\nimport noCreditsIcon from \"../../assets/images/settlement/illustration.svg\";\nimport noCashIcon from \"../../assets/images/settlement/noCash.svg\";\nimport { StatusSelectionBar } from \"../../components/shared/StatusSelectionBar\";\nimport { useHistory } from 'react-router-dom';\nimport { useDesktop } from \"../../contexts\";\nimport { windoCashStates, windoCreditStates, FilterMap } from \"../payments/utils\";\nimport styles from \"./WalletLog.module.css\";\nexport function WalletLog({\n  top,\n  type\n}) {\n  _s();\n\n  var _top$current, _top$current$getBound;\n\n  const params = useQueryParams();\n  const step = type !== 'credits' ? 'all' : 'rewards';\n  const state = params.get('state') || step;\n  const history = useHistory();\n  const [dateRangeFilters, setDateRangeFilters] = useState({\n    from: null,\n    to: null\n  });\n  const isEmptyFrom = (dateRangeFilters === null || dateRangeFilters === void 0 ? void 0 : dateRangeFilters.from) == null;\n  const isEmptyTo = !!dateRangeFilters.to === null;\n  const isDesktop = useDesktop();\n\n  const getStates = () => {\n    if (type === 'credits') {\n      return windoCreditStates;\n    }\n\n    return windoCashStates;\n  };\n\n  const onStateChange = val => {\n    params.set('state', val);\n    history.replace({\n      search: params.toString()\n    });\n  };\n\n  const dateTimeFilters = () => {\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const [logs, loadMore, hasMore, loading, refresh] = useWalletLogs({ ...dateTimeFilters(),\n    ...(FilterMap[state] || FilterMap.rewards),\n    type\n  }, {\n    createdAt: -1\n  });\n  const rowCount = hasMore ? 10000 : logs.length;\n\n  const isLoaded = i => !!logs[i];\n\n  const topBar = (top === null || top === void 0 ? void 0 : (_top$current = top.current) === null || _top$current === void 0 ? void 0 : (_top$current$getBound = _top$current.getBoundingClientRect()) === null || _top$current$getBound === void 0 ? void 0 : _top$current$getBound.top) || 200;\n  const height = window.screen.height - topBar;\n\n  if (loading && logs === null) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    });\n  } // eslint-disable-next-line react/no-multi-comp\n\n\n  const renderItem = item => /*#__PURE__*/React.createElement(\"div\", {\n    key: item.key,\n    style: item.style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(WalletBlock, {\n    log: logs[item.index],\n    hideCurrency: type === 'credits',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.head,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \" Transactions \"), /*#__PURE__*/React.createElement(Picker, {\n    label: getText(dateRangeFilters),\n    float: \"right\",\n    onSelect: e => {\n      setDateRangeFilters(e);\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(StatusSelectionBar, {\n    tabClassName: styles.tabClassName,\n    className: styles.tab,\n    activeClass: styles.tabActive,\n    items: getStates(),\n    onChange: onStateChange,\n    active: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), logs.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: isDesktop ? styles.desktop : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteLoader, {\n    loadMoreRows: loadMore,\n    isRowLoaded: isLoaded,\n    rowCount: rowCount,\n    minimumBatchSize: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, ({\n    onRowsRendered,\n    registerChild\n  }) => /*#__PURE__*/React.createElement(List, {\n    height: height,\n    onRowsRendered: onRowsRendered,\n    ref: registerChild,\n    rowCount: logs.length,\n    rowHeight: type === 'credits' ? 96 : 96,\n    rowRenderer: renderItem,\n    width: !isDesktop ? window.screen.width - 32 : window.screen.width - 320 - 420,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }))), logs.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProducts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: type === 'credits' ? noCreditsIcon : noCashIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, state === 'all' && 'You dont have any transactions yet', state === 'credits' && 'You dont have any credit transactions yet', state === 'debits' && 'You dont have any debit transactions yet', state === 'redeem' && 'You dont have any redeemed transactions yet')));\n}\n\n_s(WalletLog, \"DslDc0a6/QzcMNaPLJrBmP+fqro=\", false, function () {\n  return [useQueryParams, useHistory, useDesktop, useWalletLogs];\n});\n\n_c = WalletLog;\nWalletLog.propTypes = {\n  top: PropTypes.any.isRequired,\n  type: PropTypes.string.isRequired\n};\nWalletLog.defaultProps = {};\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletLog\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/wallet/WalletLog.jsx"],"names":["React","useState","InfiniteLoader","List","useWalletLogs","Loading","PropTypes","getText","customDateFilters","Picker","WalletBlock","useQueryParams","StatusSelectionBar","useHistory","useDesktop","windoCashStates","windoCreditStates","FilterMap","styles","WalletLog","top","type","params","step","state","get","history","dateRangeFilters","setDateRangeFilters","from","to","isEmptyFrom","isEmptyTo","isDesktop","getStates","onStateChange","val","set","replace","search","toString","dateTimeFilters","logs","loadMore","hasMore","loading","refresh","rewards","createdAt","rowCount","length","isLoaded","i","topBar","current","getBoundingClientRect","height","window","screen","renderItem","item","key","style","index","head","heading","e","tabClassName","tab","tabActive","desktop","onRowsRendered","registerChild","width","emptyProducts","noCreditsIcon","noCashIcon","emptyText","propTypes","any","isRequired","string","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { InfiniteLoader, List } from 'react-virtualized';\nimport { useWalletLogs } from 'hooks/wallet';\nimport { Loading } from 'components/shared/Loading';\nimport PropTypes from 'prop-types';\nimport { getText, customDateFilters } from 'containers/utils';\nimport { Picker } from 'components/shared/dateRangePicker/Picker';\nimport { WalletBlock } from 'components/wallet/WalletBlock';\nimport { useQueryParams } from 'hooks';\nimport noCreditsIcon from 'assets/images/settlement/illustration.svg';\nimport noCashIcon from 'assets/images/settlement/noCash.svg';\nimport { StatusSelectionBar } from 'components/shared/StatusSelectionBar';\nimport { useHistory } from 'react-router-dom';\nimport { useDesktop } from 'contexts';\nimport { windoCashStates, windoCreditStates, FilterMap } from '../payments/utils';\nimport styles from './WalletLog.module.css';\n\nexport function WalletLog({ top, type }) {\n  const params = useQueryParams();\n  const step = type !== 'credits' ? 'all' : 'rewards';\n  const state = params.get('state') || step;\n  const history = useHistory();\n  const [dateRangeFilters, setDateRangeFilters] = useState({ from: null, to: null });\n  const isEmptyFrom = dateRangeFilters?.from == null;\n  const isEmptyTo = !!dateRangeFilters.to === null;\n  const isDesktop = useDesktop();\n\n  const getStates = () => {\n    if (type === 'credits') {\n      return windoCreditStates;\n    }\n    return windoCashStates;\n  };\n\n  const onStateChange = (val) => {\n    params.set('state', val);\n    history.replace({\n      search: params.toString(),\n    });\n  };\n\n  const dateTimeFilters = () => {\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const [logs, loadMore, hasMore, loading, refresh] = useWalletLogs({\n    ...dateTimeFilters(),\n    ...(FilterMap[state] || FilterMap.rewards),\n    type,\n  }, {\n    createdAt: -1,\n  });\n\n  const rowCount = hasMore ? 10000 : logs.length;\n\n  const isLoaded = i => !!logs[i];\n\n  const topBar = top?.current?.getBoundingClientRect()?.top || 200;\n\n  const height = window.screen.height - topBar;\n\n  if (loading && logs === null) {\n    return (\n      <Loading />\n    );\n  }\n\n  // eslint-disable-next-line react/no-multi-comp\n  const renderItem = (item) => (\n    <div key={item.key} style={item.style}>\n      <WalletBlock log={logs[item.index]} hideCurrency={type === 'credits'} />\n    </div>\n  );\n\n  return (\n    <div>\n      <div className={styles.head}>\n        <div className={styles.heading}> Transactions </div>\n        <Picker\n          label={getText(dateRangeFilters)}\n          float=\"right\"\n          onSelect={(e) => {\n            setDateRangeFilters(e);\n            refresh();\n          }}\n        />\n      </div>\n      <StatusSelectionBar\n        tabClassName={styles.tabClassName}\n        className={styles.tab}\n        activeClass={styles.tabActive}\n        items={getStates()}\n        onChange={onStateChange}\n        active={state}\n      />\n      {logs.length > 0 && (\n        <div className={isDesktop ? styles.desktop : null}>\n          <InfiniteLoader\n            loadMoreRows={loadMore}\n            isRowLoaded={isLoaded}\n            rowCount={rowCount}\n            minimumBatchSize={10}\n          >\n            {({\n              onRowsRendered,\n              registerChild\n            }) => (\n              <List\n                height={height}\n                onRowsRendered={onRowsRendered}\n                ref={registerChild}\n                rowCount={logs.length}\n                rowHeight={type === 'credits' ? 96 : 96}\n                rowRenderer={renderItem}\n                width={!isDesktop ? window.screen.width - 32 : window.screen.width - 320 - 420}\n              />\n            )}\n          </InfiniteLoader>\n        </div>\n      )}\n      {logs.length === 0 && (\n        <div className={styles.emptyProducts}>\n          <img src={type === 'credits' ? noCreditsIcon : noCashIcon} alt=\"\" />\n          <div className={styles.emptyText}>\n            {state === 'all' && 'You dont have any transactions yet'}\n            {state === 'credits' && 'You dont have any credit transactions yet'}\n            {state === 'debits' && 'You dont have any debit transactions yet'}\n            {state === 'redeem' && 'You dont have any redeemed transactions yet'}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nWalletLog.propTypes = {\n  top: PropTypes.any.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nWalletLog.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}