{"ast":null,"code":"import isImage from 'is-image';\nimport { get } from 'lodash';\nimport * as Yup from 'yup';\nexport const unitTypes = ['Piece', 'Liter', 'Gram', 'Set', 'Square Meter', 'Year', 'Kilogram', 'Day', 'Bunch', 'Pair', 'Square Feet', 'Feet', 'Montly', 'Minute', 'Meter', 'Inch', 'Hour', 'Pound', 'Quintal', 'Bundle', 'Km', 'Dozen', 'Pound', 'Packet', 'Month', 'Box', 'Plate', 'Ton', 'Millimeter'];\nexport const taxSlabs = [{\n  label: 'No Tax',\n  value: 0\n}, {\n  label: '5%',\n  value: 5\n}, {\n  label: '12%',\n  value: 12\n}, {\n  label: '18%',\n  value: 18\n}, {\n  label: '28%',\n  value: 28\n}];\nexport const variantSchema = Yup.object({\n  discountedAmount: Yup.number().required().positive().label('Price'),\n  amount: Yup.lazy(value => {\n    if (value) {\n      return Yup.number().positive().min(Yup.ref('discountedAmount'), 'Strike-off Price should be greater than Price').required().label('Strike-off Price');\n    }\n\n    return Yup.number().transform(x => +x || 0).min(0).nullable().label('Strike-off Price').notRequired();\n  }),\n  availableType: Yup.string().required().label('Available type'),\n  available: Yup.number().when('availableType', {\n    is: 'finite',\n    then: Yup.number().required(),\n    otherwise: Yup.number().notRequired().transform(x => x || 0).nullable()\n  }).label('Availability'),\n  info: Yup.object().shape({\n    name: Yup.string().required().label('Variant title'),\n    type: Yup.string().required().label('Custom variant type'),\n    value: Yup.string().required().label('Variant type')\n  })\n});\nexport const colorSchema = Yup.object().shape({\n  hex: Yup.string().required().label('Color')\n});\nexport const variantsSchema = Yup.array().of(variantSchema);\nexport const colorsSchema = Yup.array().of(colorSchema);\nexport const variantDrawerSchema = Yup.object().shape({\n  colors: colorsSchema,\n  variants: variantsSchema\n});\nexport const draftSchema = Yup.object({\n  variants: variantsSchema,\n  colors: colorsSchema,\n  title: Yup.string().required().label('Product name')\n});\nexport const digitalProductsSchema = Yup.object({\n  type: Yup.string(),\n  value: Yup.string(),\n  name: Yup.string()\n});\nexport const productSchema = Yup.object({\n  variants: variantsSchema,\n  colors: colorsSchema,\n  status: Yup.string(),\n  title: Yup.string().required().label('Product name'),\n  description: Yup.string().label('Description'),\n  images: Yup.array().label('images'),\n  videos: Yup.array().label('videos'),\n  categories: Yup.array().label('categories'),\n  subCategories: Yup.array().label('sub categories'),\n  unit: Yup.object().shape({\n    value: Yup.string(),\n    type: Yup.string()\n  }),\n  taxes: Yup.object().shape({\n    inclusive: Yup.boolean().required(),\n    ids: Yup.array().label('Tax Slab')\n  }),\n  variant: Yup.object({\n    discountedAmount: Yup.number().required().positive().label('Price'),\n    amount: Yup.lazy(value => {\n      if (value) {\n        return Yup.number().positive().min(Yup.ref('discountedAmount'), 'Strike-off Price should be greater than Price').required().label('Strike-off Price');\n      }\n\n      return Yup.number().transform(x => +x || 0).min(0).nullable().label('Strike-off Price').notRequired();\n    }),\n    availableType: Yup.string().required().label('Available type'),\n    available: Yup.number().when('availableType', {\n      is: 'finite',\n      then: Yup.number().required().min(1, 'Availability should be greater than 0').typeError('Availability should be greater than 0').required().positive(),\n      otherwise: Yup.number().transform(x => x || 0).notRequired().nullable()\n    }).label('Availability')\n  }),\n  quantity: Yup.object({\n    type: Yup.string().required(),\n    group: Yup.number().min(1, 'Should be greater than 1').label('Group').required(),\n    minQuantity: Yup.number().required().positive().label('Min quantity'),\n    maxQuantity: Yup.lazy(value => {\n      if (value) {\n        return Yup.number().transform(x => +x || 0).positive().min(Yup.ref('minQuantity'), 'Maximum Order Quantity should be greater than Minimum Order Quantity').required().label('Max quantity');\n      }\n\n      return Yup.number().transform(x => +x || 0).label('Maximum Order Quantity').nullable().notRequired();\n    }),\n    enabled: Yup.boolean().required()\n  }),\n  productType: Yup.string().required(),\n  links: Yup.array().of(digitalProductsSchema)\n});\nexport function getInitialValues(values = {}, taxes = []) {\n  const isCreate = taxes.length > 0;\n  const taxIds = taxes.filter(x => x.enabled).map(x => x._id);\n  const {\n    quantity,\n    ...rest\n  } = values;\n  return {\n    title: '',\n    description: '',\n    images: [],\n    videos: [],\n    categories: [],\n    subCategories: [],\n    status: 'live',\n    catalogs: [],\n    hashTags: [],\n    customizable: 'no',\n    unit: {\n      value: '1',\n      type: 'Piece'\n    },\n    taxes: {\n      inclusive: true,\n      ids: isCreate ? taxIds : []\n    },\n    variant: {\n      default: true,\n      amount: '',\n      discountedAmount: '',\n      available: '0',\n      availableType: 'infinite',\n      images: [],\n      videos: []\n    },\n    colors: [],\n    variants: [],\n    variantType: 'size',\n    plainDescription: '',\n    quantity: {\n      enabled: get(quantity, 'enabled', true),\n      maxQuantity: (quantity === null || quantity === void 0 ? void 0 : quantity.maxQuantity) || '',\n      minQuantity: (quantity === null || quantity === void 0 ? void 0 : quantity.minQuantity) || 1,\n      group: (quantity === null || quantity === void 0 ? void 0 : quantity.group) || 1,\n      type: (quantity === null || quantity === void 0 ? void 0 : quantity.type) || 'infinite'\n    },\n    productType: 'physical',\n    links: [],\n    ...rest\n  };\n}\nexport function calculateDiscount(amount, discountedAmount) {\n  return ((amount - discountedAmount) / amount * 100).toFixed(0);\n}\n\nconst arrayToHash = (array, path) => array.reduce((acc, val) => {\n  acc[get(val, path)] = val;\n  return acc;\n}, {});\n\nfunction extractTaxes(ids = [], shopTaxes) {\n  const taxesObj = arrayToHash(shopTaxes, '_id');\n  const taxes = ids;\n\n  if (taxes.length === 0) {\n    return 0;\n  }\n\n  return taxes.reduce((acc, taxId) => {\n    const tax = taxesObj[taxId];\n\n    if (tax) {\n      return acc + tax.value;\n    }\n\n    return acc;\n  }, 0);\n}\n\nexport function calculateTax(shopTaxes, sku) {\n  const {\n    taxes: {\n      inclusive,\n      ids\n    },\n    variant: {\n      discountedAmount\n    }\n  } = sku;\n  const slab = extractTaxes(ids, shopTaxes);\n\n  if (!inclusive) {\n    return Math.ceil(discountedAmount * (1 + slab / 100));\n  }\n\n  return discountedAmount;\n}\nexport function getSizeInitialValues(value = {}) {\n  return {\n    amount: '',\n    discountedAmount: '',\n    available: '0',\n    availableType: 'infinite',\n    images: [],\n    videos: [],\n    info: {\n      type: 'size',\n      name: 'Size',\n      value: ''\n    },\n    status: 'live',\n    ...value\n  };\n}\nexport function getCustomInitialValues({\n  info = {},\n  ...other\n} = {}) {\n  return { ...getSizeInitialValues({\n      info: {\n        type: 'custom',\n        name: '',\n        value: '',\n        ...info\n      }\n    }),\n    ...other\n  };\n}\nexport function getColorInitialValues(value = {}) {\n  return {\n    hex: '#4B7BE5',\n    name: '',\n    status: 'live',\n    images: [],\n    ...value\n  };\n}\nexport function convertHTML(value) {\n  const div = document.createElement('div');\n  div.innerHTML = value;\n  return div.innerText;\n}\nexport function getVideosAndImages(files) {\n  return files.reduce((acc, file) => {\n    if (isImage(file.url)) {\n      acc.images.push(file);\n    } else {\n      acc.videos.push(file);\n    }\n\n    return acc;\n  }, {\n    images: [],\n    videos: []\n  });\n}\nexport function marshallPayload(data) {\n  var _sku$catalogs;\n\n  const {\n    variants,\n    variant,\n    ...sku\n  } = data;\n  const allVariants = [variant, ...variants];\n  return {\n    variants: allVariants,\n    sku: { ...sku,\n      customizable: sku.customizable === 'yes',\n      catalogs: ((_sku$catalogs = sku.catalogs) === null || _sku$catalogs === void 0 ? void 0 : _sku$catalogs.length) > 0 ? sku.catalogs : ['all']\n    }\n  };\n}\nexport function unMarshallPayload(data) {\n  var _rest$, _rest$$info;\n\n  const {\n    variants,\n    ...sku\n  } = data;\n  const variant = variants.find(x => x.default) || variants[0];\n  variant.default = true;\n  variant.amount = variant.amount || '';\n  variant.discountedAmount = variant.discountedAmount || '';\n  const rest = variants.filter(x => x._id !== variant._id);\n  const variantType = ((_rest$ = rest[0]) === null || _rest$ === void 0 ? void 0 : (_rest$$info = _rest$.info) === null || _rest$$info === void 0 ? void 0 : _rest$$info.type) === 'custom' ? 'custom' : 'size';\n  return { ...sku,\n    plainDescription: convertHTML(sku.description || ''),\n    customizable: sku.customizable ? 'yes' : 'no',\n    variant: { ...variant,\n      amount: variant.amount === variant.discountedAmount ? '' : variant.amount\n    },\n    variants: rest.map(v => ({ ...v,\n      amount: v.amount === v.discountedAmount ? '' : v.amount,\n      discountedAmount: v.discountedAmount || ''\n    })),\n    variantType\n  };\n}","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/products/variantUtils.js"],"names":["isImage","get","Yup","unitTypes","taxSlabs","label","value","variantSchema","object","discountedAmount","number","required","positive","amount","lazy","min","ref","transform","x","nullable","notRequired","availableType","string","available","when","is","then","otherwise","info","shape","name","type","colorSchema","hex","variantsSchema","array","of","colorsSchema","variantDrawerSchema","colors","variants","draftSchema","title","digitalProductsSchema","productSchema","status","description","images","videos","categories","subCategories","unit","taxes","inclusive","boolean","ids","variant","typeError","quantity","group","minQuantity","maxQuantity","enabled","productType","links","getInitialValues","values","isCreate","length","taxIds","filter","map","_id","rest","catalogs","hashTags","customizable","default","variantType","plainDescription","calculateDiscount","toFixed","arrayToHash","path","reduce","acc","val","extractTaxes","shopTaxes","taxesObj","taxId","tax","calculateTax","sku","slab","Math","ceil","getSizeInitialValues","getCustomInitialValues","other","getColorInitialValues","convertHTML","div","document","createElement","innerHTML","innerText","getVideosAndImages","files","file","url","push","marshallPayload","data","allVariants","unMarshallPayload","find","v"],"mappings":"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","sourcesContent":["import isImage from 'is-image';\nimport { get } from 'lodash';\nimport * as Yup from 'yup';\n\nexport const unitTypes = [\n  'Piece', 'Liter', 'Gram', 'Set', 'Square Meter', 'Year', 'Kilogram', 'Day', 'Bunch', 'Pair', 'Square Feet', 'Feet',\n  'Montly', 'Minute', 'Meter', 'Inch', 'Hour', 'Pound', 'Quintal', 'Bundle', 'Km', 'Dozen', 'Pound',\n  'Packet', 'Month', 'Box', 'Plate', 'Ton', 'Millimeter'\n];\n\nexport const taxSlabs = [\n  {\n    label: 'No Tax',\n    value: 0\n  },\n  {\n    label: '5%',\n    value: 5\n  },\n  {\n    label: '12%',\n    value: 12\n  },\n  {\n    label: '18%',\n    value: 18\n  },\n  {\n    label: '28%',\n    value: 28\n  },\n];\n\nexport const variantSchema = Yup.object({\n  discountedAmount: Yup.number()\n    .required()\n    .positive()\n    .label('Price'),\n  amount: Yup.lazy((value) => {\n    if (value) {\n      return Yup.number()\n        .positive()\n        .min(Yup.ref('discountedAmount'), 'Strike-off Price should be greater than Price')\n        .required()\n        .label('Strike-off Price');\n    }\n    return Yup.number()\n      .transform(x => +x || 0)\n      .min(0)\n      .nullable()\n      .label('Strike-off Price')\n      .notRequired();\n  }),\n  availableType: Yup.string()\n    .required()\n    .label('Available type'),\n  available: Yup.number()\n    .when('availableType', {\n      is: 'finite',\n      then: Yup.number()\n        .required(),\n      otherwise: Yup.number()\n        .notRequired()\n        .transform(x => x || 0)\n        .nullable(),\n    })\n    .label('Availability'),\n  info: Yup.object()\n    .shape({\n      name: Yup.string()\n        .required()\n        .label('Variant title'),\n      type: Yup.string()\n        .required()\n        .label('Custom variant type'),\n      value: Yup.string()\n        .required()\n        .label('Variant type'),\n    })\n});\n\nexport const colorSchema = Yup.object()\n  .shape({\n    hex: Yup.string()\n      .required()\n      .label('Color'),\n  });\n\nexport const variantsSchema = Yup.array()\n  .of(variantSchema);\nexport const colorsSchema = Yup.array()\n  .of(colorSchema);\n\nexport const variantDrawerSchema = Yup.object().shape({\n  colors: colorsSchema,\n  variants: variantsSchema,\n});\n\nexport const draftSchema = Yup.object({\n  variants: variantsSchema,\n  colors: colorsSchema,\n  title: Yup.string()\n    .required()\n    .label('Product name'),\n});\n\nexport const digitalProductsSchema = Yup.object({\n  type: Yup.string(),\n  value: Yup.string(),\n  name: Yup.string(),\n});\n\nexport const productSchema = Yup.object({\n  variants: variantsSchema,\n  colors: colorsSchema,\n  status: Yup.string(),\n  title: Yup.string()\n    .required()\n    .label('Product name'),\n  description: Yup.string()\n    .label('Description'),\n  images: Yup.array()\n    .label('images'),\n  videos: Yup.array()\n    .label('videos'),\n  categories: Yup.array()\n    .label('categories'),\n  subCategories: Yup.array()\n    .label('sub categories'),\n  unit: Yup.object()\n    .shape({\n      value: Yup.string(),\n      type: Yup.string(),\n    }),\n  taxes: Yup.object()\n    .shape({\n      inclusive: Yup.boolean().required(),\n      ids: Yup.array()\n        .label('Tax Slab'),\n    }),\n  variant: Yup.object({\n    discountedAmount: Yup.number()\n      .required()\n      .positive()\n      .label('Price'),\n    amount: Yup.lazy((value) => {\n      if (value) {\n        return Yup.number()\n          .positive()\n          .min(Yup.ref('discountedAmount'), 'Strike-off Price should be greater than Price')\n          .required()\n          .label('Strike-off Price');\n      }\n      return Yup.number()\n        .transform(x => +x || 0)\n        .min(0)\n        .nullable()\n        .label('Strike-off Price')\n        .notRequired();\n    }),\n    availableType: Yup.string()\n      .required()\n      .label('Available type'),\n    available: Yup.number()\n      .when('availableType', {\n        is: 'finite',\n        then: Yup.number()\n          .required()\n          .min(1, 'Availability should be greater than 0')\n          .typeError('Availability should be greater than 0')\n          .required()\n          .positive(),\n        otherwise: Yup.number()\n          .transform(x => x || 0)\n          .notRequired()\n          .nullable(),\n      })\n      .label('Availability'),\n  }),\n  quantity: Yup.object({\n    type: Yup.string().required(),\n    group: Yup.number()\n      .min(1, 'Should be greater than 1')\n      .label('Group')\n      .required(),\n    minQuantity: Yup.number().required().positive().label('Min quantity'),\n    maxQuantity: Yup.lazy((value) => {\n      if (value) {\n        return Yup.number()\n          .transform(x => +x || 0)\n          .positive()\n          .min(Yup.ref('minQuantity'), 'Maximum Order Quantity should be greater than Minimum Order Quantity')\n          .required()\n          .label('Max quantity');\n      }\n      return Yup.number()\n        .transform(x => +x || 0)\n        .label('Maximum Order Quantity')\n        .nullable()\n        .notRequired();\n    }),\n    enabled: Yup.boolean().required(),\n  }),\n  productType: Yup.string().required(),\n  links: Yup.array().of(digitalProductsSchema)\n});\n\nexport function getInitialValues(values = {}, taxes = []) {\n  const isCreate = taxes.length > 0;\n  const taxIds = taxes.filter(x => x.enabled).map(x => x._id);\n  const { quantity, ...rest } = values;\n  return {\n    title: '',\n    description: '',\n    images: [],\n    videos: [],\n    categories: [],\n    subCategories: [],\n    status: 'live',\n    catalogs: [],\n    hashTags: [],\n    customizable: 'no',\n    unit: {\n      value: '1',\n      type: 'Piece',\n    },\n    taxes: {\n      inclusive: true,\n      ids: isCreate ? taxIds : [],\n    },\n    variant: {\n      default: true,\n      amount: '',\n      discountedAmount: '',\n      available: '0',\n      availableType: 'infinite',\n      images: [],\n      videos: [],\n    },\n    colors: [],\n    variants: [],\n    variantType: 'size',\n    plainDescription: '',\n    quantity: {\n      enabled: get(quantity, 'enabled', true),\n      maxQuantity: quantity?.maxQuantity || '',\n      minQuantity: quantity?.minQuantity || 1,\n      group: quantity?.group || 1,\n      type: quantity?.type || 'infinite'\n    },\n    productType: 'physical',\n    links: [],\n    ...rest,\n  };\n}\n\nexport function calculateDiscount(amount, discountedAmount) {\n  return (((amount - discountedAmount) / amount) * 100).toFixed(0);\n}\n\nconst arrayToHash = (array, path) => array.reduce((acc, val) => {\n  acc[get(val, path)] = val;\n  return acc;\n}, {});\n\nfunction extractTaxes(ids = [], shopTaxes) {\n  const taxesObj = arrayToHash(shopTaxes, '_id');\n  const taxes = ids;\n  if (taxes.length === 0) {\n    return 0;\n  }\n  return taxes.reduce((acc, taxId) => {\n    const tax = taxesObj[taxId];\n    if (tax) {\n      return acc + tax.value;\n    }\n    return acc;\n  }, 0);\n}\n\nexport function calculateTax(shopTaxes, sku) {\n  const { taxes: { inclusive, ids }, variant: { discountedAmount } } = sku;\n  const slab = extractTaxes(ids, shopTaxes);\n  if (!inclusive) {\n    return Math.ceil(discountedAmount * (1 + slab / 100));\n  }\n  return discountedAmount;\n}\n\nexport function getSizeInitialValues(value = {}) {\n  return {\n    amount: '',\n    discountedAmount: '',\n    available: '0',\n    availableType: 'infinite',\n    images: [],\n    videos: [],\n    info: {\n      type: 'size',\n      name: 'Size',\n      value: ''\n    },\n    status: 'live',\n    ...value,\n  };\n}\n\nexport function getCustomInitialValues({\n  info = {},\n  ...other\n} = {}) {\n  return {\n    ...getSizeInitialValues({\n      info: {\n        type: 'custom',\n        name: '',\n        value: '',\n        ...info,\n      }\n    }),\n    ...other,\n  };\n}\n\nexport function getColorInitialValues(value = {}) {\n  return {\n    hex: '#4B7BE5',\n    name: '',\n    status: 'live',\n    images: [],\n    ...value,\n  };\n}\n\nexport function convertHTML(value) {\n  const div = document.createElement('div');\n  div.innerHTML = value;\n  return div.innerText;\n}\n\nexport function getVideosAndImages(files) {\n  return files.reduce((acc, file) => {\n    if (isImage(file.url)) {\n      acc.images.push(file);\n    } else {\n      acc.videos.push(file);\n    }\n    return acc;\n  }, {\n    images: [],\n    videos: []\n  });\n}\n\nexport function marshallPayload(data) {\n  const {\n    variants,\n    variant,\n    ...sku\n  } = data;\n  const allVariants = [variant, ...variants];\n  return {\n    variants: allVariants,\n    sku: {\n      ...sku,\n      customizable: sku.customizable === 'yes',\n      catalogs: sku.catalogs?.length > 0 ? sku.catalogs : ['all']\n    },\n  };\n}\n\nexport function unMarshallPayload(data) {\n  const {\n    variants,\n    ...sku\n  } = data;\n  const variant = variants.find(x => x.default) || variants[0];\n  variant.default = true;\n  variant.amount = variant.amount || '';\n  variant.discountedAmount = variant.discountedAmount || '';\n  const rest = variants.filter(x => x._id !== variant._id);\n  const variantType = rest[0]?.info?.type === 'custom' ? 'custom' : 'size';\n  return {\n    ...sku,\n    plainDescription: convertHTML(sku.description || ''),\n    customizable: sku.customizable ? 'yes' : 'no',\n    variant: {\n      ...variant,\n      amount: variant.amount === variant.discountedAmount ? '' : variant.amount,\n    },\n    variants: rest.map(v => ({\n      ...v,\n      amount: v.amount === v.discountedAmount ? '' : v.amount,\n      discountedAmount: v.discountedAmount || ''\n    })),\n    variantType,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}