{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/products/List.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Chip, Grid, Menu, MenuItem } from '@material-ui/core';\nimport { InfiniteLoader, List, Grid as RVGrid } from 'react-virtualized';\nimport { useInfiniteProducts, useQueryParams } from \"../../hooks\";\nimport { ProductCard } from \"../../components/products\"; // import { Loading } from 'components/shared/Loading';\n\nimport InfoClose from \"../../assets/images/products/create/filterClose.svg\";\nimport AddIcon from \"../../assets/images/products/create/add1.svg\";\nimport emptyProducts from \"../../assets/overview/newOrder.svg\";\nimport { useProfile } from \"../../hooks/profile\";\nimport { Picker } from \"../../components/shared/dateRangePicker/Picker\";\nimport { InstaImport } from \"../../components/userProfile/InstaImport\";\nimport { useDesktop, useIsUserRated } from \"../../contexts\";\nimport { Button, Clickable } from 'phoenix-components';\nimport { Select } from 'phoenix-components';\nimport { Search } from 'phoenix-components';\nimport addIcon from \"../../assets/v2/products/add.svg\";\nimport { customDateFilters, dateFilters, getText } from \"../utils\";\nimport cx from 'classnames';\nimport chevronWhiteBottom from \"../../assets/v2/common/chevronWhiteBottom.svg\";\nimport { canTakeRating, setRatingShown } from \"../../utils/ratings\";\nimport { RatingService } from \"../../services/ratings\";\nimport { list, FilterMap } from \"./utils\";\nimport styles from \"./List.module.css\";\n\nfunction ProductsList() {\n  _s();\n\n  const history = useHistory();\n  const isDesktop = useDesktop();\n  const params = useQueryParams();\n  const [query, setQuery] = useState('');\n  const state = params.get('state') || 'all';\n  const create = params.get('created') || 'all';\n  const type = params.has('type');\n  const types = type ? params.get('type') : null;\n  const [dateRangeFilters, setDateRangeFilters] = useState({\n    from: null,\n    to: null\n  });\n  const isEmptyFrom = dateRangeFilters.from === null;\n  const isEmptyTo = dateRangeFilters.to === null;\n  const [anchorMenuEl, setAnchorEl] = useState(null);\n  const rated = useIsUserRated();\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const openBulkUploadProducts = () => {\n    setAnchorEl(null);\n    history.push('/product/bulk/upload');\n  };\n\n  const getCatalogFilters = () => {\n    if (types) {\n      return {\n        catalog: types === 'null' ? null : types\n      };\n    }\n\n    return {};\n  };\n\n  const dateTimeFilters = () => {\n    if (create !== 'custom') {\n      return dateFilters[create];\n    }\n\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const searchFilters = () => {\n    if (query.length > 0) {\n      return {\n        title: {\n          $regex: `${query}`,\n          $options: 'i'\n        }\n      };\n    }\n\n    return {};\n  };\n\n  const [products, loadMore, hasMore,, refresh] = useInfiniteProducts({ ...dateTimeFilters(),\n    ...FilterMap[state],\n    ...getCatalogFilters(),\n    ...searchFilters()\n  }, {\n    createdAt: -1\n  });\n  const [profile, refreshProfile] = useProfile();\n  useEffect(() => {\n    if (((products === null || products === void 0 ? void 0 : products.length) || 0) < 2) {\n      return;\n    }\n\n    if (rated) {\n      return;\n    }\n\n    if (!canTakeRating()) {\n      return;\n    }\n\n    RatingService.open();\n    setRatingShown();\n  }, [(products === null || products === void 0 ? void 0 : products.length) > 2]);\n  const rowCount = hasMore ? 10000 : products.length;\n\n  const isLoaded = i => !!products[i];\n\n  const height = window.screen.height - 240;\n  const dHeight = window.screen.height - 90 - 68 - 24 - 68;\n  const dCellWidth = (window.screen.width - 272 - 60 - 34) / 2;\n\n  const onCreate = () => {\n    history.push('/products/create');\n  };\n\n  const onFilterSelect = val => {\n    if (state === val.value) {\n      params.delete('state');\n    } else {\n      params.set('state', val.value);\n    }\n\n    history.push({\n      search: params.toString()\n    });\n    refresh();\n  }; // const isEmpty = products.length === 0 && loading;\n  // if (isEmpty) {\n  //   return <Loading />;\n  // }\n  // eslint-disable-next-line react/no-multi-comp\n\n\n  const renderItem = item => /*#__PURE__*/React.createElement(\"div\", {\n    key: item.key,\n    style: item.style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ProductCard, {\n    product: products[item.index],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }));\n\n  const renderCell = el => {\n    const idx = el.rowIndex * 2 + el.columnIndex;\n\n    if (idx >= products.length) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: el.key,\n      style: el.style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProductCard, {\n      showBorder: el.columnIndex === 0,\n      product: products[idx],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const onSectionRendered = onRowsRendered => ({\n    columnStartIndex,\n    columnStopIndex,\n    rowStartIndex,\n    rowStopIndex\n  }) => {\n    const startIndex = rowStartIndex * 2 + columnStartIndex;\n    const stopIndex = rowStopIndex * 2 + columnStopIndex;\n    onRowsRendered({\n      startIndex,\n      stopIndex\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProductsRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InstaImport, {\n    profile: profile,\n    onClose: refreshProfile,\n    page: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    startIcon: addIcon,\n    label: \"Add Product\",\n    onClick: onCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paddLR,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    value: query,\n    placeholder: \"Search products\",\n    onChange: e => {\n      setQuery(e.target.value);\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.picker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    className: styles.select,\n    classNamePrefix: \"react-select\",\n    isSearchable: false // label=\"Select Bank\"\n    ,\n    placeholder: \"Select Products\",\n    value: list.find(x => x.value === state),\n    onChange: onFilterSelect,\n    options: list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    label: getText(dateRangeFilters),\n    onSelect: e => {\n      setDateRangeFilters(e);\n\n      if (getText(e) !== 'Select Date') {\n        params.set('created', 'custom');\n        history.push({\n          search: params.toString()\n        });\n      } else {\n        params.delete('created');\n        history.push({\n          search: params.toString()\n        });\n      }\n\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"textCenter fullWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, (types === null || types === void 0 ? void 0 : types.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chipSec,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Chip, {\n    color: \"primary\",\n    className: styles.chip,\n    label: types === 'null' ? 'Un Named' : types,\n    deleteIcon: /*#__PURE__*/React.createElement(\"img\", {\n      src: InfoClose,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 29\n      }\n    }),\n    onDelete: () => {\n      history.push({\n        pathname: 'products/catalog'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }))), products.length > 0 ? /*#__PURE__*/React.createElement(InfiniteLoader, {\n    loadMoreRows: loadMore,\n    isRowLoaded: isLoaded,\n    rowCount: rowCount,\n    minimumBatchSize: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }, ({\n    onRowsRendered,\n    registerChild\n  }) => /*#__PURE__*/React.createElement(List, {\n    height: height,\n    onRowsRendered: onRowsRendered,\n    ref: registerChild,\n    rowCount: products.length,\n    rowHeight: 132,\n    rowRenderer: renderItem,\n    width: window.screen.width,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProducts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyProducts,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProductText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"No recently added products\")), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.fab,\n    onClick: () => {\n      history.push('/products/create');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: AddIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 11\n    }\n  }))), isDesktop && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProductsRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InstaImport, {\n    profile: profile,\n    onClose: refreshProfile,\n    page: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: cx(styles.copyButton, styles.desktopButton),\n    startIcon: addIcon,\n    label: \"Add Product\",\n    onClick: onCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Clickable, {\n    className: styles.dropDownButton,\n    onClick: e => {\n      setAnchorEl(e.currentTarget);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chevronWhiteBottom,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Menu, {\n    anchorEl: anchorMenuEl,\n    open: Boolean(anchorMenuEl),\n    onClose: handleMenuClose,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'left'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: openBulkUploadProducts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }, \"Bulk Upload Products\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pickerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.picker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    label: getText(dateRangeFilters),\n    onSelect: e => {\n      setDateRangeFilters(e);\n\n      if (!e.from) {\n        params.delete('created');\n        history.push({\n          search: params.toString()\n        });\n        refresh();\n        return;\n      }\n\n      params.set('created', 'custom');\n      history.push({\n        search: params.toString()\n      });\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pickerContainer1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    value: query,\n    placeholder: \"Search products\",\n    onChange: e => {\n      setQuery(e.target.value);\n      refresh();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    className: styles.select,\n    classNamePrefix: \"react-select\" // label=\"Select Bank\"\n    ,\n    placeholder: \"Select Products\",\n    value: list.find(x => x.value === state),\n    onChange: onFilterSelect,\n    options: list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"textCenter fullWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }\n  }, (types === null || types === void 0 ? void 0 : types.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.chipSec,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Chip, {\n    color: \"primary\",\n    className: styles.chip,\n    label: types === 'null' ? 'Un Named' : types,\n    deleteIcon: /*#__PURE__*/React.createElement(\"img\", {\n      src: InfoClose,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 29\n      }\n    }),\n    onDelete: () => {\n      history.push({\n        pathname: 'products/catalog'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 15\n    }\n  }))), products.length > 0 ? /*#__PURE__*/React.createElement(InfiniteLoader, {\n    loadMoreRows: loadMore,\n    isRowLoaded: isLoaded,\n    rowCount: rowCount,\n    minimumBatchSize: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 11\n    }\n  }, ({\n    onRowsRendered,\n    registerChild\n  }) => /*#__PURE__*/React.createElement(RVGrid, {\n    onSectionRendered: onSectionRendered(onRowsRendered),\n    ref: registerChild,\n    cellRenderer: renderCell,\n    columnCount: 2,\n    columnWidth: dCellWidth,\n    height: dHeight,\n    rowCount: Math.ceil(rowCount / 2),\n    rowHeight: 135,\n    width: window.screen.width - 272 - 60 - 32,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProducts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emptyProducts,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.emptyProductText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 13\n    }\n  }, \"No recently added products\"))));\n}\n\n_s(ProductsList, \"Ow+ab9f2/2wlwWIcFSPg/qd3RwU=\", false, function () {\n  return [useHistory, useDesktop, useQueryParams, useIsUserRated, useInfiniteProducts, useProfile];\n});\n\n_c = ProductsList;\nexport default ProductsList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsList\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/products/List.jsx"],"names":["React","useEffect","useState","useHistory","Chip","Grid","Menu","MenuItem","InfiniteLoader","List","RVGrid","useInfiniteProducts","useQueryParams","ProductCard","useProfile","Picker","InstaImport","useDesktop","useIsUserRated","Button","Clickable","Select","Search","customDateFilters","dateFilters","getText","cx","canTakeRating","setRatingShown","RatingService","list","FilterMap","styles","ProductsList","history","isDesktop","params","query","setQuery","state","get","create","type","has","types","dateRangeFilters","setDateRangeFilters","from","to","isEmptyFrom","isEmptyTo","anchorMenuEl","setAnchorEl","rated","handleMenuClose","openBulkUploadProducts","push","getCatalogFilters","catalog","dateTimeFilters","searchFilters","length","title","$regex","$options","products","loadMore","hasMore","refresh","createdAt","profile","refreshProfile","open","rowCount","isLoaded","i","height","window","screen","dHeight","dCellWidth","width","onCreate","onFilterSelect","val","value","delete","set","search","toString","renderItem","item","key","style","index","renderCell","el","idx","rowIndex","columnIndex","onSectionRendered","onRowsRendered","columnStartIndex","columnStopIndex","rowStartIndex","rowStopIndex","startIndex","stopIndex","container","emptyProductsRow","addIcon","paddLR","e","target","picker","left","select","find","x","chipSec","chip","InfoClose","pathname","registerChild","emptyProducts","emptyProductText","fab","AddIcon","buttonContainer","copyButton","desktopButton","dropDownButton","currentTarget","chevronWhiteBottom","Boolean","vertical","horizontal","pickerContainer","pickerContainer1","search1","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Chip, Grid, Menu, MenuItem\n} from '@material-ui/core';\nimport { InfiniteLoader, List, Grid as RVGrid } from 'react-virtualized';\nimport { useInfiniteProducts, useQueryParams } from 'hooks';\nimport { ProductCard } from 'components/products';\n// import { Loading } from 'components/shared/Loading';\nimport InfoClose from 'assets/images/products/create/filterClose.svg';\nimport AddIcon from 'assets/images/products/create/add1.svg';\nimport emptyProducts from 'assets/overview/newOrder.svg';\nimport { useProfile } from 'hooks/profile';\nimport { Picker } from 'components/shared/dateRangePicker/Picker';\nimport { InstaImport } from 'components/userProfile/InstaImport';\nimport { useDesktop, useIsUserRated } from 'contexts';\nimport { Button, Clickable } from 'phoenix-components';\nimport { Select } from 'phoenix-components';\nimport { Search } from 'phoenix-components';\nimport addIcon from 'assets/v2/products/add.svg';\nimport { customDateFilters, dateFilters, getText } from 'containers/utils';\nimport cx from 'classnames';\nimport chevronWhiteBottom from 'assets/v2/common/chevronWhiteBottom.svg';\nimport { canTakeRating, setRatingShown } from 'utils/ratings';\nimport { RatingService } from 'services/ratings';\nimport { list, FilterMap } from './utils';\nimport styles from './List.module.css';\n\nfunction ProductsList() {\n  const history = useHistory();\n  const isDesktop = useDesktop();\n  const params = useQueryParams();\n  const [query, setQuery] = useState('');\n  const state = params.get('state') || 'all';\n  const create = params.get('created') || 'all';\n  const type = params.has('type');\n  const types = type ? params.get('type') : null;\n  const [dateRangeFilters, setDateRangeFilters] = useState({\n    from: null,\n    to: null\n  });\n  const isEmptyFrom = dateRangeFilters.from === null;\n  const isEmptyTo = dateRangeFilters.to === null;\n\n  const [anchorMenuEl, setAnchorEl] = useState(null);\n  const rated = useIsUserRated();\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const openBulkUploadProducts = () => {\n    setAnchorEl(null);\n    history.push('/product/bulk/upload');\n  };\n\n  const getCatalogFilters = () => {\n    if (types) {\n      return { catalog: types === 'null' ? null : types };\n    }\n    return {};\n  };\n\n  const dateTimeFilters = () => {\n    if (create !== 'custom') {\n      return dateFilters[create];\n    }\n    if (isEmptyFrom || isEmptyTo) {\n      return {};\n    }\n    return customDateFilters(dateRangeFilters.from, dateRangeFilters.to);\n  };\n\n  const searchFilters = () => {\n    if (query.length > 0) {\n      return { title: { $regex: `${query}`, $options: 'i' } };\n    }\n    return {};\n  };\n\n  const [products, loadMore, hasMore, , refresh] = useInfiniteProducts({\n    ...dateTimeFilters(),\n    ...(FilterMap[state]),\n    ...getCatalogFilters(),\n    ...searchFilters()\n  }, { createdAt: -1 });\n\n  const [profile, refreshProfile] = useProfile();\n\n  useEffect(() => {\n    if ((products?.length || 0) < 2) {\n      return;\n    }\n    if (rated) {\n      return;\n    }\n    if (!canTakeRating()) {\n      return;\n    }\n    RatingService.open();\n    setRatingShown();\n  }, [products?.length > 2]);\n\n  const rowCount = hasMore ? 10000 : products.length;\n\n  const isLoaded = i => !!products[i];\n\n  const height = window.screen.height - 240;\n\n  const dHeight = window.screen.height - 90 - 68 - 24 - 68;\n\n  const dCellWidth = (window.screen.width - 272 - 60 - 34) / 2;\n\n  const onCreate = () => {\n    history.push('/products/create');\n  };\n\n  const onFilterSelect = (val) => {\n    if (state === val.value) {\n      params.delete('state');\n    } else {\n      params.set('state', val.value);\n    }\n    history.push({ search: params.toString() });\n    refresh();\n  };\n\n  // const isEmpty = products.length === 0 && loading;\n\n  // if (isEmpty) {\n  //   return <Loading />;\n  // }\n\n  // eslint-disable-next-line react/no-multi-comp\n  const renderItem = (item) => (\n    <div\n      key={item.key}\n      style={item.style}\n    >\n      <ProductCard product={products[item.index]} />\n    </div>\n  );\n\n  const renderCell = (el) => {\n    const idx = el.rowIndex * 2 + el.columnIndex;\n    if (idx >= products.length) {\n      return null;\n    }\n    return (\n      <div key={el.key} style={el.style}>\n        <ProductCard showBorder={el.columnIndex === 0} product={products[idx]} />\n      </div>\n    );\n  };\n\n  const onSectionRendered = (onRowsRendered) => ({\n    columnStartIndex,\n    columnStopIndex,\n    rowStartIndex,\n    rowStopIndex\n  }) => {\n    const startIndex = rowStartIndex * 2 + columnStartIndex;\n    const stopIndex = rowStopIndex * 2 + columnStopIndex;\n\n    onRowsRendered({\n      startIndex,\n      stopIndex\n    });\n  };\n\n  return (\n    <>\n      {!isDesktop\n    && (\n      <div className={styles.container}>\n        <div className={styles.emptyProductsRow}>\n          <InstaImport profile={profile} onClose={refreshProfile} page=\"products\" />\n          <Button\n            startIcon={addIcon}\n            label=\"Add Product\"\n            onClick={onCreate}\n          />\n        </div>\n        <div className={styles.paddLR}>\n          <Search\n            value={query}\n            placeholder=\"Search products\"\n            onChange={(e) => {\n              setQuery(e.target.value);\n              refresh();\n            }}\n          />\n        </div>\n        <div className={styles.picker}>\n          <div className={styles.left}>\n            <Select\n              className={styles.select}\n              classNamePrefix=\"react-select\"\n              isSearchable={false}\n              // label=\"Select Bank\"\n              placeholder=\"Select Products\"\n              value={list.find(x => x.value === state)}\n              onChange={onFilterSelect}\n              options={list}\n            />\n          </div>\n          <div>\n            <Picker\n              label={getText(dateRangeFilters)}\n              onSelect={(e) => {\n                setDateRangeFilters(e);\n                if (getText(e) !== 'Select Date') {\n                  params.set('created', 'custom');\n                  history.push({ search: params.toString() });\n                } else {\n                  params.delete('created');\n                  history.push({ search: params.toString() });\n                }\n                refresh();\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"textCenter fullWidth\">\n          {types?.length > 0 && (\n            <div className={styles.chipSec}>\n              <Chip\n                color=\"primary\"\n                className={styles.chip}\n                label={types === 'null' ? 'Un Named' : types}\n                deleteIcon={<img src={InfoClose} alt=\"\" />}\n                onDelete={() => {\n                  history.push({\n                    pathname: 'products/catalog',\n                  });\n                }}\n              />\n            </div>\n          )}\n        </div>\n        {products.length > 0 ? (\n          <InfiniteLoader\n            loadMoreRows={loadMore}\n            isRowLoaded={isLoaded}\n            rowCount={rowCount}\n            minimumBatchSize={10}\n          >\n            {({\n              onRowsRendered,\n              registerChild\n            }) => (\n              <List\n                height={height}\n                onRowsRendered={onRowsRendered}\n                ref={registerChild}\n                rowCount={products.length}\n                rowHeight={132}\n                rowRenderer={renderItem}\n                width={window.screen.width}\n              />\n            )}\n          </InfiniteLoader>\n        ) : (\n          <div className={styles.emptyProducts}>\n            <img src={emptyProducts} alt=\"\" />\n            <div className={styles.emptyProductText}>\n              No recently added products\n            </div>\n          </div>\n        )}\n        <Clickable\n          className={styles.fab}\n          onClick={() => {\n            history.push('/products/create');\n          }}>\n          <img src={AddIcon} alt=\"\" />\n        </Clickable>\n      </div>\n    )}\n      {isDesktop\n    && (\n      <div className={styles.container}>\n        <div className={styles.emptyProductsRow}>\n          <Grid item xs={6} container spacing={1}>\n            <InstaImport profile={profile} onClose={refreshProfile} page=\"products\" />\n            <div className={styles.buttonContainer}>\n              <Button\n                className={cx(styles.copyButton, styles.desktopButton)}\n                startIcon={addIcon}\n                label=\"Add Product\"\n                onClick={onCreate}\n              />\n              <Clickable\n                className={styles.dropDownButton}\n                onClick={e => {\n                  setAnchorEl(e.currentTarget);\n                }}\n              >\n                <div>\n                  <img src={chevronWhiteBottom} alt=\"\" />\n                </div>\n              </Clickable>\n              <Menu\n                anchorEl={anchorMenuEl}\n                open={Boolean(anchorMenuEl)}\n                onClose={handleMenuClose}\n                anchorOrigin={{\n                  vertical: 'top',\n                  horizontal: 'left'\n                }}\n                transformOrigin={{\n                  vertical: 'top',\n                  horizontal: 'left'\n                }}\n              >\n                <MenuItem onClick={openBulkUploadProducts}>Bulk Upload Products</MenuItem>\n              </Menu>\n            </div>\n          </Grid>\n        </div>\n        <div className={styles.pickerContainer}>\n          <div className={styles.picker}>\n            <div>\n              <Picker\n                label={getText(dateRangeFilters)}\n                onSelect={(e) => {\n                  setDateRangeFilters(e);\n                  if (!e.from) {\n                    params.delete('created');\n                    history.push({ search: params.toString() });\n                    refresh();\n                    return;\n                  }\n                  params.set('created', 'custom');\n                  history.push({ search: params.toString() });\n                  refresh();\n                }}\n              />\n            </div>\n          </div>\n          <div className={styles.pickerContainer1}>\n            <div className={styles.search1}>\n              <Search\n                value={query}\n                placeholder=\"Search products\"\n                onChange={(e) => {\n                  setQuery(e.target.value);\n                  refresh();\n                }}\n              />\n            </div>\n            {/* <Button\n              label=\"Search \"\n              onClick={onCreate}\n            /> */}\n          </div>\n          <div className={styles.search}>\n            <Select\n              className={styles.select}\n              classNamePrefix=\"react-select\"\n              // label=\"Select Bank\"\n              placeholder=\"Select Products\"\n              value={list.find(x => x.value === state)}\n              onChange={onFilterSelect}\n              options={list}\n            />\n          </div>\n        </div>\n        <div className=\"textCenter fullWidth\">\n          {types?.length > 0 && (\n            <div className={styles.chipSec}>\n              <Chip\n                color=\"primary\"\n                className={styles.chip}\n                label={types === 'null' ? 'Un Named' : types}\n                deleteIcon={<img src={InfoClose} alt=\"\" />}\n                onDelete={() => {\n                  history.push({\n                    pathname: 'products/catalog',\n                  });\n                }}\n              />\n            </div>\n          )}\n        </div>\n        {products.length > 0 ? (\n          <InfiniteLoader\n            loadMoreRows={loadMore}\n            isRowLoaded={isLoaded}\n            rowCount={rowCount}\n            minimumBatchSize={10}\n          >\n            {({\n              onRowsRendered,\n              registerChild\n            }) => (\n              <RVGrid\n                onSectionRendered={onSectionRendered(onRowsRendered)}\n                ref={registerChild}\n                cellRenderer={renderCell}\n                columnCount={2}\n                columnWidth={dCellWidth}\n                height={dHeight}\n                rowCount={Math.ceil(rowCount / 2)}\n                rowHeight={135}\n                width={window.screen.width - 272 - 60 - 32}\n              />\n            )}\n          </InfiniteLoader>\n        ) : (\n          <div className={styles.emptyProducts}>\n            <img src={emptyProducts} alt=\"\" />\n            <div className={styles.emptyProductText}>\n              No recently added products\n            </div>\n          </div>\n        )}\n      </div>\n    )}\n    </>\n  );\n}\n\nexport default ProductsList;\n"]},"metadata":{},"sourceType":"module"}