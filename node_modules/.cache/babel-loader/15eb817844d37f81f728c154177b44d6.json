{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/profile/delivery/Delivery.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Drawer } from \"../../../components/shared/Drawer\";\nimport { FormControlLabel } from '@material-ui/core';\nimport { Field, Formik } from 'formik';\nimport { RadioGroup } from 'formik-material-ui';\nimport { PrimaryRadio } from \"../../../components/coupons/Radio.jsx\";\nimport { DeliveryType, getInitialValues } from \"../../../components/profile/delivery/utils\";\nimport { ConditionalDelivery, DistanceDelivery, FixedDelivery, ShippingDelivery } from \"../../../components/profile/delivery\";\nimport SnackBar from \"../../../services/snackbar\";\nimport Loader from \"../../../services/loader\";\nimport { Becca } from \"../../../api\";\nimport starIcon from \"../../../assets/overview/star.svg\";\nimport { useHistory } from 'react-router-dom';\nimport { Button } from 'phoenix-components';\nimport { useQueryParams } from \"../../../hooks\";\nimport { useIsConditionalChargesEnabled } from \"../../../contexts/userContext\";\nimport EventManager from \"../../../utils/events\";\nimport { useDesktop } from \"../../../contexts\";\nimport { SideDrawer } from \"../../../components/shared/SideDrawer\";\nimport { FooterButton } from \"../../../components/common/FooterButton\";\nimport { useChargeConfig } from \"../../../hooks/areasServed\";\nimport { Loading } from \"../../../components/shared/Loading\";\nimport { deliverySchema } from \"./schema\";\nimport styles from \"./Delivery.module.css\";\n\nfunction Delivery() {\n  _s();\n\n  const params = useQueryParams();\n  const history = useHistory();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled();\n  const [chargeConfig, refresh, loading] = useChargeConfig();\n  const isDesktop = useDesktop();\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const onSubmit = async values => {\n    try {\n      Loader.show();\n\n      if (values.chargeType !== 'fixed' && values.chargeType !== 'free') {\n        if (!isConditionalChargesEnabled) {\n          params.set('openPlans', 'generic');\n          history.push({\n            search: params.toString()\n          });\n          return;\n        }\n      }\n\n      await Becca.updateChargeConfig(values);\n      EventManager.emitEvent('delivery_details_added', {\n        type: values.chargeType\n      });\n      SnackBar.show('Delivery charges saved!', 'success');\n      refresh();\n      history.goBack();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const onShippingTypeChange = async type => onSubmit({ ...chargeConfig,\n    chargeType: type\n  });\n\n  if (isDesktop) {\n    return /*#__PURE__*/React.createElement(Formik, {\n      validationSchema: deliverySchema,\n      initialValues: getInitialValues(chargeConfig || {}),\n      onSubmit: onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, ({\n      submitForm\n    }) => /*#__PURE__*/React.createElement(SideDrawer, {\n      backButton: true,\n      title: \"Delivery Charges\",\n      onClose: () => history.goBack(),\n      onClick: () => submitForm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, {\n      component: RadioGroup,\n      name: \"chargeType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 32\n        }\n      }),\n      label: \"Free delivery\",\n      value: DeliveryType.FREE,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 32\n        }\n      }),\n      label: \"Fixed Delivery Charge\",\n      value: DeliveryType.FIXED,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(FixedDelivery, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 32\n        }\n      }),\n      label: \"Delivery Charge by Order Value\",\n      value: DeliveryType.CONDITIONAL,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(ConditionalDelivery, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.iconF,\n      src: starIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.card2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 34\n        }\n      }),\n      label: \"Delivery Charge by Zone\",\n      value: DeliveryType.AREA,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(DistanceDelivery, {\n      onRefresh: refresh,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 23\n      }\n    })), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.iconF,\n      src: starIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.card2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 34\n        }\n      }),\n      label: \"Delivery Charge by Mode\",\n      value: DeliveryType.SHIPPING,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(ShippingDelivery, {\n      onTypeChange: onShippingTypeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 23\n      }\n    })), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.iconF,\n      src: starIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 55\n      }\n    })))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.buttonD,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: \"Save\",\n      size: \"large\",\n      onClick: submitForm,\n      style: styles.button,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n  return /*#__PURE__*/React.createElement(Drawer, {\n    title: \"Delivery Charges\",\n    containerClass: styles.drawer,\n    topBarClass: styles.drawer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    validationSchema: deliverySchema,\n    initialValues: getInitialValues(chargeConfig),\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, ({\n    submitForm\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, {\n    component: RadioGroup,\n    name: \"chargeType\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 30\n      }\n    }),\n    label: \"Free delivery\",\n    value: DeliveryType.FREE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 30\n      }\n    }),\n    label: \"Fixed Delivery Charge\",\n    value: DeliveryType.FIXED,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(FixedDelivery, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 30\n      }\n    }),\n    label: \"Delivery Charge by Order Value\",\n    value: DeliveryType.CONDITIONAL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(ConditionalDelivery, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 19\n    }\n  }), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.iconF,\n    src: starIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 32\n      }\n    }),\n    label: \"Delivery Charge by Zone\",\n    value: DeliveryType.AREA,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(DistanceDelivery, {\n    onRefresh: refresh,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  })), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.iconF,\n    src: starIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(PrimaryRadio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 32\n      }\n    }),\n    label: \"Delivery Charge by Mode\",\n    value: DeliveryType.SHIPPING,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(ShippingDelivery, {\n    onTypeChange: onShippingTypeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  })), !isConditionalChargesEnabled && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.iconF,\n    src: starIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 53\n    }\n  }))), /*#__PURE__*/React.createElement(FooterButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    bordered: false,\n    label: \"Save\",\n    size: \"large\",\n    onClick: submitForm,\n    style: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(Delivery, \"3VlAU1riYAu5lN1FldkNFVKC2HQ=\", false, function () {\n  return [useQueryParams, useHistory, useIsConditionalChargesEnabled, useChargeConfig, useDesktop];\n});\n\n_c = Delivery;\nDelivery.propTypes = {};\nDelivery.defaultProps = {};\nexport default Delivery;\n\nvar _c;\n\n$RefreshReg$(_c, \"Delivery\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/profile/delivery/Delivery.jsx"],"names":["React","Drawer","FormControlLabel","Field","Formik","RadioGroup","PrimaryRadio","DeliveryType","getInitialValues","ConditionalDelivery","DistanceDelivery","FixedDelivery","ShippingDelivery","SnackBar","Loader","Becca","useHistory","Button","useQueryParams","useIsConditionalChargesEnabled","EventManager","useDesktop","SideDrawer","FooterButton","useChargeConfig","Loading","deliverySchema","styles","Delivery","params","history","isConditionalChargesEnabled","chargeConfig","refresh","loading","isDesktop","onSubmit","values","show","chargeType","set","push","search","toString","updateChargeConfig","emitEvent","type","goBack","e","showError","hide","onShippingTypeChange","submitForm","container","card","FREE","FIXED","CONDITIONAL","iconF","starIcon","card2","AREA","SHIPPING","buttonD","button","drawer","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Drawer } from 'components/shared/Drawer';\nimport { FormControlLabel } from '@material-ui/core';\nimport { Field, Formik } from 'formik';\nimport { RadioGroup } from 'formik-material-ui';\nimport { PrimaryRadio } from 'components/coupons/Radio.jsx';\nimport { DeliveryType, getInitialValues } from 'components/profile/delivery/utils';\nimport {\n  ConditionalDelivery, DistanceDelivery, FixedDelivery, ShippingDelivery\n} from 'components/profile/delivery';\nimport SnackBar from 'services/snackbar';\nimport Loader from 'services/loader';\nimport { Becca } from 'api';\nimport starIcon from 'assets/overview/star.svg';\nimport { useHistory } from 'react-router-dom';\nimport { Button } from 'phoenix-components';\nimport { useQueryParams } from 'hooks';\nimport {\n  useIsConditionalChargesEnabled\n} from 'contexts/userContext';\nimport EventManager from 'utils/events';\nimport { useDesktop } from 'contexts';\nimport { SideDrawer } from 'components/shared/SideDrawer';\nimport { FooterButton } from 'components/common/FooterButton';\nimport { useChargeConfig } from 'hooks/areasServed';\nimport { Loading } from 'components/shared/Loading';\nimport { deliverySchema } from './schema';\nimport styles from './Delivery.module.css';\n\nfunction Delivery() {\n  const params = useQueryParams();\n  const history = useHistory();\n  const isConditionalChargesEnabled = useIsConditionalChargesEnabled();\n  const [chargeConfig, refresh, loading] = useChargeConfig();\n  const isDesktop = useDesktop();\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  const onSubmit = async (values) => {\n    try {\n      Loader.show();\n      if (values.chargeType !== 'fixed' && values.chargeType !== 'free') {\n        if (!isConditionalChargesEnabled) {\n          params.set('openPlans', 'generic');\n          history.push({\n            search: params.toString(),\n          });\n          return;\n        }\n      }\n      await Becca.updateChargeConfig(values);\n      EventManager.emitEvent('delivery_details_added', {\n        type: values.chargeType,\n      });\n      SnackBar.show('Delivery charges saved!', 'success');\n      refresh();\n      history.goBack();\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      Loader.hide();\n    }\n  };\n\n  const onShippingTypeChange = async (type) => onSubmit({\n    ...chargeConfig,\n    chargeType: type,\n  });\n\n  if (isDesktop) {\n    return (\n      <Formik\n        validationSchema={deliverySchema}\n        initialValues={getInitialValues(chargeConfig || {})}\n        onSubmit={onSubmit}\n      >\n        {({ submitForm }) => (\n          <SideDrawer\n            backButton={true}\n            title=\"Delivery Charges\"\n            onClose={() => history.goBack()}\n            onClick={() => submitForm()}\n          >\n            <div className={styles.container}>\n              <>\n                <Field\n                  component={RadioGroup}\n                  name=\"chargeType\"\n                >\n                  <div className={styles.card}>\n                    <FormControlLabel\n                      control={<PrimaryRadio />}\n                      label=\"Free delivery\"\n                      value={DeliveryType.FREE}\n                    />\n                  </div>\n                  <div className={styles.card}>\n                    <FormControlLabel\n                      control={<PrimaryRadio />}\n                      label=\"Fixed Delivery Charge\"\n                      value={DeliveryType.FIXED}\n                    />\n                    <FixedDelivery />\n                  </div>\n                  <div className={styles.card}>\n                    <FormControlLabel\n                      control={<PrimaryRadio />}\n                      label=\"Delivery Charge by Order Value\"\n                      value={DeliveryType.CONDITIONAL} />\n                    <ConditionalDelivery />\n                    {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                  </div>\n                  <div className={styles.card2}>\n                    <div>\n                      <FormControlLabel\n                        control={<PrimaryRadio />}\n                        label=\"Delivery Charge by Zone\"\n                        value={DeliveryType.AREA} />\n                      <DistanceDelivery onRefresh={refresh} />\n                    </div>\n                    {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                  </div>\n                  <div className={styles.card2}>\n                    <div>\n                      <FormControlLabel\n                        control={<PrimaryRadio />}\n                        label=\"Delivery Charge by Mode\"\n                        value={DeliveryType.SHIPPING} />\n                      <ShippingDelivery onTypeChange={onShippingTypeChange} />\n                    </div>\n                    {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                  </div>\n                </Field>\n              </>\n              <br />\n              <br />\n              <div className={styles.buttonD}>\n                <Button\n                  label=\"Save\"\n                  size=\"large\"\n                  onClick={submitForm}\n                  style={styles.button}\n                />\n              </div>\n            </div>\n          </SideDrawer>\n        )}\n      </Formik>\n    );\n  }\n\n  return (\n    <Drawer\n      title=\"Delivery Charges\"\n      containerClass={styles.drawer}\n      topBarClass={styles.drawer}\n    >\n      <div className={styles.container}>\n        <Formik\n          validationSchema={deliverySchema}\n          initialValues={getInitialValues(chargeConfig)}\n          onSubmit={onSubmit}\n        >\n          {({ submitForm }) => (\n            <>\n              <Field\n                component={RadioGroup}\n                name=\"chargeType\"\n              >\n                <div className={styles.card}>\n                  <FormControlLabel\n                    control={<PrimaryRadio />}\n                    label=\"Free delivery\"\n                    value={DeliveryType.FREE}\n                  />\n                </div>\n                <div className={styles.card}>\n                  <FormControlLabel\n                    control={<PrimaryRadio />}\n                    label=\"Fixed Delivery Charge\"\n                    value={DeliveryType.FIXED}\n                  />\n                  <FixedDelivery />\n                </div>\n                <div className={styles.card}>\n                  <FormControlLabel\n                    control={<PrimaryRadio />}\n                    label=\"Delivery Charge by Order Value\"\n                    value={DeliveryType.CONDITIONAL} />\n                  <ConditionalDelivery />\n                  {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                </div>\n                <div className={styles.card2}>\n                  <div>\n                    <FormControlLabel\n                      control={<PrimaryRadio />}\n                      label=\"Delivery Charge by Zone\"\n                      value={DeliveryType.AREA} />\n                    <DistanceDelivery onRefresh={refresh} />\n                  </div>\n                  {/* <Clickable onClick={toggleSelect} className={styles.iconR}>\n                    <span className={styles.config}>View Config</span>\n                  </Clickable>\n                  {select && <DistanceDelivery onClose={toggleSelect} onRefresh={refresh} />} */}\n                  {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                </div>\n                <div className={styles.card2}>\n                  <div>\n                    <FormControlLabel\n                      control={<PrimaryRadio />}\n                      label=\"Delivery Charge by Mode\"\n                      value={DeliveryType.SHIPPING} />\n                    <ShippingDelivery onTypeChange={onShippingTypeChange} />\n                  </div>\n                  {!isConditionalChargesEnabled && (<img className={styles.iconF} src={starIcon} alt=\"\" />)}\n                </div>\n              </Field>\n              <FooterButton>\n                <Button\n                  fullWidth\n                  bordered={false}\n                  label=\"Save\"\n                  size=\"large\"\n                  onClick={submitForm}\n                  style={styles.button}\n                />\n              </FooterButton>\n            </>\n          )}\n        </Formik>\n        <br />\n        <br />\n      </div>\n    </Drawer>\n  );\n}\n\nDelivery.propTypes = {};\n\nDelivery.defaultProps = {};\n\nexport default Delivery;\n"]},"metadata":{},"sourceType":"module"}