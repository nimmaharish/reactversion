{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/components/orders/CustomizationForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useOrder, useRefresh } from \"../../contexts/orderContext\";\nimport { get } from 'lodash';\nimport SnackBar from \"../../services/snackbar\";\nimport { Factory } from \"../../api\";\nimport { Button, Clickable, ReactInput } from 'phoenix-components';\nimport Loader from \"../../services/loader\";\nimport PropTypes from 'prop-types';\nimport closeIcon from \"../../assets/images/orders/list/close.svg\";\nimport { Dialog } from '@material-ui/core';\nimport { useToggle } from \"../../hooks/common\";\nimport styles from \"./CustomizationForm.module.css\";\nexport function CustomizationForm() {\n  _s();\n\n  const order = useOrder();\n  const enabled = get(order, 'buttons.enableCustomization', false);\n  const refresh = useRefresh();\n  const [price, setPrice] = useState('');\n  const [open, toggleOpen] = useToggle();\n\n  if (!enabled) {\n    return null;\n  }\n\n  const onClick = async () => {\n    const value = parseFloat(price) || 0;\n\n    if (value <= 0) {\n      SnackBar.show('Invalid Price, It should be greater than 0', 'error');\n      return;\n    }\n\n    try {\n      Loader.show();\n      await Factory.addCharge(order._id, {\n        price: value\n      });\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong please try again', 'error');\n    } finally {\n      setTimeout(async () => {\n        Loader.hide();\n        await refresh();\n      }, 1000);\n    }\n  };\n\n  if (!open) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.chargeButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, \"Have \"), /*#__PURE__*/React.createElement(Clickable, {\n      className: styles.click,\n      onClick: toggleOpen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, \"Customization charges?\"));\n  }\n\n  return /*#__PURE__*/React.createElement(Dialog, {\n    maxWidth: \"xs\",\n    open: true,\n    onClose: toggleOpen,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexEnd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Clickable, {\n    onClick: toggleOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: closeIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Add customization fee\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ReactInput, {\n    value: price,\n    setValue: p => setPrice(p),\n    type: \"number\",\n    label: \"Customization Fee\",\n    placeholder: \"e.g. 100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    label: \"Add\",\n    onClick: onClick,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  })))));\n}\n\n_s(CustomizationForm, \"Nqv87O0Rbvb2QDq5Ac5fwqC2Yak=\", false, function () {\n  return [useOrder, useRefresh, useToggle];\n});\n\n_c = CustomizationForm;\nCustomizationForm.propTypes = {\n  onBack: PropTypes.func\n};\nCustomizationForm.defaultProps = {\n  onBack: null\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomizationForm\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/components/orders/CustomizationForm.jsx"],"names":["React","useState","useOrder","useRefresh","get","SnackBar","Factory","Button","Clickable","ReactInput","Loader","PropTypes","Dialog","useToggle","styles","CustomizationForm","order","enabled","refresh","price","setPrice","open","toggleOpen","onClick","value","parseFloat","show","addCharge","_id","e","console","error","setTimeout","hide","chargeButton","click","section","closeIcon","label","container","form","p","propTypes","onBack","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useOrder, useRefresh } from 'contexts/orderContext';\nimport { get } from 'lodash';\nimport SnackBar from 'services/snackbar';\nimport { Factory } from 'api';\nimport { Button, Clickable, ReactInput } from 'phoenix-components';\nimport Loader from 'services/loader';\nimport PropTypes from 'prop-types';\nimport closeIcon from 'assets/images/orders/list/close.svg';\nimport { Dialog } from '@material-ui/core';\nimport { useToggle } from 'hooks/common';\nimport styles from './CustomizationForm.module.css';\n\nexport function CustomizationForm() {\n  const order = useOrder();\n  const enabled = get(order, 'buttons.enableCustomization', false);\n  const refresh = useRefresh();\n  const [price, setPrice] = useState('');\n  const [open, toggleOpen] = useToggle();\n\n  if (!enabled) {\n    return null;\n  }\n\n  const onClick = async () => {\n    const value = parseFloat(price) || 0;\n    if (value <= 0) {\n      SnackBar.show('Invalid Price, It should be greater than 0', 'error');\n      return;\n    }\n    try {\n      Loader.show();\n      await Factory.addCharge(order._id, { price: value });\n    } catch (e) {\n      console.error(e);\n      SnackBar.show('Something went wrong please try again', 'error');\n    } finally {\n      setTimeout(async () => {\n        Loader.hide();\n        await refresh();\n      }, 1000);\n    }\n  };\n\n  if (!open) {\n    return (\n      <div className={styles.chargeButton}>\n        <span>Have </span>\n        <Clickable className={styles.click} onClick={toggleOpen}>\n          Customization charges?\n        </Clickable>\n      </div>\n    );\n  }\n\n  return (\n    <Dialog\n      maxWidth=\"xs\"\n      open={true}\n      onClose={toggleOpen}\n      fullWidth\n    >\n      <div className={styles.section}>\n        <div className=\"flexEnd\">\n          <Clickable\n            onClick={toggleOpen}>\n            <img src={closeIcon} alt=\"\" />\n          </Clickable>\n        </div>\n        <div className={styles.label}>\n          Add customization fee\n        </div>\n        <div className={styles.container}>\n          <div className={styles.form}>\n            <ReactInput\n              value={price}\n              setValue={p => setPrice(p)}\n              type=\"number\"\n              label=\"Customization Fee\"\n              placeholder=\"e.g. 100\"\n            />\n            <Button\n              label=\"Add\"\n              onClick={onClick}\n              size=\"large\"\n            />\n          </div>\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n\nCustomizationForm.propTypes = {\n  onBack: PropTypes.func,\n};\n\nCustomizationForm.defaultProps = {\n  onBack: null\n};\n"]},"metadata":{},"sourceType":"module"}