{"ast":null,"code":"var _jsxFileName = \"/home/harish/windo/phoenix/src/containers/profile/theme/customThemes/List.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, Clickable, Switch } from 'phoenix-components';\nimport checked from \"../../../../assets/images/shippingModes/checked.svg\";\nimport unchecked from \"../../../../assets/images/shippingModes/unChecked.svg\";\nimport { useThemeConfig, useToggle } from \"../../../../hooks/common\";\nimport { useDesktop, useRefreshShop, useShop } from \"../../../../contexts\";\nimport { useQueryParams } from \"../../../../hooks\";\nimport { useHistory } from 'react-router-dom';\nimport { StatusSelectionBar } from \"../../../../components/shared/StatusSelectionBar\";\nimport Loader from \"../../../../services/loader\";\nimport cx from 'classnames';\nimport SnackBar from \"../../../../services/snackbar\";\nimport { Becca } from \"../../../../api\";\nimport { Loading } from \"../../../../components/shared/Loading\";\nimport { DeleteAlert } from \"../../../../components/shared/DeleteAlert\";\nimport Layout from \"./Layout\";\nimport { getDefaultValues } from \"./utils\";\nimport styles from \"./List.module.css\";\n\nfunction List() {\n  _s();\n\n  var _initialValues$compon, _Object$values, _Object$entries;\n\n  const history = useHistory();\n  const shop = useShop();\n  const refreshShop = useRefreshShop();\n  const params = useQueryParams();\n  const [initialValues, setInitialValues, loading, refresh] = useThemeConfig();\n  const componentType = params.get('type') || '';\n  const isDesktop = useDesktop();\n  const isType = params.has('type');\n  const [componentValue, setComponentValue] = useState(((_initialValues$compon = initialValues[componentType]) === null || _initialValues$compon === void 0 ? void 0 : _initialValues$compon.name) || null);\n  const [key, setKey] = useState(null);\n  useEffect(() => {\n    if (componentType) {\n      var _initialValues$compon2;\n\n      setComponentValue(((_initialValues$compon2 = initialValues[componentType]) === null || _initialValues$compon2 === void 0 ? void 0 : _initialValues$compon2.name) || null);\n    }\n  }, [componentType]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const morph = (componentType, isDesktop) => {\n    var _actualValues$styles, _actualValues$styles2;\n\n    const actualValues = getDefaultValues(componentType, null, isDesktop);\n    const appliedTheme = actualValues === null || actualValues === void 0 ? void 0 : (_actualValues$styles = actualValues.styles) === null || _actualValues$styles === void 0 ? void 0 : _actualValues$styles.filter(x => {\n      var _initialValues$compon3;\n\n      return x.title === ((_initialValues$compon3 = initialValues[componentType]) === null || _initialValues$compon3 === void 0 ? void 0 : _initialValues$compon3.name);\n    });\n    const otherThemes = actualValues === null || actualValues === void 0 ? void 0 : (_actualValues$styles2 = actualValues.styles) === null || _actualValues$styles2 === void 0 ? void 0 : _actualValues$styles2.filter(x => {\n      var _initialValues$compon4;\n\n      return x.title !== ((_initialValues$compon4 = initialValues[componentType]) === null || _initialValues$compon4 === void 0 ? void 0 : _initialValues$compon4.name);\n    });\n    actualValues.styles = appliedTheme.concat(otherThemes);\n    return actualValues;\n  };\n\n  const onSave = async () => {\n    Loader.show();\n\n    try {\n      await Becca.updateShop({\n        config: { ...(shop.config || {}),\n          themeName: 'custom'\n        }\n      });\n\n      if (componentType) {\n        initialValues[componentType].name = componentValue || null;\n        setInitialValues({ ...initialValues\n        });\n      }\n\n      await Becca.updateUiConfig('themeConfig', initialValues);\n      refresh();\n      SnackBar.show('Theme saved successfully!', 'success');\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      if (isType) {\n        history.goBack();\n      }\n\n      refreshShop();\n      Loader.hide();\n    }\n  };\n\n  const onEnable = name => {\n    initialValues[name || key].enabled = !initialValues[key || name].enabled;\n    setInitialValues({ ...initialValues\n    });\n    setKey(null);\n    setTimeout(() => {\n      onSave();\n    }, 100);\n  };\n\n  const onOpenAlert = key => {\n    var _initialValues$key;\n\n    if ((_initialValues$key = initialValues[key]) !== null && _initialValues$key !== void 0 && _initialValues$key.enabled) {\n      setKey(key);\n      return;\n    }\n\n    onEnable(key);\n  };\n\n  const stateList = [{\n    label: 'Themes',\n    value: 'themes'\n  }, {\n    label: 'Layout Customization',\n    value: 'layoutCustomization'\n  }];\n  const [openLayout, toogleOpenLayout] = useToggle(false);\n\n  const onStateChange = val => {\n    if (val === 'layoutCustomization') {\n      toogleOpenLayout();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.themesSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StatusSelectionBar, {\n    tabClassName: styles.tabClassName1,\n    items: stateList,\n    seperator: true,\n    onChange: onStateChange,\n    active: \"themes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }), openLayout && /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.themes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, key && /*#__PURE__*/React.createElement(DeleteAlert, {\n    title: \"By switching this off, this section will not be visible in your shop website.\",\n    onCancel: () => setKey(null),\n    onDelete: () => onEnable(),\n    primary: \"CONFIRM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }), (componentType === null || componentType === void 0 ? void 0 : componentType.length) === 0 && ((_Object$values = Object.values(getDefaultValues(null, 'celosia', isDesktop))) === null || _Object$values === void 0 ? void 0 : _Object$values.map(obj => {\n    var _initialValues$obj$ke, _initialValues$obj$ke2, _getDefaultValues, _getDefaultValues$sty, _initialValues$obj$ke3;\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.title, styles.flexBetween),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }, obj === null || obj === void 0 ? void 0 : obj.title, obj.key !== 'productCard' && obj.key !== 'header' && obj.key !== 'footer' && /*#__PURE__*/React.createElement(Switch, {\n      active: (_initialValues$obj$ke = initialValues[obj === null || obj === void 0 ? void 0 : obj.key]) === null || _initialValues$obj$ke === void 0 ? void 0 : _initialValues$obj$ke.enabled,\n      onChange: () => onOpenAlert(obj.key),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.box,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, (obj === null || obj === void 0 ? void 0 : obj.key) !== 'header' && (obj === null || obj === void 0 ? void 0 : obj.key) !== 'footer' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.center,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, \"Current Style\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.spacer, styles.w100),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"Current Style\",\n      className: cx(styles.img, styles[`${(_initialValues$obj$ke2 = initialValues[obj === null || obj === void 0 ? void 0 : obj.key]) === null || _initialValues$obj$ke2 === void 0 ? void 0 : _initialValues$obj$ke2.name}${obj === null || obj === void 0 ? void 0 : obj.key}`]),\n      src: (_getDefaultValues = getDefaultValues(obj === null || obj === void 0 ? void 0 : obj.key, (_initialValues$obj$ke3 = initialValues[obj === null || obj === void 0 ? void 0 : obj.key]) === null || _initialValues$obj$ke3 === void 0 ? void 0 : _initialValues$obj$ke3.name, isDesktop)) === null || _getDefaultValues === void 0 ? void 0 : (_getDefaultValues$sty = _getDefaultValues.styles[0]) === null || _getDefaultValues$sty === void 0 ? void 0 : _getDefaultValues$sty.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Clickable, {\n      className: styles.selectStyle,\n      onClick: () => {\n        params.set('type', obj === null || obj === void 0 ? void 0 : obj.key);\n        history.push({\n          search: params.toString()\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, 'Select Style >')) : /*#__PURE__*/React.createElement(Clickable, {\n      className: styles.comingSoon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, \"Coming Soon...\")));\n  })), (componentType === null || componentType === void 0 ? void 0 : componentType.length) > 0 && ((_Object$entries = Object.entries(morph(componentType, isDesktop))) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(([key, value]) => {\n    var _value$filter;\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, key === 'title' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 35\n      }\n    }, value), key === 'styles' && (value === null || value === void 0 ? void 0 : (_value$filter = value.filter(s => s.title !== 'celosia')) === null || _value$filter === void 0 ? void 0 : _value$filter.map(obj => /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.box,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Clickable, {\n      className: cx(styles.selectStyle, styles.mb),\n      onClick: () => setComponentValue(obj.title),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, (obj === null || obj === void 0 ? void 0 : obj.title) === componentValue ? 'Selected' : 'Select Style', /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"radio\",\n      src: (obj === null || obj === void 0 ? void 0 : obj.title) === componentValue ? checked : unchecked,\n      className: styles.radio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.w100,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"radio\",\n      className: cx(styles.img, styles[`${obj.title}${componentType}`]),\n      src: obj.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 23\n      }\n    }))))));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    label: \"Save Changes\",\n    bordered: false,\n    className: styles.button,\n    onClick: onSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(List, \"/Jpym4j9Pr2eCsilZ1NLT3nWnc8=\", false, function () {\n  return [useHistory, useShop, useRefreshShop, useQueryParams, useThemeConfig, useDesktop, useToggle];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/home/harish/windo/phoenix/src/containers/profile/theme/customThemes/List.jsx"],"names":["React","useEffect","useState","Button","Clickable","Switch","useThemeConfig","useToggle","useDesktop","useRefreshShop","useShop","useQueryParams","useHistory","StatusSelectionBar","Loader","cx","SnackBar","Becca","Loading","DeleteAlert","Layout","getDefaultValues","styles","List","history","shop","refreshShop","params","initialValues","setInitialValues","loading","refresh","componentType","get","isDesktop","isType","has","componentValue","setComponentValue","name","key","setKey","morph","actualValues","appliedTheme","filter","x","title","otherThemes","concat","onSave","show","updateShop","config","themeName","updateUiConfig","e","showError","goBack","hide","onEnable","enabled","setTimeout","onOpenAlert","stateList","label","value","openLayout","toogleOpenLayout","onStateChange","val","themesSection","tabClassName1","themes","length","Object","values","map","obj","flexBetween","box","center","spacer","w100","img","image","selectStyle","set","push","search","toString","comingSoon","entries","s","mb","checked","unchecked","radio","buttonContainer","button"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Button, Clickable, Switch } from 'phoenix-components';\nimport checked from 'assets/images/shippingModes/checked.svg';\nimport unchecked from 'assets/images/shippingModes/unChecked.svg';\nimport { useThemeConfig, useToggle } from 'hooks/common';\nimport { useDesktop, useRefreshShop, useShop } from 'contexts';\nimport { useQueryParams } from 'hooks';\nimport { useHistory } from 'react-router-dom';\nimport { StatusSelectionBar } from 'components/shared/StatusSelectionBar';\nimport Loader from 'services/loader';\nimport cx from 'classnames';\nimport SnackBar from 'services/snackbar';\nimport { Becca } from 'api';\nimport { Loading } from 'components/shared/Loading';\nimport { DeleteAlert } from 'components/shared/DeleteAlert';\nimport Layout from './Layout';\nimport { getDefaultValues } from './utils';\nimport styles from './List.module.css';\n\nfunction List() {\n  const history = useHistory();\n  const shop = useShop();\n  const refreshShop = useRefreshShop();\n  const params = useQueryParams();\n  const [initialValues, setInitialValues, loading, refresh] = useThemeConfig();\n  const componentType = params.get('type') || '';\n  const isDesktop = useDesktop();\n  const isType = params.has('type');\n  const [componentValue, setComponentValue] = useState(initialValues[componentType]?.name || null);\n  const [key, setKey] = useState(null);\n\n  useEffect(() => {\n    if (componentType) {\n      setComponentValue(initialValues[componentType]?.name || null);\n    }\n  }, [componentType]);\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  const morph = (componentType, isDesktop) => {\n    const actualValues = getDefaultValues(componentType, null, isDesktop);\n    const appliedTheme = actualValues?.styles?.filter(x => x.title === initialValues[componentType]?.name);\n    const otherThemes = actualValues?.styles?.filter(x => x.title !== initialValues[componentType]?.name);\n    actualValues.styles = appliedTheme.concat(otherThemes);\n    return actualValues;\n  };\n\n  const onSave = async () => {\n    Loader.show();\n    try {\n      await Becca.updateShop({\n        config: {\n          ...(shop.config || {}),\n          themeName: 'custom',\n        }\n      });\n      if (componentType) {\n        initialValues[componentType].name = componentValue || null;\n        setInitialValues({ ...initialValues });\n      }\n      await Becca.updateUiConfig('themeConfig', initialValues);\n      refresh();\n      SnackBar.show('Theme saved successfully!', 'success');\n    } catch (e) {\n      SnackBar.showError(e);\n    } finally {\n      if (isType) {\n        history.goBack();\n      }\n      refreshShop();\n      Loader.hide();\n    }\n  };\n\n  const onEnable = (name) => {\n    initialValues[name || key].enabled = !initialValues[key || name].enabled;\n    setInitialValues({ ...initialValues });\n    setKey(null);\n    setTimeout(() => {\n      onSave();\n    }, 100);\n  };\n\n  const onOpenAlert = key => {\n    if (initialValues[key]?.enabled) {\n      setKey(key);\n      return;\n    }\n    onEnable(key);\n  };\n\n  const stateList = [\n    {\n      label: 'Themes',\n      value: 'themes',\n    },\n    {\n      label: 'Layout Customization',\n      value: 'layoutCustomization',\n    },\n  ];\n  const [openLayout, toogleOpenLayout] = useToggle(false);\n  const onStateChange = (val) => {\n    if (val === 'layoutCustomization') {\n      toogleOpenLayout();\n    }\n  };\n\n  return (\n    <div className={styles.themesSection}>\n      <StatusSelectionBar\n        tabClassName={styles.tabClassName1}\n        items={stateList}\n        seperator={true}\n        onChange={onStateChange}\n        active=\"themes\"\n      />\n      {openLayout && <Layout />}\n      <div className={styles.themes}>\n        {key && (\n          <DeleteAlert\n            title=\"By switching this off, this section will not be visible in your shop website.\"\n            onCancel={() => setKey(null)}\n            onDelete={() => onEnable()}\n            primary=\"CONFIRM\"\n          />\n        )}\n        {componentType?.length === 0 && Object.values(getDefaultValues(null, 'celosia', isDesktop))\n          ?.map(obj => (\n            <>\n              <div className={cx(styles.title, styles.flexBetween)}>\n                {obj?.title}\n                {(obj.key !== 'productCard' && obj.key !== 'header' && obj.key !== 'footer') && (\n                  <Switch active={initialValues[obj?.key]?.enabled} onChange={() => onOpenAlert(obj.key)} />\n                )}\n              </div>\n\n              <div className={styles.box}>\n                {(obj?.key !== 'header' && obj?.key !== 'footer') ? (\n                  <>\n                    <div className={styles.center}>Current Style</div>\n                    <div className={cx(styles.spacer, styles.w100)}>\n                      <img\n                        alt=\"Current Style\"\n                        className={cx(styles.img, styles[`${initialValues[obj?.key]?.name}${obj?.key}`])}\n                        src={getDefaultValues(obj?.key, initialValues[obj?.key]?.name, isDesktop)?.styles[0]?.image}\n                      />\n                    </div>\n                    <Clickable\n                      className={styles.selectStyle}\n                      onClick={\n                        () => {\n                          params.set('type', obj?.key);\n                          history.push({ search: params.toString() });\n                        }\n                      }>\n                      {'Select Style >'}\n                    </Clickable>\n                  </>\n                ) : (\n                  <Clickable\n                    className={styles.comingSoon}>\n                    Coming Soon...\n                  </Clickable>\n                )}\n              </div>\n            </>\n          ))}\n        {componentType?.length > 0 && Object.entries(morph(componentType, isDesktop))\n          ?.map(([key, value]) => (\n            <>\n              {key === 'title' && <div className={styles.title}>{value}</div>}\n              {key === 'styles' && value?.filter(s => s.title !== 'celosia')\n                ?.map(obj => (\n                  <div className={styles.box}>\n                    <Clickable\n                      className={cx(styles.selectStyle, styles.mb)}\n                      onClick={() => setComponentValue(obj.title)}>\n                      {obj?.title === componentValue ? 'Selected' : 'Select Style'}\n                      <img\n                        alt=\"radio\"\n                        src={obj?.title === componentValue ? checked : unchecked}\n                        className={styles.radio}\n                      />\n                    </Clickable>\n                    <div className={styles.w100}>\n                      <img\n                        alt=\"radio\"\n                        className={cx(styles.img, styles[`${obj.title}${componentType}`])}\n                        src={obj.image}\n                      />\n                    </div>\n                  </div>\n                ))}\n            </>\n          ))}\n      </div>\n      <div className={styles.buttonContainer}>\n        <Button\n          size=\"large\"\n          label=\"Save Changes\"\n          bordered={false}\n          className={styles.button}\n          onClick={onSave}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}